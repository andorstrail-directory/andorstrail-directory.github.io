(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{19:function(t,e,n){},37:function(t,e,n){},38:function(t,e,n){},47:function(t,e,n){"use strict";n.r(e);var i=n(1),r=n.n(i),a=n(24),o=n.n(a),s=(n(37),n(8)),c=n(32),l=(n.p,n(38),n(17)),u=n(2),d=n(3),h=n(6),p=n(4),f=n(5),v=n(9);function m(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(g||e)&&console.warn(t)}function b(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(g||e)&&t()}var g=!1,j=n(28),x=n(0),O=["component"],y=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var a=Object.assign.apply(Object,[{}].concat(n));return r.a.createElement(t,a)},w=function(t){var e=t.component,n=Object(j.a)(t,O);return Object(x.jsx)(v.a,Object(s.a)(Object(s.a)({},n),{},{render:function(t){return y(e,t,n)}}))},k=n(10),C=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("menu",{children:Object(x.jsxs)("ul",{className:"hr",children:[Object(x.jsx)("li",{className:"/"==window.location.pathname?"selected":"",children:Object(x.jsx)(k.b,{to:"",children:"Home"})}),E("items","/body"),E("monsters","/animal"),E("NPC","/merchant"),E("conditions"),E("quests"),E("categories"),E("map")]})})}}]),n}(r.a.Component),E=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="/"+t+e,i=window.location.pathname.toUpperCase().startsWith("/"+t.toUpperCase())?"selected":"";return Object(x.jsx)("li",{className:i,children:Object(x.jsx)(k.b,{to:n.toLowerCase(),children:t.capitalize()})})},M=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{style:{textAlign:"left",margin:10},children:[Object(x.jsxs)("p",{children:["Welcome to ",Object(x.jsx)("b",{children:"Andor's Trail Directory V2"})," the fan page about amazing, beautiful a great game ",Object(x.jsx)("a",{href:"https://play.google.com/store/apps/details?id=com.gpl.rpg.AndorsTrail",children:"Andor's Trail"}),"."]}),Object(x.jsx)("h2",{children:"About"}),Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"Andor's Trail"})," is quest-driven Roguelike fantasy dungeon crawler RPG with a powerful story on Android, with open source code (GPL)."]}),Object(x.jsxs)("p",{children:["I created this web because ",Object(x.jsx)("a",{href:"http://andorstrail.irkalla.cz/0.7.0/",children:"previous one"})," was abandoned for years."]}),Object(x.jsx)("p",{children:"This pages get data directly from source files, witch are in easy-to-read JSON and XML format, and redner it birectly in your browser. "}),Object(x.jsx)("h2",{children:"Spoiler alert"}),Object(x.jsx)("p",{children:"This whole web \xefs a little bit of spoiler and it contains some informations witch you probably shouldn't know and can reveal some surprises and story twists. It is not such big deal, just be careful a consider yourself warned."}),Object(x.jsxs)("p",{children:["But if you are affraid of spoilers, stay away from ",Object(x.jsx)("b",{children:"quest page"}),"."]}),Object(x.jsx)("h2",{children:"Contact and links"}),Object(x.jsxs)("p",{children:["If you want more information about game, please visit the ",Object(x.jsx)("a",{href:"https://play.google.com/store/apps/details?id=com.gpl.rpg.AndorsTrail",children:"official game page on Google Play"})," or the ",Object(x.jsx)("a",{href:"https://www.andorstrail.com",children:"main game forum"}),". "]})]})}}]),n}(r.a.Component),R=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["name",function(t){return t.name}],["id",function(t){return t.id}],["size",function(t){return t.size}],["inventorySlot",function(t){return t.inventorySlot}],["actionType",function(t){return t.actionType}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){return Object(x.jsxs)("th",{children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(){var t=this,e=this.props.data;if(!e)return"";this.props.filter&&this.props.filter.length>0&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1})));var n=this.getKeys();return e.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(L,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(h.a)(i)),i.getRowsData=i.getRowsData.bind(Object(h.a)(i)),i.getKeys=i.getKeys.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{children:Object(x.jsxs)("table",{border:"1",children:[Object(x.jsx)("thead",{children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData()})]})})}}]),n}(r.a.Component),L=function(t){return t.keys.map((function(e,n){return Object(x.jsxs)("td",{children:[" ",e[1](t.data)," "]},e[0])}))},P=n(7),D=n.n(P),A=(n(19),n(12)),S={monsters_demon1:{x:64,y:64},monsters_demon2:{x:64,y:64},monsters_hydra1:{x:64,y:64},monsters_cyclops:{x:64,y:96},monsters_bosses_2x2:{x:64,y:64},monsters_giantbasilisk:{x:64,y:64}},I=function(t){return q(null===t||void 0===t?void 0:t.split(":")[0])},q=function(t){return S[t]||{x:32,y:32}},T=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){var t,e=this.props,n=e.data,i=e.prefix,r=e.noBackground,a=this.props.zoom||32,o=(n.rootLink||i)+(n.id||n.name),c="i"+(new Date-0)+"_"+Math.random(),l=null===(t=n.iconID)||void 0===t?void 0:t.split(":"),u=l[0],d=l[1],h=H(u),p=q(u);p.x=p.x*a/32,p.y=p.y*a/32;var f={width:p.x,height:p.y,overflow:"hidden"};return r||(f=Object(s.a)(Object(s.a)({},f),{},{backgroundImage:'url("/drawable/ui_selections.png")',backgroundRepeat:"no-repeat",backgroundPosition:n.iconBg*p.x+"px 0px",backgroundSize:5*p.x+"px "+p.y+"px"})),Object(x.jsx)("div",{style:{display:"flex"},children:Object(x.jsxs)(A.a,{style:f,title:n.displaytype,to:o,children:[Object(x.jsx)("div",{id:n.id,className:"TableAncor"}),Object(x.jsx)("img",{id:c,src:h,onLoad:V(d,p,c)})]})})}}]),n}(r.a.Component),H=function(t){if(t)return"/drawable/"+t+".png"},V=function(t,e,n){return function(){if(t){var i=document.getElementById(n),r=function(t,e,n){var i=-t%e*n.x;return{x:i,y:(-t*n.y-i)/e}}(t,i.width/e.x,e);i.style="margin: ".concat(r.y,"px 0 0 ").concat(r.x,"px; display: 'block'")}}},N={root:{position:"relative",paddingLeft:"10px",paddingTop:"5px",display:"block",width:"100%",height:"100%",alignItems:"center"}},_=function(t){t.tableManager,t.value,t.onChange,t.isEdit;var e=t.data;t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:N.root,children:Object(x.jsx)(T,{data:e})})},B={root:{position:"relative",padding:"5px 20px",display:"flex",width:"100%",height:"100%"},text:{marginLeft:1,whiteSpace:"nowrap"},aimg:{width:32,height:32,overflow:"hidden"}},K=function(t){return"/drawable/"+(null===t||void 0===t?void 0:t.split(":"))[0]+".png"},z=function(t,e,n){return t+"_"+e+"_"+n},F=function(t,e,n){return function(){var i=document.getElementById(z(t,e,n)),r=function(t,e){var n=null===t||void 0===t?void 0:t.split(":")[1],i=-n%e*32;return{x:i,y:(32*-n-i)/e}}(t,i.width/32);i.style="margin: ".concat(r.y,"px 0 0 ").concat(r.x,"px")}},U=function(t,e,n){return null===e||void 0===e?void 0:e.map(function(t,e){return function(n,i){var r=t;n.chance&&(r+=n.chance+"% chance of "),r+=n.link.name,r+=n.magnitude>=1?" x"+n.magnitude:" clearing",n.duration&&(r+=" ("+n.duration+" rounds)");var a="/conditions#"+n.link.id,o=z(n.link.iconID,e,i);return Object(x.jsx)(A.a,{style:B.aimg,title:r,to:a,children:Object(x.jsx)("img",{id:o,src:K(n.link.iconID),onLoad:F(n.link.iconID,e,i)})},o)}}(t,n))},G=function(t,e,n,i){return e?Object(x.jsx)("span",{style:B.text,title:t+" "+e.min+"-"+e.max,children:n}):""},W=function(t){t.tableManager,t.value,t.onChange,t.isEdit;var e,n,i,a,o,s,c,l,u,d,h=t.data,p=(t.column,t.rowIndex);t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:B.root,children:Object(x.jsxs)(r.a.Fragment,{children:[U("On equip\n ",null===(e=h.equipEffect)||void 0===e?void 0:e.addedConditions,p),U("On hit\n On target\n  ",null===(n=h.hitEffect)||void 0===n?void 0:n.conditionsTarget,p),U("On hit\n On source\n  ",null===(i=h.hitEffect)||void 0===i?void 0:i.conditionsSource,p),G("On hit\n On source\n  ",null===(a=h.hitEffect)||void 0===a?void 0:a.increaseCurrentHP,"+HP"),U("On kill\n On source\n  ",null===(o=h.killEffect)||void 0===o?void 0:o.conditionsSource,p),G("On kill\n On source\n  ",null===(s=h.killEffect)||void 0===s?void 0:s.increaseCurrentHP,"+HP"),G("On kill\n On source\n  ",null===(c=h.killEffect)||void 0===c?void 0:c.increaseCurrentAP,"+AP"),U("On hit received\n On source\n  ",null===(l=h.hitReceivedEffect)||void 0===l?void 0:l.conditionsSource,p),U("On hit received\n On target\n  ",null===(u=h.hitReceivedEffect)||void 0===u?void 0:u.conditionsTarget,p),U("On use\n ",null===(d=h.useEffect)||void 0===d?void 0:d.conditionsSource,p)]})})},J={root:{position:"relative",padding:"0 20px",display:"flex",width:"100%",height:"100%",alignItems:"center"},text:{marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},Y=["increaseAttackDamage","increaseAttackCost","increaseAttackChance","increaseBlockChance","increaseCriticalSkill","setCriticalMultiplier","increaseMaxHP","setNonWeaponDamageModifier","increaseMaxAP","increaseDamageResistance","addedConditions","conditionsTarget","increaseMoveCost","increaseUseItemCost","increaseReequipCost","",""],X=["conditionsTarget","conditionsSource","increaseCurrentHP","",""],Q=["conditionsSource","increaseCurrentHP","increaseCurrentAP",""],Z=["conditionsSource","conditionsTarget","",""],$=["conditionsSource","increaseCurrentHP",""],tt=["increaseAttackChance","increaseBlockChance","increaseDamageResistance","increaseAttackDamage","increaseMaxAP","increaseMoveCost","increaseAttackCost","increaseMaxHP","increaseCriticalSkill","increaseUseItemCost","increaseReequipCost","visualEffectID",""],et=["increaseCurrentHP","visualEffectID","increaseCurrentAP","","",""],nt=function(t,e,n){if(!e)return"";var i=Object.keys(e).filter((function(t){return-1==n.indexOf(t)})).map((function(t){return[t,e[t]]}));return i.length>0?t+JSON.stringify(i):""},it=function(t){t.tableManager,t.value,t.onChange,t.isEdit;var e=t.data;t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:J.root,children:Object(x.jsxs)(r.a.Fragment,{children:[nt("On equip:",e.equipEffect,Y),nt("On hit:",e.hitEffect,X),nt("On get hit:",e.hitReceivedEffect,Z),nt("On kill: ",e.killEffect,Q),nt("On use: ",e.useEffect,$),nt("",e.abilityEffect,tt),nt("",e.roundEffect,et)]})})},rt={root:{position:"relative",padding:"10px 20px",display:"block",width:"100%",height:"100%",alignItems:"center"},text:{margin:"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},at=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){t.tableManager;var n=t.value,i=(t.onChange,t.isEdit,t.data),r=(t.column,t.rowIndex,t.searchText,t.isFirstEditableCell,{data:i});return e.forEach((function(t){r.data=r.data[t]||{}})),"0"==n?"":r.data.min==r.data.max?Object(x.jsx)("div",{style:rt.root,children:Object(x.jsx)("span",{style:rt.text,children:n})}):Object(x.jsx)("div",{style:rt.root,children:Object(x.jsxs)("span",{style:rt.text,children:[n,"(",r.data.min,"/",r.data.max,")"]})})}},ot=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={scrollY:window.scrollY,scrollX:window.scrollX},i.onScroll=i.onScroll.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"onScroll",value:function(){this.setState({scrollY:window.scrollY,scrollX:window.scrollX})}},{key:"componentDidMount",value:function(){var t=this;if(window.onscroll){var e=window.onscroll;window.onscroll=function(){e(),t.onScroll()}}else window.onscroll=this.onScroll}},{key:"componentWillUnmount",value:function(){window.onscroll=void 0}},{key:"render",value:function(){var t=this.props.columns,e=this.props.size;this.props.bot;if(window.scrollY<e.top)return"";if(window.scrollY>e.top+e.height-50)return"";var n={marginLeft:2-this.state.scrollX,width:3e3};return Object(x.jsx)("div",{children:Object(x.jsx)(st,{style1:n,columns:t})})}}]),n}(r.a.Component),st=function(t){return Object(x.jsx)("div",{className:"absHeader",style:t.style1,children:t.columns.filter((function(t){return!(0==t.visible)})).map((function(t){return Object(x.jsx)("div",{className:"absSubHeader",style:{width:"".concat(t.width)},children:Object(x.jsx)("div",{className:"absSubHeaderInner",children:t.label})},t.id)}))})},ct=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["",function(t){return Object(x.jsx)(T,{data:t.monster})}],["Name",function(t){return ut(t.monster)},{textAlign:"left"}],["Quantity",function(t){return dt(t.quantity)}],["Chance",function(t){return t.type||(t.monster.maxHP?t.chance+"%":"sell")}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){var n=t.length>=2?t[2]:{};return Object(x.jsxs)("th",{style:n,children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(){var t=this,e=this.props.data;if(!e)return"";this.props.filter&&this.props.filter.length>0&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1})));var n=this.getKeys();return e.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(lt,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(h.a)(i)),i.getRowsData=i.getRowsData.bind(Object(h.a)(i)),i.getKeys=i.getKeys.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("table",{style:{width:400},children:[Object(x.jsx)("thead",{style:{display:"none"},children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData()})]})}}]),n}(r.a.Component),lt=function(t){return t.keys.map((function(e,n){var i=e.length>=2?e[2]:{};return Object(x.jsx)("td",{style:i,children:e[1](t.data)},e[0])}))},ut=function(t){var e=t.rootLink+t.id;return Object(x.jsx)("a",{href:e,children:t.name})},dt=function(t){return(null===t||void 0===t?void 0:t.max)==(null===t||void 0===t?void 0:t.min)?null===t||void 0===t?void 0:t.max:t.min+"-"+t.max},ht={text:{marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},table:{paddingTop:10,marginLeft:-10}},pt=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={expanded:!1},i.toggleExpand=i.toggleExpand.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var t,e,n=this.props.data,i=this.props.value,a=[];return null===(t=n.droplists)||void 0===t||null===(e=t.flatMap((function(t){return ft(t)})))||void 0===e||e.filter((function(t){return!!t})).forEach((function(t){return a.push(t)})),a&&a.length?Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsxs)("div",{style:{display:"flex"},onClick:this.toggleExpand,children:[Object(x.jsx)("img",{src:"../image/sort_desc.png"}),Object(x.jsx)("span",{style:ht.text,children:i})]}),Object(x.jsx)("div",{style:ht.table,children:this.state.expanded&&Object(x.jsx)(ct,{data:a})})]}):Object(x.jsx)(r.a.Fragment,{children:Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)("div",{style:{width:19}}),Object(x.jsx)("span",{style:ht.text,children:i})]})})}}]),n}(r.a.Component),ft=function(t){var e,n,i=[];return null===(e=t.droplist)||void 0===e||null===(n=e.links)||void 0===n||n.forEach((function(e){i.push(Object(s.a)({monster:e},t))})),i},vt={root:{position:"relative",padding:"10px",display:"block",width:"100%",height:"100%",alignItems:"center"}},mt=function(t){t.tableManager;var e=t.value,n=(t.onChange,t.isEdit,t.data);t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:vt.root,children:Object(x.jsx)(pt,{data:n,value:e})})},bt=function(t){var e=t.a,n=t.b,i=t.isAscending,r=e||"",a=n||"";return r>a?i?1:-1:r<a?i?-1:1:0},gt=function(t){var e=t.a,n=t.b,i=t.isAscending,r=e||0,a=n||0;return r>a?i?1:-1:r<a?i?-1:1:0},jt=function(t){var e=t.a,n=t.b,i=t.isAscending,r=["ordinary","quest","rare","extraordinary","legendary",""],a=r.indexOf(e),o=r.indexOf(n);return a>o?i?1:-1:a<o?i?-1:1:0},xt=function(){var t=window.location.hash;""!==t&&setTimeout((function(){var e=t.replace("#",""),n=document.getElementById(e);n&&n.scrollIntoView()}),100)},Ot=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRows=function(){var t=this,e=this.props.data;return this.props.filter&&(e=e.filter((function(e){return t.props.filter(e)}))),e},i.isEmptyColumn=function(t){return!!this.rows.find((function(e){return t(e)}))},i.getColumns=function(){var t=1;return[{id:t++,field:"displaytype",label:"",pinned:!0,cellRenderer:_,sort:jt,width:"50px"},{id:t++,field:"name",label:"Name",pinned:!0,cellRenderer:mt,width:"290px"},{id:t++,field:"equipEffect",label:"Atk Cost",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseAttackCost},sort:gt,width:"85px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseAttackCost}))},{id:t++,field:"equipEffect",label:"Dmg",getValue:function(t){var e,n,i=t.value;t.column;return(((null===i||void 0===i||null===(e=i.increaseAttackDamage)||void 0===e?void 0:e.min)||0)+((null===i||void 0===i||null===(n=i.increaseAttackDamage)||void 0===n?void 0:n.max)||0))/2},sort:gt,cellRenderer:at("equipEffect","increaseAttackDamage"),width:"120px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseAttackDamage}))},{id:t++,field:"equipEffect",label:"AC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseAttackChance},sort:gt,width:"50px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseAttackChance}))},{id:t++,field:"equipEffect",label:"BC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseBlockChance},sort:gt,width:"50px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseBlockChance}))},{id:t++,field:"equipEffect",label:"Crit",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseCriticalSkill},sort:gt,width:"60px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseCriticalSkill}))},{id:t++,field:"equipEffect",label:"Crit*",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.setCriticalMultiplier},sort:gt,width:"55px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.setCriticalMultiplier}))},{id:t++,field:"equipEffect",label:"MaxHP",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMaxHP},sort:gt,width:"75px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseMaxHP}))},{id:t++,field:"equipEffect",label:"MaxAP",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMaxAP},sort:gt,width:"75px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseMaxAP}))},{id:t++,field:"equipEffect",label:"MC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMoveCost},sort:gt,width:"80px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseMoveCost}))},{id:t++,field:"equipEffect",label:"UC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseUseItemCost},sort:gt,width:"50px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseUseItemCost}))},{id:t++,field:"equipEffect",label:"EC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseReequipCost},sort:gt,width:"50px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseReequipCost}))},{id:t++,field:"equipEffect",label:"Dmg*%",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.setNonWeaponDamageModifier},sort:gt,width:"75px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.setNonWeaponDamageModifier}))},{id:t++,field:"equipEffect",label:"Res",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseDamageResistance},sort:gt,width:"50px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseDamageResistance}))},{id:t++,field:"conditionsCount",label:"Conditions",sort:gt,width:"140px",cellRenderer:W},{id:t++,field:"baseMarketCost",label:"Price",sort:gt,width:"60px",visible:!0},{id:t++,field:"categoryLink",label:"Category",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.name},width:"180px"},{id:t++,field:"equipEffect",label:"Other",getValue:function(t){var e=t.value;t.column;return e},width:"100px",sort:bt,cellRenderer:it,visible:!1}]},i.state={},i.getColumns=i.getColumns.bind(Object(h.a)(i)),i.getRows=i.getRows.bind(Object(h.a)(i)),i.id="ItemTable"+Math.random(),i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var t=document.getElementById(this.id).offsetTop;this.setState({top:t,height:999999})}},{key:"render",value:function(){D.a.defaultProps.isPaginated=!1,D.a.defaultProps.minColumnResizeWidth=30,D.a.defaultProps.isVirtualScroll=!1,D.a.defaultProps.showSearch=!1,D.a.defaultProps.showColumnVisibilityManager=!1,this.rows=this.getRows();var t=this.getColumns();return Object(x.jsxs)("div",{id:this.id,children:[Object(x.jsx)(ot,{columns:t,size:this.state}),Object(x.jsx)(D.a,{columns:t,rows:this.rows,onLoad:xt},this.props.title)]})}}]),n}(r.a.Component),yt=function(t){var e=t.a,n=t.b,i=t.isAscending,r=e||"",a=n||"";return r>a?i?1:-1:r<a?i?-1:1:0},wt=function(t){var e=t.a,n=t.b,i=t.isAscending,r=e||0,a=n||0;return r>a?i?1:-1:r<a?i?-1:1:0},kt=function(t){var e=t.a,n=t.b,i=t.isAscending,r=["ordinary","quest","rare","extraordinary","legendary",""],a=r.indexOf(e),o=r.indexOf(n);return a>o?i?1:-1:a<o?i?-1:1:0},Ct=function(){var t=window.location.hash;""!==t&&setTimeout((function(){var e=t.replace("#",""),n=document.getElementById(e);n&&n.scrollIntoView()}),100)},Et=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRows=function(){var t=this,e=this.props.data;return this.props.filter&&(e=e.filter((function(e){return t.props.filter(e)}))),e},i.getColumns=function(){var t=1;return[{id:t++,field:"displaytype",label:"",pinned:!0,cellRenderer:_,sort:kt,width:"50px"},{id:t++,field:"name",label:"Name",pinned:!0,cellRenderer:mt,width:"290px"},{id:t++,field:"categoryLink",label:"Category",getValue:function(t){var e=t.value;t.column;return e.name},width:"140px"},{id:t++,field:"useEffect",label:"HP",getValue:function(t){var e,n,i=t.value;t.column;return(((null===i||void 0===i||null===(e=i.increaseCurrentHP)||void 0===e?void 0:e.min)||0)+((null===i||void 0===i||null===(n=i.increaseCurrentHP)||void 0===n?void 0:n.max)||0))/2},sort:wt,width:"130px",cellRenderer:at("useEffect","increaseCurrentHP")},{id:t++,field:"conditionsCount",label:"Conditions",sort:wt,width:"250px",cellRenderer:W},{id:t++,field:"baseMarketCost",label:"Price",getValue:function(t){var e=t.value;t.column;return e?e+" gold":""},sort:wt,width:"100px",visible:!0},{id:t++,field:"equipEffect",label:"Other",getValue:function(t){var e=t.value;t.column;return e},width:"100px",sort:yt,cellRenderer:it,visible:!1}]},i.state={},i.getColumns=i.getColumns.bind(Object(h.a)(i)),i.getRows=i.getRows.bind(Object(h.a)(i)),i.id="PotionTable"+Math.random(),i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var t=document.getElementById(this.id).offsetTop;this.setState({top:t,height:999999})}},{key:"render",value:function(){D.a.defaultProps.isPaginated=!1,D.a.defaultProps.minColumnResizeWidth=30,D.a.defaultProps.isVirtualScroll=!1,D.a.defaultProps.showSearch=!1,D.a.defaultProps.showColumnVisibilityManager=!1,this.rows=this.getRows();var t=this.getColumns();return Object(x.jsxs)("div",{id:this.id,children:[Object(x.jsx)(ot,{columns:t,size:this.state}),Object(x.jsx)(D.a,{columns:t,rows:this.rows,onLoad:Ct})]})}}]),n}(r.a.Component);function Mt(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,r=t+e,a=n.toUpperCase()==r.toUpperCase()?"selected":"";return Object(x.jsx)("li",{className:a,children:Object(x.jsx)(k.b,{to:r.toLowerCase(),children:i.capitalize()})},e)}var Rt=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return this.props.data?Object(x.jsxs)("div",{children:[Object(x.jsxs)("ul",{className:"hr",children:[Mt("/items/","body",this.props.location.pathname,"Armor"),Mt("/items/","weapon",this.props.location.pathname),Mt("/items/","shield",this.props.location.pathname),Mt("/items/","head",this.props.location.pathname,"Helm"),Mt("/items/","hand",this.props.location.pathname,"Glove"),Mt("/items/","feet",this.props.location.pathname,"Boot"),Mt("/items/","leftring",this.props.location.pathname,"ring"),Mt("/items/","neck",this.props.location.pathname,"Necklace"),Mt("/items/","use",this.props.location.pathname,"Usable"),Mt("/items/","other",this.props.location.pathname)]}),Object(x.jsxs)(v.c,{children:[Lt("body",this.props.data),Lt("weapon",this.props.data),Lt("shield",this.props.data),Lt("head",this.props.data),Lt("hand",this.props.data),Lt("feet",this.props.data),Lt("neck",this.props.data),Lt("leftring",this.props.data),Object(x.jsx)(w,{path:"/items/use",component:Et,data:this.props.data,title:"Usable",filter:function(t){return"use"==t.categoryLink.actionType}}),Object(x.jsx)(w,{path:"/items/other",component:Ot,data:this.props.data,title:"Other",filter:function(t){var e;return!(null===(e=t.categoryLink)||void 0===e?void 0:e.actionType)}})]})]}):"Loading..."}}]),n}(r.a.Component),Lt=function(t,e){var n="/items/"+t;return Object(x.jsx)(w,{path:n,component:Ot,data:e,title:t,filter:function(e){return e.categoryLink.inventorySlot==t}})},Pt=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["",function(t){return Object(x.jsx)(T,{data:t})}],["Name",function(t){return At(t)},{textAlign:"left"}],["Type",function(t){return t.type}],["Aim",function(t){return t.aim}],["Chance",function(t){return t.chance?t.chance+"%":""}],["Magnitude",function(t){return t.magnitude?t.magnitude+"x":"clears"}],["Duration",function(t){return t.duration?t.duration+" rounds":""}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){var n=t.length>=2?t[2]:{};return Object(x.jsxs)("th",{style:n,children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(){var t=this,e=this.props.data;if(!e)return"";this.props.filter&&this.props.filter.length>0&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1})));var n=this.getKeys();return e.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(Dt,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(h.a)(i)),i.getRowsData=i.getRowsData.bind(Object(h.a)(i)),i.getKeys=i.getKeys.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("table",{style:{width:700},children:[Object(x.jsx)("thead",{style:{display:"none"},children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData()})]})}}]),n}(r.a.Component),Dt=function(t){return t.keys.map((function(e,n){var i=e.length>=2?e[2]:{};return Object(x.jsx)("td",{style:i,children:e[1](t.data)},e[0])}))},At=function(t){var e=t.rootLink+t.id;return Object(x.jsx)("a",{href:e,children:t.name})},St={text:{marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},table:{paddingTop:10,marginLeft:-10}},It=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={expanded:!1},i.toggleExpand=i.toggleExpand.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var t=this.props.data,e=this.props.value,n=t.links;return n&&n.length?Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsxs)("div",{style:{display:"flex"},onClick:this.toggleExpand,children:[Object(x.jsx)("img",{src:"../image/sort_desc.png"}),Object(x.jsx)("span",{style:St.text,children:e})]}),Object(x.jsx)("div",{style:St.table,children:this.state.expanded&&Object(x.jsx)(Pt,{data:n})})]}):Object(x.jsx)(r.a.Fragment,{children:Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)("div",{style:{width:19}}),Object(x.jsx)("span",{style:St.text,children:e})]})})}}]),n}(r.a.Component),qt={root:{position:"relative",padding:"10px 5px 0px",display:"block",width:"100%",height:"100%",alignItems:"center"}},Tt=function(t){t.tableManager;var e=t.value,n=(t.onChange,t.isEdit,t.data);t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:qt.root,children:Object(x.jsx)(It,{data:n,value:e})})},Ht={root:{position:"relative",padding:"0 20px",display:"flex",width:"100%",alignItems:"center"},img:{width:32,height:32}},Vt=function(t){t.tableManager;var e=t.value;t.onChange,t.isEdit,t.data,t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:Ht.root,children:e&&Object(x.jsx)("img",{style:Ht.img,src:"/image/yes.png"})})},Nt=function(t){var e=t.a,n=t.b,i=t.isAscending,r=e||0,a=n||0;return r>a?i?1:-1:r<a?i?-1:1:0},_t=function(){var t=window.location.hash;""!==t&&setTimeout((function(){var e=t.replace("#",""),n=document.getElementById(e);n&&n.scrollIntoView()}),100)},Bt=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRows=function(){var t=this,e=this.props.data;return this.props.filter&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1}))),e},i.isEmptyColumn=function(t){return!!this.rows.find((function(e){return t(e)}))},i.getColumns=function(){var t=1;return[{id:t++,field:"displaytype",label:"",pinned:!0,cellRenderer:_,width:"50px"},{id:t++,field:"name",label:"Name",pinned:!0,cellRenderer:Tt,width:"300px"},{id:t++,field:"category",label:"Category",width:"120px"},{id:t++,field:"isStacking",label:"Stack",cellRenderer:Vt,sort:Nt,width:"80px"},{id:t++,field:"abilityEffect",label:"HP",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMaxHP},sort:Nt,width:"62px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseMaxHP}))},{id:t++,field:"abilityEffect",label:"AC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseAttackChance},sort:Nt,width:"62px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseAttackChance}))},{id:t++,field:"abilityEffect",label:"Dmg",getValue:function(t){var e,n,i=t.value;t.column;return(((null===i||void 0===i||null===(e=i.increaseAttackDamage)||void 0===e?void 0:e.min)||0)+((null===i||void 0===i||null===(n=i.increaseAttackDamage)||void 0===n?void 0:n.max)||0))/2},cellRenderer:at("abilityEffect","increaseAttackDamage"),width:"78px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseAttackDamage}))},{id:t++,field:"abilityEffect",label:"Crit",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseCriticalSkill},sort:Nt,width:"70px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseCriticalSkill}))},{id:t++,field:"abilityEffect",label:"BC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseBlockChance},sort:Nt,width:"60px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseBlockChance}))},{id:t++,field:"abilityEffect",label:"Resist",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseDamageResistance},sort:Nt,width:"82px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseDamageResistance}))},{id:t++,field:"abilityEffect",label:"AP",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMaxAP},sort:Nt,width:"60px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseMaxAP}))},{id:t++,field:"abilityEffect",label:"Atk cost",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseAttackCost},sort:Nt,width:"100px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseAttackCost}))},{id:t++,field:"abilityEffect",label:"Move cost",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMoveCost},sort:Nt,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseMoveCost}))},{id:t++,field:"abilityEffect",label:"Use cost",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseUseItemCost},sort:Nt,width:"105px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseUseItemCost}))},{id:t++,field:"abilityEffect",label:"Equip cost",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseReequipCost},sort:Nt,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseReequipCost}))},{id:t++,field:"roundEffect",label:"Round HP",getValue:function(t){var e,n,i=t.value;t.column;return(((null===i||void 0===i||null===(e=i.increaseCurrentHP)||void 0===e?void 0:e.min)||0)+((null===i||void 0===i||null===(n=i.increaseCurrentHP)||void 0===n?void 0:n.max)||0))/2},cellRenderer:at("roundEffect","increaseCurrentHP"),sort:Nt,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.roundEffect)||void 0===e?void 0:e.increaseCurrentHP}))},{id:t++,field:"roundEffect",label:"Round AP",getValue:function(t){var e,n,i=t.value;t.column;return(((null===i||void 0===i||null===(e=i.increaseCurrentAP)||void 0===e?void 0:e.min)||0)+((null===i||void 0===i||null===(n=i.increaseCurrentAP)||void 0===n?void 0:n.max)||0))/2},cellRenderer:at("roundEffect","increaseCurrentAP"),sort:Nt,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.roundEffect)||void 0===e?void 0:e.increaseCurrentAP}))},{id:t++,field:"abilityEffect",label:"abilityEffect",getValue:function(t){var e=t.value;t.column;return JSON.stringify(e)},cellRenderer:it,width:"400px",visible:!1},{id:t++,field:"fullRoundEffect",label:"Full Round HP",getValue:function(t){var e,n,i=t.value;t.column;return(((null===i||void 0===i||null===(e=i.increaseCurrentHP)||void 0===e?void 0:e.min)||0)+((null===i||void 0===i||null===(n=i.increaseCurrentHP)||void 0===n?void 0:n.max)||0))/2},cellRenderer:at("fullRoundEffect","increaseCurrentHP"),sort:Nt,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.fullRoundEffect)||void 0===e?void 0:e.increaseCurrentHP}))},{id:t++,field:"roundEffect",label:"roundEffect",getValue:function(t){var e=t.value;t.column;return JSON.stringify(e)},cellRenderer:it,width:"400px",visible:!1}]},i.state={},i.getColumns=i.getColumns.bind(Object(h.a)(i)),i.getRows=i.getRows.bind(Object(h.a)(i)),i.id="CondinionTable"+Math.random(),i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var t=document.getElementById(this.id).clientHeight,e=document.getElementById(this.id).offsetTop;this.setState({top:e,height:t})}},{key:"render",value:function(){D.a.defaultProps.isPaginated=!1,D.a.defaultProps.minColumnResizeWidth=30,D.a.defaultProps.isVirtualScroll=!1,D.a.defaultProps.showSearch=!1,D.a.defaultProps.showColumnVisibilityManager=!1,this.rows=this.getRows();var t=this.getColumns();return Object(x.jsxs)("div",{id:this.id,children:[Object(x.jsx)(ot,{columns:t,size:this.state}),Object(x.jsx)(D.a,{columns:t,rows:this.rows,onLoad:_t},this.props.title)]})}}]),n}(r.a.Component),Kt=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return this.props.data?Object(x.jsxs)("div",{children:["Positive",Object(x.jsx)(Bt,{data:this.props.data.filter((function(t){return t.isPositive}))}),Object(x.jsx)("br",{}),"Negative",Object(x.jsx)(Bt,{data:this.props.data.filter((function(t){return!t.isPositive}))})]}):"Loading..."}}]),n}(r.a.Component),zt={root:{width:1e3},img:{width:32,height:32,marginTop:-5,marginRight:5},link:{color:"white",textTransform:"capitalize",float:"left",display:"flex",margin:10}},Ft=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRowsData=function(t){var e;if(!t)return"";var n=null===t||void 0===t||null===(e=t.flatMap((function(t){return t.maps})))||void 0===e?void 0:e.filter(Ut);return null===n||void 0===n?void 0:n.map((function(e,n){return Object(x.jsxs)(A.a,{to:e.rootLink+e.name+"#"+t[0].key,style:zt.link,children:[Object(x.jsx)("img",{style:zt.img,src:"/image/ui_icon_map.png"}),e.name]},n)}))},i.getRowsData=i.getRowsData.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{style:zt.root,children:this.getRowsData(this.props.data)})}}]),n}(r.a.Component);function Ut(t,e,n){return n.indexOf(t)==e}var Gt=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["",function(t){return Object(x.jsx)(T,{data:t.link})}],["Name",function(t){return Jt(t.link)},{textAlign:"left"}],["Quantity",function(t){return Yt(t.quantity)}],["Chance",function(t){return t.chance+"%"}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){var n=t.length>=2?t[2]:{};return Object(x.jsxs)("th",{style:n,children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(t){var e=this;this.props.filter&&this.props.filter.length>0&&(t=t.filter((function(t){return e.props.filter.indexOf(t.category)>-1})));var n=this.getKeys();return t.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(Wt,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(h.a)(i)),i.getRowsData=i.getRowsData.bind(Object(h.a)(i)),i.getKeys=i.getKeys.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){var t=this.props.data;return(null===t||void 0===t?void 0:t.length)?Object(x.jsxs)("table",{style:{width:400},children:[Object(x.jsx)("thead",{style:{display:"none"},children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData(t)})]}):""}}]),n}(r.a.Component),Wt=function(t){return t.keys.map((function(e,n){var i=e.length>=2?e[2]:{};return Object(x.jsx)("td",{style:i,children:e[1](t.data)},e[0])}))},Jt=function(t){var e=t.rootLink+t.id;return Object(x.jsx)("a",{href:e,children:t.name})},Yt=function(t){return t.max==t.min?t.max:t.min+"-"+t.max},Xt={text:{marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},table:{paddingTop:10,marginLeft:-10}},Qt=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={expanded:!1},i.toggleExpand=i.toggleExpand.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var t,e=this.props.data,n=this.props.value,i=null===(t=e.droplistLink)||void 0===t?void 0:t.items,a=e.spawnGroupLinks;return i||a?Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsxs)("div",{style:{display:"flex"},onClick:this.toggleExpand,children:[Object(x.jsx)("img",{src:"../image/sort_desc.png"}),Object(x.jsx)("span",{style:Xt.text,children:n})]}),Object(x.jsxs)("div",{style:Xt.table,children:[this.state.expanded&&Object(x.jsx)(Gt,{data:i}),this.state.expanded&&Object(x.jsx)(Ft,{data:a})]})]}):Object(x.jsx)(r.a.Fragment,{children:Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)("div",{style:{width:19}}),Object(x.jsx)("span",{style:Xt.text,children:n})]})})}}]),n}(r.a.Component),Zt={root:{position:"relative",padding:"10px",display:"block",width:"100%",height:"100%",alignItems:"center"}},$t=function(t){t.tableManager;var e=t.value,n=(t.onChange,t.isEdit,t.data);t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:Zt.root,children:Object(x.jsx)(Qt,{data:n,value:e})})},te=function(t){var e=t.a,n=t.b,i=t.isAscending,r=e||0,a=n||0;return r>a?i?1:-1:r<a?i?-1:1:0},ee=function(){var t=window.location.hash;""!==t&&setTimeout((function(){var e=t.replace("#",""),n=document.getElementById(e);n&&n.scrollIntoView()}),100)},ne=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRows=function(){var t=this,e=this.props.data;return this.props.filter&&(e=e.filter((function(e){return t.props.filter(e)}))),e},i.maxIconWidth=function(){return this.rows.map((function(t){return I(t.iconID).x})).reduce((function(t,e){return Math.max(t,e)}),32)+10+"px"},i.getColumns=function(){var t=1;return[{id:t++,field:"unique",label:"",pinned:!0,cellRenderer:_,sort:te,width:this.maxIconWidth()},{id:t++,field:"name",label:"Name",pinned:!0,cellRenderer:$t,width:"300px"},{id:t++,field:"maxHP",label:"HP",sort:te,width:"50px"},{id:t++,field:"attackChance",label:"AC",sort:te,width:"50px"},{id:t++,field:"attackDamage",label:"Dmg",getValue:function(t){var e=t.value;t.column;return(((null===e||void 0===e?void 0:e.min)||0)+((null===e||void 0===e?void 0:e.max)||0))/2},sort:te,cellRenderer:at("attackDamage"),width:"120px"},{id:t++,field:"criticalSkill",label:"Crit",sort:te,width:"60px"},{id:t++,field:"criticalMultiplier",label:"Crit*",sort:te,width:"55px"},{id:t++,field:"blockChance",label:"BC",sort:te,width:"50px"},{id:t++,field:"damageResistance",label:"Res",sort:te,width:"50px"},{id:t++,field:"maxAP",label:"AP",sort:te,width:"50px"},{id:t++,field:"attackCost",label:"Atk Cost",sort:te,width:"85px"},{id:t++,field:"moveCost",label:"Move Cost",sort:te,width:"100px"},{id:t++,field:"exp",label:"XP",sort:te,width:"75px"},{id:t++,field:"conditionsCount",label:"Conditions",sort:te,width:"130px",cellRenderer:W}]},i.state={},i.getColumns=i.getColumns.bind(Object(h.a)(i)),i.getRows=i.getRows.bind(Object(h.a)(i)),i.id="MonsterTable"+Math.random(),i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var t=document.getElementById(this.id).offsetTop;this.setState({top:t,height:999999})}},{key:"render",value:function(){D.a.defaultProps.isPaginated=!1,D.a.defaultProps.minColumnResizeWidth=30,D.a.defaultProps.isVirtualScroll=!1,D.a.defaultProps.showSearch=!1,D.a.defaultProps.showColumnVisibilityManager=!1,this.rows=this.getRows();var t=this.getColumns();return Object(x.jsxs)("div",{id:this.id,children:[Object(x.jsx)(ot,{columns:t,size:this.state}),Object(x.jsx)(D.a,{columns:t,rows:this.rows,onLoad:ee},this.props.title)]})}}]),n}(r.a.Component),ie=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return this.props.data?Object(x.jsxs)("div",{children:[Object(x.jsxs)("ul",{className:"hr",children:[Mt("/monsters/","animal",this.props.location.pathname),Mt("/monsters/","insect",this.props.location.pathname),Mt("/monsters/","reptile",this.props.location.pathname),Mt("/monsters/","undead",this.props.location.pathname),Mt("/monsters/","giant",this.props.location.pathname),Mt("/monsters/","ghost",this.props.location.pathname),Mt("/monsters/","construct",this.props.location.pathname),Mt("/monsters/","humanoid",this.props.location.pathname),Mt("/monsters/","demon",this.props.location.pathname),Mt("/monsters/","other",this.props.location.pathname)]}),Object(x.jsxs)(v.c,{children:[re("animal",this.props.data),re("humanoid",this.props.data),re("insect",this.props.data),re("undead",this.props.data),re("giant",this.props.data),re("reptile",this.props.data),re("construct",this.props.data),re("demon",this.props.data),re("ghost",this.props.data),Object(x.jsx)(w,{path:"/monsters/other",component:ne,data:this.props.data,title:"Other",filter:function(t){return"/monsters/other#"==t.rootLink}})]})]}):"Loading..."}}]),n}(r.a.Component),re=function(t,e){var n="/monsters/"+t;return Object(x.jsx)(w,{path:n,component:ne,data:e,title:t,filter:function(e){return!(!e.attackChance&&!e.maxHP)&&e.monsterClass==t}})},ae=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["",function(t){return Object(x.jsx)(T,{data:t.link})},{width:40}],["Name",function(t){return se(t.link)},{textAlign:"left",width:250}],["Quantity",function(t){return ce(t.quantity)},{width:40}],["Price",function(t){return le(t.link,.15)+" gold"},{textAlign:"right"}],["Buy",function(t){return le(t.link,-.15)+" gold"},{textAlign:"right"}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){var n=t.length>=2?t[2]:{};return Object(x.jsxs)("th",{style:n,children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(t){var e=this;this.props.filter&&this.props.filter.length>0&&(t=t.filter((function(t){return e.props.filter.indexOf(t.category)>-1})));var n=this.getKeys();return t.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(oe,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(h.a)(i)),i.getRowsData=i.getRowsData.bind(Object(h.a)(i)),i.getKeys=i.getKeys.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){var t=this.props.data;return t?Object(x.jsxs)("table",{style:{width:500},children:[Object(x.jsx)("thead",{style:{display:"none"},children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData(t)})]}):""}}]),n}(r.a.Component),oe=function(t){return t.keys.map((function(e,n){var i=e.length>=2?e[2]:{};return Object(x.jsx)("td",{style:i,children:e[1](t.data)},e[0])}))},se=function(t){var e=t.rootLink+t.id;return Object(x.jsx)("a",{href:e,children:t.name})},ce=function(t){return t.max==t.min?t.max:t.min+"-"+t.max},le=function(t,e){var n=t.baseMarketCost;return n+Math.trunc(n*e)},ue=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["",function(t){return Object(x.jsx)(T,{data:t.link})},{width:40}],["Name",function(t){return he(t.link)},{textAlign:"left",width:250}],["Quantity",function(t){return pe(t.quantity)}],["By quest",function(t){return"give by quest"}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){var n=t.length>=2?t[2]:{};return Object(x.jsxs)("th",{style:n,children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(t){var e=this;this.props.filter&&this.props.filter.length>0&&(t=t.filter((function(t){return e.props.filter.indexOf(t.category)>-1})));var n=this.getKeys();return t.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(de,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(h.a)(i)),i.getRowsData=i.getRowsData.bind(Object(h.a)(i)),i.getKeys=i.getKeys.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){var t=this.props.data;return t?Object(x.jsxs)("table",{style:{width:500},children:[Object(x.jsx)("thead",{style:{display:"none"},children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData(t)})]}):""}}]),n}(r.a.Component),de=function(t){return t.keys.map((function(e,n){var i=e.length>=2?e[2]:{};return Object(x.jsx)("td",{style:i,children:e[1](t.data)},e[0])}))},he=function(t){var e=t.rootLink+t.id;return Object(x.jsx)("a",{href:e,children:t.name})},pe=function(t){return(null===t||void 0===t?void 0:t.max)==(null===t||void 0===t?void 0:t.min)?null===t||void 0===t?void 0:t.max:t.min+"-"+t.max},fe=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["",function(t){return me(t)},{width:40}],["Name",function(t){return t.name},{textAlign:"left"}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){var n=t.length>=2?t[2]:{};return Object(x.jsxs)("th",{style:n,children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(t){var e=this;this.props.filter&&this.props.filter.length>0&&(t=t.filter((function(t){return e.props.filter.indexOf(t.category)>-1})));var n=this.getKeys();return t.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(ve,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(h.a)(i)),i.getRowsData=i.getRowsData.bind(Object(h.a)(i)),i.getKeys=i.getKeys.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){var t=this.props.data;return t?Object(x.jsxs)("table",{style:{width:500},children:[Object(x.jsx)("thead",{style:{display:"none"},children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData(t)})]}):""}}]),n}(r.a.Component),ve=function(t){return t.keys.map((function(e,n){var i=e.length>=2?e[2]:{};return Object(x.jsx)("td",{style:i,children:e[1](t.data)},e[0])}))},me=function(t){var e=t.rootLink+t.id;return Object(x.jsx)(A.a,{to:e,children:Object(x.jsx)("img",{title:t.id,src:"/image/ui_icon_quest.png"})})},be={text:{marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},table:{paddingTop:10,marginLeft:-10}},ge=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={expanded:!1},i.toggleExpand=i.toggleExpand.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var t,e,n,i,a=this.props.data,o=this.props.value,s=null===(t=a.droplistLink)||void 0===t?void 0:t.items,c=a.questLinks,l=[];return null===(e=a.questItemsLinks)||void 0===e||e.forEach((function(t){return l.push(t)})),null===(n=a.questDropListLinks)||void 0===n||null===(i=n.flatMap((function(t){return t.link.items})))||void 0===i||i.forEach((function(t){return l.push(t)})),s||(null===c||void 0===c?void 0:c.length)||(null===l||void 0===l?void 0:l.length)?Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsxs)("div",{style:{display:"flex"},onClick:this.toggleExpand,children:[Object(x.jsx)("img",{src:"../image/sort_desc.png"}),Object(x.jsx)("span",{style:be.text,children:o})]}),Object(x.jsxs)("div",{style:be.table,children:[this.state.expanded&&Object(x.jsx)(ae,{data:s}),this.state.expanded&&Object(x.jsx)(ue,{data:l}),this.state.expanded&&Object(x.jsx)(fe,{data:c})]})]}):Object(x.jsx)(r.a.Fragment,{children:Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)("div",{style:{width:19}}),Object(x.jsx)("span",{style:be.text,children:o})]})})}}]),n}(r.a.Component),je={root:{position:"relative",padding:"10px",display:"block",width:"100%",height:"100%",alignItems:"center"}},xe=function(t){t.tableManager;var e=t.value,n=(t.onChange,t.isEdit,t.data);t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:je.root,children:Object(x.jsx)(ge,{data:n,value:e})})};function Oe(t,e,n){return n.indexOf(t)==e}var ye=function(t){var e;if(!t)return"";var n=null===t||void 0===t||null===(e=t.flatMap((function(t){return t.maps})))||void 0===e?void 0:e.filter(Oe);return null===n||void 0===n?void 0:n.map((function(e,n){var i=e.rootLink+e.name+"#"+t[0].key;return Object(x.jsx)(A.a,{to:i,className:"nps-location-cell",children:e.name},n)}))},we=function(t){t.tableManager,t.value,t.onChange,t.isEdit;var e=t.data;t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{children:ye(e.spawnGroupLinks)})},ke=function(t){var e,n,i,r,a=t.a,o=t.b,s=t.isAscending,c=(null===(e=a[0])||void 0===e?void 0:e.maps)&&(null===(n=a[0].maps[0])||void 0===n?void 0:n.name)||"",l=(null===(i=o[0])||void 0===i?void 0:i.maps)&&(null===(r=o[0].maps[0])||void 0===r?void 0:r.name)||"";return c>l?s?1:-1:c<l?s?-1:1:0},Ce=function(t){var e=t.a,n=t.b,i=t.isAscending,r=e||0,a=n||0;return r>a?i?1:-1:r<a?i?-1:1:0},Ee=function(){var t=window.location.hash;""!==t&&setTimeout((function(){var e=t.replace("#",""),n=document.getElementById(e);n&&n.scrollIntoView()}),100)},Me=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRows=function(){var t=this,e=this.props.data;return this.props.filter&&(e=e.filter((function(e){return t.props.filter(e)}))),e},i.maxIconWidth=function(){return this.rows.map((function(t){return I(t.iconID).x})).reduce((function(t,e){return Math.max(t,e)}),32)+10+"px"},i.getColumns=function(){var t=1;return[{id:t++,field:"unique",label:"",pinned:!0,cellRenderer:_,sort:Ce,width:this.maxIconWidth()},{id:t++,field:"name",label:"Name",pinned:!0,cellRenderer:xe,width:"300px"},{id:t++,field:"spawnGroupLinks",label:"Locations",sort:ke,cellRenderer:we,width:"300px"},{id:t++,field:"questLinks",label:"questLinks",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.length},width:"300px"}]},i.state={},i.getColumns=i.getColumns.bind(Object(h.a)(i)),i.getRows=i.getRows.bind(Object(h.a)(i)),i.id="NpcTable"+Math.random(),i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var t=document.getElementById(this.id).offsetTop;this.setState({top:t,height:999999})}},{key:"render",value:function(){D.a.defaultProps.isPaginated=!1,D.a.defaultProps.minColumnResizeWidth=30,D.a.defaultProps.isVirtualScroll=!1,D.a.defaultProps.showSearch=!1,D.a.defaultProps.showColumnVisibilityManager=!1,this.rows=this.getRows();var t=this.getColumns();return Object(x.jsxs)("div",{id:this.id,children:[Object(x.jsx)(ot,{columns:t,size:this.state}),Object(x.jsx)(D.a,{columns:t,rows:this.rows,onLoad:Ee})]})}}]),n}(r.a.Component),Re=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return this.props.data?Object(x.jsxs)("div",{children:[Object(x.jsxs)("ul",{className:"hr",children:[Mt("/npc/","merchant",this.props.location.pathname),Mt("/npc/","A-G",this.props.location.pathname),Mt("/npc/","H-R",this.props.location.pathname),Mt("/npc/","S-Z",this.props.location.pathname)]}),Object(x.jsxs)(v.c,{children:[Object(x.jsx)(w,{path:"/npc/a-g",component:Me,data:this.props.data,title:"NPC",filter:function(t){return"/npc/a-g#"==t.rootLink}}),Object(x.jsx)(w,{path:"/npc/h-r",component:Me,data:this.props.data,title:"NPC",filter:function(t){return"/npc/h-r#"==t.rootLink}}),Object(x.jsx)(w,{path:"/npc/s-z",component:Me,data:this.props.data,title:"NPC",filter:function(t){return"/npc/s-z#"==t.rootLink}}),Object(x.jsx)(w,{path:"/npc/merchant",component:Me,data:this.props.data,title:"Merchant",filter:function(t){return"/npc/merchant#"==t.rootLink}})]})]}):"Loading..."}}]),n}(r.a.Component),Le=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["",function(t){return Object(x.jsx)(T,{data:t})}],["Name",function(t){return De(t)},{textAlign:"left"}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){var n=t.length>=2?t[2]:{};return Object(x.jsxs)("th",{style:n,children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(){var t=this,e=this.props.data;if(!e)return"";this.props.filter&&this.props.filter.length>0&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1})));var n=this.getKeys();return e.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(Pe,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(h.a)(i)),i.getRowsData=i.getRowsData.bind(Object(h.a)(i)),i.getKeys=i.getKeys.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("table",{style:{width:400},children:[Object(x.jsx)("thead",{style:{display:"none"},children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData()})]})}}]),n}(r.a.Component),Pe=function(t){return t.keys.map((function(e,n){var i=e.length>=2?e[2]:{};return Object(x.jsx)("td",{style:i,children:e[1](t.data)},e[0])}))},De=function(t){var e=t.rootLink+t.id;return Object(x.jsx)("a",{href:e,children:t.name})},Ae={root:{marginLeft:50,width:1e3,textAlign:"left"}},Se=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRowsData=function(){var t=this.props.data;return t?t.sort((function(t,e){return t.progress-e.progress})).map((function(t,e){var n=t.finishesQuest?"end":t.rewardExperience?"exp":void 0;return Object(x.jsxs)("li",{className:n,children:[t.logText,!!t.rewardExperience&&Object(x.jsxs)("b",{children:[" (",t.rewardExperience,"XP)"]}),!!t.finishesQuest&&Object(x.jsx)("b",{children:"[End of quest]"})]},e)})):""},i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("ul",{style:Ae.root,children:this.getRowsData()})}}]),n}(r.a.Component),Ie={text:{marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},table:{paddingTop:10,marginLeft:-10}},qe=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={expanded:!1},i.toggleExpand=i.toggleExpand.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var t=this.props.data,e=this.props.value,n=t.stages,i=t.links;return i||n?Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsxs)("div",{style:{display:"flex"},onClick:this.toggleExpand,children:[Object(x.jsx)("img",{src:"../image/sort_desc.png"}),Object(x.jsx)("span",{style:Ie.text,children:e})]}),Object(x.jsxs)("div",{style:Ie.table,children:[this.state.expanded&&Object(x.jsx)(Se,{data:n}),this.state.expanded&&Object(x.jsx)(Le,{data:i})]})]}):Object(x.jsx)(r.a.Fragment,{children:Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)("div",{style:{width:19}}),Object(x.jsx)("span",{style:Ie.text,children:e})]})})}}]),n}(r.a.Component),Te={root:{position:"relative",padding:"10px",display:"block",width:"100%",height:"100%",alignItems:"center"}},He=function(t){t.tableManager;var e=t.value,n=(t.onChange,t.isEdit,t.data);t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:Te.root,children:Object(x.jsx)(qe,{data:n,value:e})})},Ve=function(t){var e=t.a,n=t.b,i=t.isAscending,r=e||"",a=n||"";return r>a?i?1:-1:r<a?i?-1:1:0},Ne=function(t){var e=t.a,n=t.b,i=t.isAscending,r=["ordinary","quest","rare","extraordinary","legendary",""],a=r.indexOf(e),o=r.indexOf(n);return a>o?i?1:-1:a<o?i?-1:1:0},_e=function(){var t=window.location.hash;""!==t&&setTimeout((function(){var e=t.replace("#",""),n=document.getElementById(e);n&&n.scrollIntoView()}),100)},Be=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRows=function(){var t=this,e=this.props.data;return this.props.filter&&(e=e.filter((function(e){return t.props.filter(e)}))),e},i.getColumns=function(){var t=1;return[{id:t++,field:"id",label:"",pinned:!0,cellRenderer:Ke,sort:Ne,width:"50px"},{id:t++,field:"name",label:"Name",pinned:!0,cellRenderer:He,width:"300px"},{id:t++,field:"stages",label:"Text",width:"800px",getValue:function(t){var e,n=t.value;t.column;return null===(e=n[0])||void 0===e?void 0:e.logText},cellRenderer:ze,sort:Ve}]},i.state={},i.getColumns=i.getColumns.bind(Object(h.a)(i)),i.getRows=i.getRows.bind(Object(h.a)(i)),i.id="PotionTable"+Math.random(),i}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var t=document.getElementById(this.id).offsetTop;this.setState({top:t,height:999999})}},{key:"render",value:function(){D.a.defaultProps.isPaginated=!1,D.a.defaultProps.minColumnResizeWidth=30,D.a.defaultProps.isVirtualScroll=!1,D.a.defaultProps.showSearch=!1,D.a.defaultProps.showColumnVisibilityManager=!1,this.rows=this.getRows();var t=this.getColumns();return Object(x.jsxs)("div",{id:this.id,children:[Object(x.jsx)(ot,{columns:t,size:this.state}),Object(x.jsx)(D.a,{columns:t,rows:this.rows,onLoad:_e})]})}}]),n}(r.a.Component),Ke=function(t){t.tableManager;var e=t.value,n=(t.onChange,t.isEdit,t.data),i=(t.column,t.rowIndex,t.searchText,t.isFirstEditableCell,n.rootLink+n.id);return Object(x.jsxs)(A.a,{to:i,children:[Object(x.jsx)("div",{id:e,className:"TableAncor"}),Object(x.jsx)("img",{style:{paddingLeft:1,paddingTop:5},src:"/image/ui_icon_quest.png"})]})},ze=function(t){t.tableManager;var e=t.value;t.onChange,t.isEdit,t.data,t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("p",{style:{textAlign:"left",marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e})},Fe=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return this.props.data?Object(x.jsx)("div",{children:Object(x.jsx)(Be,{data:this.props.data,title:"Usable",filter:function(t){return t.showInLog&&"base_nondisplay"!=t.id}})}):"Loading..."}}]),n}(r.a.Component),Ue=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){var t=this.props,e=t.data,n=t.zoom,i=e.tileset;if(!i)return Object(x.jsx)("div",{style:{position:"absolute",top:this.props.y,left:this.props.x,width:32,height:32,backgroundColor:"red",opacity:.5}});var r=i.name,a=e.localid,o=Ge(r),s=i.tilewidth*n/32,c=i.tileheight*n/32,l=We(a,i,s,c,n),u={margin:"".concat(l.y,"px 0 0 ").concat(l.x,"px"),width:"".concat(l.w,"px"),display:"block"};return Object(x.jsx)("div",{style:{width:"".concat(s,"px"),height:"".concat(c,"px"),overflow:"hidden",position:"absolute",left:this.props.x,top:this.props.y},children:Object(x.jsx)("img",{src:o,style:u})})}}]),n}(r.a.Component),Ge=function(t){if(t)return"/drawable/"+t+".png"},We=function(t,e,n,i,r){var a=e.width*r/32,o=e.width/e.tilewidth,s=-t%o*n;return{x:s,y:(-t*i-s)/o,w:a}},Je=function(t,e){return t=t.spawngroup||t.name||"",e=e.spawngroup||e.name||"",t.localeCompare(e)},Ye=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).drawLayerByName=function(t,e,n){var i=t.field;if(!i)return"";var r=t.layerList.filter((function(t,e){return t.name==n}));return i.map((function(t,n){return Object(x.jsx)(Xe,{data:t,layers:r,y:n,zoom:e},n)}))},i.renderSpawn=function(t,e){var n=this;if(!t)return"";var i=0;return t.sort(Je).map((function(t){var r,a=t.link;if(!a)return"";var o="mapspawn",s=null===(r=n.props.location)||void 0===r?void 0:r.hash;s!="#"+t.name&&s!="#"+t.spawngroup||(o+=" active");for(var c=(t.quantity||1)-0,l=[],u=0;u<c;u++){i++;var d={left:t.x+Ze(t.width-32),top:t.y+Ze(t.height-32)},h=a.monsters[i%a.monsters.length],p=h.id+"_"+i;l.push(Object(x.jsx)("div",{style:d,className:o,title:h.name,children:Object(x.jsx)(T,{data:h,zoom:e,noBackground:"true"})},p))}return l}))},i.renderScript=function(t,e){var n=this;return t?t.map((function(t){var e,i="script";(null===(e=n.props.location)||void 0===e?void 0:e.hash)=="#"+t.name&&(i+=" active");var r=[],a={left:t.x,top:t.y,width:t.width,height:t.height},o=t.name;return r.push(Object(x.jsx)("div",{style:a,className:i,title:t.name},o)),r})):""},i.renderMapchange=function(t,e){var n=this;return t?t.map((function(t,e){var i,r={marginLeft:t.x,marginTop:t.y,width:t.width,height:t.height},a="mapchange";(null===(i=n.props.location)||void 0===i?void 0:i.hash)=="#"+t.name&&(a+=" active");var o="/map/"+t.map+"#"+t.place;return Object(x.jsx)(A.a,{style:r,title:t.map,to:o,className:a},e)})):""},i.renderSign=function(t,e){return t?t.map((function(t,e){var n={marginLeft:t.x,marginTop:t.y,width:t.width,height:t.height};return Object(x.jsx)("div",{style:n,title:t.message,className:"sign"},e)})):""},i.renderObjectgroups=function(t,e){return Object(x.jsxs)("div",{className:"objectgroups",children:[this.renderScript(null===t||void 0===t?void 0:t.scripts),this.renderScript(null===t||void 0===t?void 0:t.containers),this.renderSpawn(null===t||void 0===t?void 0:t.spawn),this.renderMapchange(null===t||void 0===t?void 0:t.mapchange),this.renderSign(null===t||void 0===t?void 0:t.signs)]})},i}return Object(d.a)(n,[{key:"render",value:function(){var t=this.props.data,e=this.props.renderObjectgroupsData,n=this.props.zoom||32;if(!t)return"Wrong URL!";e&&m(this.props.data);var i=n*t.width,r=n*t.height;return Object(x.jsxs)("div",{style:{backgroundColor:"white",width:i,height:r,position:"relative",margin:"auto"},children:[this.drawLayerByName(t,n,"ground"),this.drawLayerByName(t,n,"objects"),this.drawLayerByName(t,n,"above"),this.drawLayerByName(t,n,"top"),e&&Object(x.jsx)("div",{style:{position:"absolute"},children:this.renderObjectgroups(t.objectgroups,n)})]})}}]),n}(r.a.Component),Xe=function(t){var e=t.data,n=t.layers,i=t.y,r=t.zoom;return e.map((function(t,e){return Object(x.jsx)(Qe,{data:t,layers:n,x:e*r,y:i*r,zoom:r},e)}))},Qe=function(t){var e=t.data,n=t.layers,i=t.x,r=t.y,a=t.zoom;return n.filter((function(t){return t.visible})).filter((function(t){return!t.name.startsWith("walkable")})).map((function(t){return e[t.name]})).filter((function(t){return t})).map((function(t,e){return Object(x.jsx)(Ue,{data:t,x:i,y:r,zoom:a},e)}))};function Ze(t){return Math.floor(Math.random()*(t+1))}var $e=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRowsData=function(t,e){var n=t.maps;return n?n.map((function(n,i){var r={position:"absolute",backgroundColor:"green",left:(n.x-t.x)*e,top:(n.y-t.y)*e,width:n.link.width*e,height:n.link.height*e},a={width:n.link.width*e,height:n.link.height*e},o="/map/"+n.id,s="/backgrounds/"+n.id+".jpg";return Object(x.jsx)(k.b,{style:r,title:n.id,to:o,children:Object(x.jsx)("img",{style:a,src:s})},i)})):""},i}return Object(d.a)(n,[{key:"render",value:function(){var t=this.props,e=t.globalMap,n=t.location.pathname.substring("/map/g/".length);n||(n="world1");var i=e.segmentsMap[n];if(!i)return"Wrong URL!";m(i);var r=i.maps.length>100?2:i.maps.length>18?6:i.maps.length>3?8:10,a={position:"relative",height:i.height*r};return Object(x.jsx)("div",{style:a,children:this.getRowsData(i,r)})}}]),n}(r.a.Component),tn=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getSegmentLinks=function(t,e){var n=t.segments;return n?n.map((function(t,n){return Mt("/map/g/",t.id,e,t.id+" ("+t.maps.length+")")})):""},i}return Object(d.a)(n,[{key:"render",value:function(){var t=this.props,e=t.data,n=t.globalMap,i=t.location,r=i.pathname.substring("/map/".length);return e?Object(x.jsxs)("div",{children:[Object(x.jsxs)("ul",{className:"hr",children:[Object(x.jsx)("img",{src:"/image/sort_desc.png",style:{float:"left",marginTop:-10},onClick:this.props.toggleExpand}),this.props.expanded&&this.getSegmentLinks(n,i.pathname)]}),Object(x.jsxs)(v.c,{children:[!r&&Object(x.jsx)($e,{data:e,globalMap:n}),Object(x.jsx)(w,{path:"/map/g",component:$e,data:e,globalMap:n}),Object(x.jsx)(Ye,{data:e[r],renderObjectgroupsData:"true"})]})]}):"Loading..."}}]),n}(r.a.Component),en=function(t,e){if(!t)return 0;var n=t.increaseBlockChance,i=t.increaseAttackChance,r=t.increaseAttackCost,a=t.increaseDamageResistance,o=t.increaseAttackDamage,s=t.increaseCriticalSkill,c=t.setCriticalMultiplier,l=t.increaseMaxHP,u=t.increaseMaxAP,d=t.increaseMoveCost,h=t.increaseUseItemCost,p=t.increaseReequipCost;return[3*Math.pow(Math.max(0,n),2.5)+28*n,.4*Math.pow(Math.max(0,i),2.5)-6*Math.pow(Math.abs(Math.min(0,i)),2.7),e?.2*Math.pow(10/r,8)-25*r:-3125*r,1325*a,e?10*Math.pow(Math.max(0,null===o||void 0===o?void 0:o.min),2.5):10*Math.pow(Math.max(0,null===o||void 0===o?void 0:o.min),3)+80*(null===o||void 0===o?void 0:o.min),e?2*Math.pow(Math.max(0,null===o||void 0===o?void 0:o.max),2.1):2*Math.pow(Math.max(0,null===o||void 0===o?void 0:o.max),3)+20*(null===o||void 0===o?void 0:o.max),2.2*Math.pow(s,3),50*Math.pow(Math.max(0,c),2),30*Math.pow(Math.max(0,l),1.2)+70*l,50*Math.pow(Math.max(0,u),3)+750*u,510*Math.pow(Math.max(0,-d),2.5)-350*d,915*Math.pow(Math.max(0,-h),3)-430*h,450*Math.pow(Math.max(0,-p),2)-250*p].reduce((function(t,e){return Math.trunc(t||0)+Math.trunc(e||0)}),0)},nn=function(t){if(!t)return 0;var e=an(t.increaseCurrentHP);if(0==e)return 0;var n=.1*rn(e)*Math.pow(Math.abs(e),2)+3*e;return Math.trunc(n)},rn=function(t){return t>0?1:t<0?-1:0},an=function(t){return(((null===t||void 0===t?void 0:t.max)||0)+((null===t||void 0===t?void 0:t.min)||0))/2},on=function(t,e,n){if(!t)return 0;var i=an(t.increaseCurrentHP),r=an(t.increaseCurrentAP);if(0==i&&0==r)return 0;var a=e*Math.pow(Math.max(0,i),2.5)+450*i,o=n*Math.pow(Math.max(0,r),2.5)+300*r;return Math.trunc(a)+Math.trunc(o)},sn=function(t){return on(t,2770,3100)},cn=function(t){return on(t,923,1033)},ln=function(t,e){if(t.hasManualPrice)return t.baseMarketCost;var n=en(t.equipEffect,e),i=nn(t.useEffect),r=sn(t.hitEffect),a=cn(t.killEffect);return Math.max(1,n+i+r+a)};function un(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t/100}var dn=function(t){var e,n=t.attackCost,i=t.attackChance,r=t.attackDamage,a=t.criticalSkill,o=t.criticalMultiplier,s=t.blockChance,c=t.damageResistance,l=t.hitEffect,u=t.maxHP,d=t.maxAP,h=r?(r.min+r.max)/2:0,p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1?arguments[1]:void 0;return Math.floor(t/e)}(d,n)*un(i)*h*(1+un(a)*(o||0)),f=u*(1+un(s))+9*(c||0),v=0;return(null===l||void 0===l||null===(e=l.conditionsTarget)||void 0===e?void 0:e.length)&&(v+=50),Math.ceil(.7*(3*p+f))+v},hn=function(t){Object(p.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getJsonResources=function(t){var e={progress:0};i.getJsonResource(t.loadresource_itemcategories,"itemcategories",e),i.getJsonResource(t.loadresource_items,"items",e),i.getJsonResource(t.loadresource_actorconditions,"actorconditions",e),i.getJsonResource(t.loadresource_monsters,"monsters",e),i.getJsonResource(t.loadresource_droplists,"droplists",e),i.getJsonResource(t.loadresource_conversationlists,"conversations",e),i.getJsonResource(t.loadresource_quests,"quests",e)},i.getJsonResource=function(t,e,n){var r=Object(h.a)(i);n.progress+=t.length,t.forEach((function(t){r.getJsonData(t.replace("@","/"),e,r,n)}))},i.countConditions=function(t,e,n){var i,r,a,o=(null===t||void 0===t||null===(i=t.addedConditions)||void 0===i?void 0:i.length)||0;return o+=(null===t||void 0===t||null===(r=t.conditionsTarget)||void 0===r?void 0:r.length)||0,o+=(null===t||void 0===t||null===(a=t.conditionsSource)||void 0===a?void 0:a.length)||0,o+=(null===t||void 0===t?void 0:t.increaseCurrentAP)?1:0,o+=(null===t||void 0===t?void 0:t.increaseCurrentHP)?.9:0},i.linkConditions=function(t,e,n){var r,a,o;null===t||void 0===t||null===(r=t.addedConditions)||void 0===r||r.forEach((function(t){return i.linkCondition(t,e,n,"On source")})),null===t||void 0===t||null===(a=t.conditionsTarget)||void 0===a||a.forEach((function(t){return i.linkCondition(t,e,n,"On target")})),null===t||void 0===t||null===(o=t.conditionsSource)||void 0===o||o.forEach((function(t){return i.linkCondition(t,e,n,"On source")}))},i.getStub=function(t,e,n,i){var r=t.id,a=t.name,o=t.category,s=t.iconID,c=t.displaytype,l=t.rootLink;return{id:r,name:a,category:o,iconID:s,displaytype:c,chance:e.chance,duration:e.duration,magnitude:e.magnitude,type:n,aim:i,rootLink:l}},i.linkCondition=function(t,e,n,r){t.link=i.temp.maps.conditions[t.condition],t.link.links=t.link.links||[];var a=i.getStub(e,t,n,r);t.link.links.push(a)},i.getItemRootLink=function(t){return"use"==t.actionType?"/items/use#":"equip"==t.actionType?"/items/"+t.inventorySlot+"#":"/items/other#"},i.isMerchant=function(t){var e,n;return!!(null===(e=t.droplistLink)||void 0===e||null===(n=e.items)||void 0===n?void 0:n.length)&&(t.droplistLink.items.length>1||"gold"!=t.droplistLink.items[0].itemID)},i.getMonsterRootLink=function(t){var e=t.monsterClass||"other";return t.attackChance||t.maxHP?"/monsters/"+e+"#":i.isMerchant(t)?"/npc/merchant#":t.name.charAt(0).toUpperCase()<="G"?"/npc/a-g#":t.name.charAt(0).toUpperCase()<="R"?"/npc/h-r#":"/npc/s-z#"},i.getItemIconBg=function(t){switch(t.displaytype){case"legendary":return-4;case"extraordinary":return-2;case"rare":return-3;case"quest":return-1;default:return 1}},i.linkConversation=function(t){var e,n,r,a=t.conversationLink;if(a){var o={};i.linkConversationInner(a,o),o=Object.values(o),t.rewards=o.filter((function(t){var e;return null===(e=t.rewards)||void 0===e?void 0:e.length})),t.requires=o.flatMap((function(t){return t.replies})).filter((function(t){var e;return null===t||void 0===t||null===(e=t.requires)||void 0===e?void 0:e.length})),t.questLinks=t.rewards.flatMap((function(t){return t.rewards})).map((function(t){return t.link})).filter((function(t){return t})).filter(pn).filter((function(t){return!!t.showInLog})),t.questItemsLinks=t.rewards.flatMap((function(t){return t.rewards})).filter((function(t){return["inventoryKeep","inventoryRemove","wear","usedItem","wearRemove","giveItem"].indexOf(t.rewardType)>=0})),t.questDropListLinks=t.rewards.flatMap((function(t){return t.rewards})).filter((function(t){return["dropList"].indexOf(t.rewardType)>=0})),null===(e=t.questLinks)||void 0===e||e.forEach((function(e){e.links=e.links||[],e.links.push(t)})),null===(n=t.questItemsLinks)||void 0===n||n.forEach((function(e){var n=e.link;n.droplists=n.droplists||[];var i={droplist:{links:[t]},type:"quest"};n.droplists.push(i)})),null===(r=t.questDropListLinks)||void 0===r||r.forEach((function(e){var n=e.link;n.links=n.links||[],n.links.push(t),n.type="quest"}))}},i.getJsonData=function(t,e,n,i){fetch(t+".json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){return t.json()})).then((function(t){n.temp[e]=n.temp[e]||[],n.temp[e]=n.temp[e].concat(t),i.progress--,0==i.progress&&(n.linkTemp(),n.setState(n.temp))}))},i.state={expandedSubMenu:!1},i.temp={},i.toggleExpandSubMenu=i.toggleExpandSubMenu.bind(Object(h.a)(i)),i}return Object(d.a)(n,[{key:"toggleExpandSubMenu",value:function(){this.setState({expandedSubMenu:!this.state.expandedSubMenu})}},{key:"linkConversationInner",value:function(t,e){var n,i=this;t&&(e[t.id]||(e[t.id]=t,null===(n=t.replies)||void 0===n||n.forEach((function(t){i.linkConversationInner(t.next,e)}))))}},{key:"linkTemp",value:function(){var t=this;this.temp.scripts=[],this.temp.containers=[],this.temp.maps={},this.temp.maps.conditions=this.temp.actorconditions.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.categories=this.temp.itemcategories.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.droplists=this.temp.droplists.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.items=this.temp.items.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.monsters=this.temp.monsters.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.conversations=this.temp.conversations.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.quests=this.temp.quests.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.spawngroups={},this.temp.maps.containers={},this.temp.maps.scripts={},Object.values(this.props.maps).forEach((function(e){var n,i,r,a,o,s,c,l;e.rootLink="/map/",null===(n=e.objectgroups)||void 0===n||null===(i=n.spawn)||void 0===i||i.forEach((function(n){var i=(n.spawngroup||n.name).toLowerCase();n.link=t.temp.maps.spawngroups[i]||{maps:[],monsters:[]},n.link.key=i,n.link.maps.push(e),t.temp.maps.spawngroups[i]=n.link})),null===(r=e.objectgroups)||void 0===r||null===(a=r.signs)||void 0===a||a.forEach((function(e){var n;e.message=null===(n=t.temp.maps.conversations[e.name])||void 0===n?void 0:n.message})),null===(o=e.objectgroups)||void 0===o||null===(s=o.scripts)||void 0===s||s.forEach((function(n){n.rootLink="/map/"+e.name+"#",t.temp.scripts.push(n)})),null===(c=e.objectgroups)||void 0===c||null===(l=c.containers)||void 0===l||l.forEach((function(n){n.rootLink="/map/"+e.name+"#",t.temp.containers.push(n)}))})),this.temp.conversations.forEach((function(e){var n,i,r=function(n){var i=n.requireType||n.rewardType,r=n.requireID||n.rewardID;if(["questProgress","questLatestProgress","removeQuestProgress"].indexOf(i)>=0){if(n.link=t.temp.maps.quests[r],!n.link)return void m(n);n.link.conv_links=n.link.conv_links||[],n.link.conv_links.push(e)}else if(["inventoryKeep","inventoryRemove","wear","usedItem","wearRemove","giveItem"].indexOf(i)>=0){if(n.link=t.temp.maps.items[r],!n.link)return void m(n);n.link.conv_links=n.link.conv_links||[],n.link.conv_links.push(e)}else"dropList"==i?(n.link=t.temp.maps.droplists[r],n.link.conv_links=n.link.conv_links||[],n.link.conv_links.push(e)):"killedMonster"==i?(n.link=t.temp.maps.monsters[r],n.link.conv_links=n.link.conv_links||[],n.link.conv_links.push(e)):["removeSpawnArea","spawnAll","deactivateSpawnArea","skillIncrease","dropList","actorCondition","hasActorCondition","factionScore","factionScoreEquals","alignmentChange","alignmentSet","random","timerElapsed","createTimer","changeMapFilter","deactivateMapObjectGroup","activateMapObjectGroup"].indexOf(i)>=0||m(i+" "+r,!0)};null===(n=e.replies)||void 0===n||n.forEach((function(e){var n;e.next=t.temp.maps.conversations[e.nextPhraseID],null===(n=e.requires)||void 0===n||n.forEach(r)})),null===(i=e.rewards)||void 0===i||i.forEach(r)})),this.temp.scripts.forEach((function(e){e.iconID="items_books:8",e.id=e.name,e.conversationLink=t.temp.maps.conversations[e.name],t.linkConversation(e)})),this.temp.containers.forEach((function(e){e.iconID="items_g03_package_omi1:0",e.id=e.name,e.droplistLink=t.temp.maps.droplists[e.name],e.droplistLink&&(e.droplistLink.links=e.droplistLink.links||[],e.droplistLink.links.push(e),e.droplistLink.type="container")})),this.temp.items.forEach((function(e,n){var i;t.temp.maps.items[e.id]!=e?(console.warn("More than one item with id '"+e.id+"'"),console.warn(e),t.temp.items.splice(n,1,!1)):(e.displaytype=e.displaytype||"ordinary",e.iconBg=t.getItemIconBg(e),e.categoryLink=t.temp.maps.categories[e.category],e.rootLink=t.getItemRootLink(e.categoryLink),e.baseMarketCost=ln(e,"weapon"==e.categoryLink.inventorySlot),e.conditionsCount=t.countConditions(e.equipEffect)+t.countConditions(e.hitEffect)+t.countConditions(e.hitReceivedEffect)+t.countConditions(e.killEffect)+t.countConditions(e.useEffect),t.linkConditions(e.equipEffect,e,"equipEffect"),t.linkConditions(e.hitEffect,e,"hitEffect"),t.linkConditions(e.hitReceivedEffect,e,"hitReceivedEffect"),t.linkConditions(e.killEffect,e,"killEffect"),t.linkConditions(e.useEffect,e,"useEffect"),e.conv_links=null===(i=e.conv_links)||void 0===i?void 0:i.filter(pn))})),this.temp.items=this.temp.items.filter((function(t){return t})),this.temp.monsters.forEach((function(e,n){if(t.temp.maps.monsters[e.id]!=e)b((function(){console.warn("More than one monster with id '"+e.id+"'"),console.warn(e)})),t.temp.monsters.splice(n,1,!1);else{var i;e.iconBg=e.unique?-0:1,e.exp=dn(e),e.droplistLink=t.temp.maps.droplists[e.droplistID],e.droplistLink&&(e.droplistLink.links=e.droplistLink.links||[],e.droplistLink.links.push(e)),e.rootLink=t.getMonsterRootLink(e),e.conditionsCount=t.countConditions(e.hitEffect)+t.countConditions(e.hitReceivedEffect)+t.countConditions(e.killEffect),t.linkConditions(e.hitEffect,e,"hitEffect"),t.linkConditions(e.hitReceivedEffect,e,"hitReceivedEffect"),t.linkConditions(e.killEffect,e,"killEffect"),e.spawnGroupLinks=[];var r,a=t.temp.maps.spawngroups[e.id.toLowerCase()];if(a&&(a.monsters.push(e),e.spawnGroupLinks.push(a)),e.spawnGroup&&(null===(i=e.spawnGroup)||void 0===i?void 0:i.toLowerCase())!=e.id.toLowerCase())(a=t.temp.maps.spawngroups[null===(r=e.spawnGroup)||void 0===r?void 0:r.toLowerCase()])&&(a.monsters.push(e),e.spawnGroupLinks.push(a));b((function(){0==e.spawnGroupLinks.length&&(console.warn("Monster have no spawn"),console.warn(e))})),e.conversationLink=t.temp.maps.conversations[e.phraseID],t.linkConversation(e)}})),this.temp.monsters=this.temp.monsters.filter((function(t){return t})),this.temp.droplists.forEach((function(e){e.items.forEach((function(n){n.droplist=e,n.link=t.temp.maps.items[n.itemID],n.link.droplists=n.link.droplists||[],n.link.droplists.push(n),n.type=e.type}))})),this.temp.actorconditions.forEach((function(t){t.iconBg=1,t.rootLink="/conditions#"})),this.temp.quests.forEach((function(t){t.rootLink="/quests#"})),this.props.globalMap.segments.forEach((function(e){e.rootLink="/map/g/",e.maxY=-9999,e.minY=9999,e.maps.forEach((function(n){n.link=t.props.maps[n.id],n.link.segmentLink&&n.link.segmentLink.id!=e.id?b((function(){console.warn("Map '".concat(n.id,"' lined with 2 segments: ").concat(n.link.segmentLink.id,", ").concat(e.id))})):(n.link.globalMapLink=n,n.link.segmentLink=e),e.maxY=Math.max(e.maxY,n.y+n.link.height),e.minY=Math.min(e.minY,n.y)})),e.height=e.maxY-e.minY})),this.temp.monsters.sort((function(t,e){return t.id.localeCompare(e.id)})),m(this.temp)}},{key:"componentDidMount",value:function(){m(this.props),this.getJsonResources(this.props.resources)}},{key:"render",value:function(){if(!this.state.items)return Object(x.jsx)(M,{});var t={minHeight:window.innerHeight-46,paddingTop:1};return Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{style:t,children:[Object(x.jsx)(v.c,{children:Object(x.jsx)(C,{})}),Object(x.jsxs)(v.c,{children:[Object(x.jsx)(v.a,{exact:!0,path:"/",component:M}),Object(x.jsx)(w,{path:"/items",component:Rt,data:this.state.items}),Object(x.jsx)(w,{path:"/conditions",component:Kt,data:this.state.actorconditions}),Object(x.jsx)(w,{path:"/monsters",component:ie,data:this.state.monsters}),Object(x.jsx)(w,{path:"/categories",component:R,data:this.state.itemcategories}),Object(x.jsx)(w,{path:"/npc",component:Re,data:this.state.monsters}),Object(x.jsx)(w,{path:"/quests",component:Fe,data:this.state.quests}),Object(x.jsx)(w,{path:"/map",component:tn,data:this.props.maps,globalMap:this.props.globalMap,expanded:this.state.expandedSubMenu,toggleExpand:this.toggleExpandSubMenu})]})]}),Object(x.jsxs)("div",{className:"signature",children:[Object(x.jsxs)("div",{style:{float:"left"},children:["2021, Powered by ",Object(x.jsx)("a",{href:"https://github.com/reizy/andors-trail-wiki",children:"Reizy"})]}),Object(x.jsx)("div",{style:{float:"right"},children:"Game version 0.7.14"})]})]})}}]),n}(r.a.Component);function pn(t,e,n){return n.indexOf(t)==e}var fn=n(21),vn=n.n(fn),mn=n(31);function bn(t,e){var n={name:e,properties:[],tilesets:[],layers:{},layerList:[],objectgroups:{spawn:[],rests:[],signs:[],keys:[],scripts:[],containers:[],mapchange:[],replaces:[],other:[]}};return"DOCTYPE"==t.name&&(t=t.children[0]),"map"==t.name&&t.children.forEach((function(t){"objectgroup"==t.name?function(t,e){var n,i,r={name:null===t||void 0===t||null===(n=t.attributes)||void 0===n?void 0:n.name};null===(i=t.children)||void 0===i||i.forEach((function(t){var n;if("properties"==t.name)null===(n=t.children)||void 0===n||n.forEach((function(t){var e,n,i=null===(e=t.attributes)||void 0===e?void 0:e.name,a=null===t||void 0===t||null===(n=t.attributes)||void 0===n?void 0:n.value;r[i]=a}));else switch(t.attributes.type){case"spawn":e.objectgroups.spawn.push(function(t,e,n){var i,r,a;gn(t);var o=Object(s.a)(Object(s.a)(Object(s.a)({},t.attributes),null===(i=t.children[0])||void 0===i?void 0:i.attributes),{},{objectgroup:n,width:t.attributes.width-0,height:t.attributes.height-0,x:t.attributes.x-0,y:t.attributes.y-0});return null===(r=t.children[0])||void 0===r||null===(a=r.children)||void 0===a||a.forEach((function(t){xn(t,o,["spawngroup","quantity","ignoreAreas","active"]),o[t.attributes.name]=t.attributes.value})),o}(t,0,r));break;case"key":e.objectgroups.keys.push(t);break;case"rest":e.objectgroups.rests.push(t);break;case"sign":e.objectgroups.signs.push(function(t,e,n){return jn(t),Object(s.a)(Object(s.a)({},t.attributes),{},{objectgroup:n,width:t.attributes.width-0,height:t.attributes.height-0,x:t.attributes.x-0,y:t.attributes.y-0})}(t,0,r));break;case"script":e.objectgroups.scripts.push(function(t,e,n){var i,r;gn(t);var a=Object(s.a)(Object(s.a)({},t.attributes),{},{objectgroup:n,width:t.attributes.width-0,height:t.attributes.height-0,x:t.attributes.x-0,y:t.attributes.y-0});return null===(i=t.children[0])||void 0===i||null===(r=i.children)||void 0===r||r.forEach((function(t){xn(t,a,["when"]),a[t.attributes.name]=t.attributes.value})),a}(t,0,r));break;case"container":e.objectgroups.containers.push(function(t,e,n){var i,r;jn(t);var a=Object(s.a)(Object(s.a)({},t.attributes),{},{objectgroup:n,width:t.attributes.width-0,height:t.attributes.height-0,x:t.attributes.x-0,y:t.attributes.y-0});return null===(i=t.children[0])||void 0===i||null===(r=i.children)||void 0===r||r.forEach((function(t){xn(t,a,["when"]),a[t.attributes.name]=t.attributes.value})),a}(t,0,r));break;case"mapchange":e.objectgroups.mapchange.push(function(t,e,n){var i,r,a;gn(t);var o=Object(s.a)(Object(s.a)(Object(s.a)({},t.attributes),null===(i=t.children[0])||void 0===i?void 0:i.attributes),{},{objectgroup:n,width:t.attributes.width-0,height:t.attributes.height-0,x:t.attributes.x-0,y:t.attributes.y-0,xxx:t});return null===(r=t.children[0])||void 0===r||null===(a=r.children)||void 0===a||a.forEach((function(t){xn(t,o,["place","map"]),o[t.attributes.name]=t.attributes.value})),o}(t,0,r));break;case"replace":e.objectgroups.replaces.push(t);break;default:console.warn(e),console.warn(t),e.objectgroups.other.push(t)}}))}(t,n):"layer"==t.name?function(t,e,n){b((function(){return function(t,e,n){e.width&&e.width!=t.attributes.width&&console.warn(n+" has different layers("+e.width+"!="+t.attributes.width+")");e.height&&e.height!=t.attributes.height&&console.warn(n+" has different layers("+e.height+"!="+t.attributes.height+")");e.layers[t.attributes.name]&&console.warn(n+" has several layers: "+t.attributes.name);1!=t.children.length&&console.warn(n+" has multi layer: "+t.attributes.name)}(t,e,n)})),e.layerList.push({name:t.attributes.name.toLowerCase(),visible:"0"!=t.attributes.visible}),e.width=t.attributes.width-0,e.height=t.attributes.height-0;try{var i=t.children[0].value,r=atob(i).split("").map((function(t){return t.charCodeAt(0)})),a=new Uint8Array(r),o=mn.a.inflate(a);e.layers[t.attributes.name.toLowerCase()]=new Uint32Array(o.buffer)}catch(s){console.log(s)}}(t,n,e):"tileset"==t.name?function(t,e,n){var i={height:t.children[0].attributes.height-0,width:t.children[0].attributes.width-0,name:t.attributes.name,firstgid:t.attributes.firstgid-0,tileheight:t.attributes.tileheight-0,tilewidth:t.attributes.tilewidth-0};i.columns=i.width/i.tilewidth,i.tilecount=i.height/i.tileheight*i.columns,e.tilesets.push(i)}(t,n):("properties"==t.name||(console.warn("Custom map section at '"+e+"':"),console.warn(t)),n[t.name].push(t))})),function(t){t.tilesets.forEach((function(e){var n=e.firstgid,i=t.tilesets.find((function(t){return n>=t.firstgid&&n<t.firstgid+t.tilecount}));i!=e&&(i.firstgid=-9999,b((function(){console.warn("Intersecting tilesets indexes at '"+t.name+"'"),console.warn(i),console.warn(e)})))}))}(n),function(t){t.field=[];for(var e=function(e){t.field[e]=[];for(var n=function(n){t.field[e][n]={},t.layerList.forEach((function(i){return function(t,e,n,i){t.layers[e]&&(t.field[i][n][e]=function(t,e,n){if(0==n)return;var i=t.tilesets.find((function(t){return n>=t.firstgid&&n<t.firstgid+t.tilecount}));i||b((function(){return console.warn("No tileset for '"+t.name+"."+e+"' "+n)}));return{id:n,tileset:i,localid:n-(null===i||void 0===i?void 0:i.firstgid)}}(t,e,t.layers[e][i*t.width+n]))}(t,i.name,n,e)}))},i=0;i<t.width;i++)n(i)},n=0;n<t.height;n++)e(n)}(n),n}function gn(t){b((function(){var e;(null===(e=t.children)||void 0===e?void 0:e.length)>1&&(console.warn("More then one children!"),console.warn(t))}),!0)}function jn(t){b((function(){var e;(null===(e=t.children)||void 0===e?void 0:e.length)>0&&(console.warn("More then zero children!"),console.warn(t))}),!0)}function xn(t,e,n){b((function(){var i;e[t.attributes.name]&&(console.warn("More then one children '"+t.attributes.name+"':"),console.warn(e[t.attributes.name]),console.warn(t)),"property"!=t.name&&(console.warn("Unknown children!"),console.warn(t)),(null===(i=t.children)||void 0===i?void 0:i.length)&&(console.warn("More then zero children!"),console.warn(t)),-1==n.indexOf(t.attributes.name)&&(console.warn("Unknown children!"),console.warn(t)),Object.keys(t.attributes).filter((function(t){return!["name","value","type"].includes(t)})).length&&(console.warn("Unknown children!"),console.warn(t))}),!0)}function On(t){var e={segments:[],segmentsMap:{}};return t.children.forEach((function(t){var n=function(t){var e={id:t.attributes.id,x:1*t.attributes.x,y:1*t.attributes.y,areas:yn(t.children)};return e=Object(s.a)(Object(s.a)({},e),function(t,e){var n={maps:[],mapsMap:{}};return t.filter((function(t){return"map"==t.name})).forEach((function(t){var i=Object(s.a)(Object(s.a)({},t.attributes),{},{x:1*t.attributes.x,y:1*t.attributes.y});i.area&&(i.areaLink=e[i.area],i.areaLink.maps=i.areaLink.maps||[],i.areaLink.maps.push(i)),n.maps.push(i),n.mapsMap[t.attributes.id]=i})),n}(t.children,e.areas))}(t);e.segments.push(n),e.segmentsMap[t.attributes.id]=n})),e}function yn(t){var e={};return t.filter((function(t){return"namedarea"==t.name})).forEach((function(t){e[t.attributes.id]=t.attributes})),e}var wn=function(){var t=Object(i.useState)([]),e=Object(c.a)(t,2),n=e[0],r=e[1],a={maps:{}};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var o=function(t,e){fetch(""+t,{headers:{"Content-Type":"text/xml",Accept:"text/xml"}}).then((function(t){return t.text()})).then((function(t){return t.replace(/<!--.*-->/g,"")})).then(e)},l=function(t){var e=(new vn.a).parseFromString(t),n=e.getElementsByTagName("array");console.log(e);var i=n.reduce((function(t,e){return t[e.attributes.name]=e.children.map((function(t){return t.value})).filter((function(t){return t})),t}),{});a=Object(s.a)(Object(s.a)({},a),{},{resources:i}),h(a,r)},u=function(t,e,n){o(t,(function(t){var i=(new vn.a).parseFromString(t);a.maps[e]=bn(i,e),n.progress--,0==n.progress&&n.tryDo()}))},d=function(t){o("/xml/worldmap.xml",(function(e){var n=(new vn.a).parseFromString(e);a.globalMap=On(n),t.progress--,0==t.progress&&t.tryDo()}))},h=function(t,e){var n=t.resources.loadresource_maps,i={progress:n.length+1,tryDo:function(){return e(t)}};d(i),n.forEach((function(t){u(t.replace("@","/")+".tmx",t.replace("@xml/",""),i)}))};return Object(i.useEffect)((function(){o("/values/loadresources.xml",l)}),[]),Object(x.jsx)("div",{className:"App",children:n.resources&&Object(x.jsx)(hn,{resources:n.resources,maps:n.maps,globalMap:n.globalMap})})},kn=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(e){var n=e.getCLS,i=e.getFID,r=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),i(t),r(t),a(t),o(t)}))};o.a.render(Object(x.jsx)(k.a,{children:Object(x.jsx)(wn,{})}),document.getElementById("root")),kn()}},[[47,1,2]]]);
//# sourceMappingURL=main.8b2557f3.chunk.js.map
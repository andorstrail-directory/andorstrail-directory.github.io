(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{19:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){},45:function(t,e,n){"use strict";n.r(e);var i=n(1),r=n.n(i),a=n(23),o=n.n(a),s=(n(35),n(8)),c=n(29),l=(n.p,n(36),n(16)),u=n(2),d=n(3),p=n(6),h=n(5),f=n(4),m=n(9);function v(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(g||e)&&console.warn(t)}function b(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(g||e)&&t()}var g=!1,j=n(30),x=n(0),O=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var a=Object.assign.apply(Object,[{}].concat(n));return r.a.createElement(t,a)},y=function(t){var e=t.component,n=Object(j.a)(t,["component"]);return Object(x.jsx)(m.a,Object(s.a)(Object(s.a)({},n),{},{render:function(t){return O(e,t,n)}}))},w=n(10),C=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("menu",{children:Object(x.jsxs)("ul",{className:"hr",children:[k("items","/body"),k("monsters","/animal"),k("NPC","/merchant"),k("conditions"),k("quests"),k("categories"),k("map")]})})}}]),n}(r.a.Component),k=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="/"+t+e,i=window.location.pathname.toUpperCase().startsWith("/"+t.toUpperCase())?"selected":"";return Object(x.jsx)("li",{className:i,children:Object(x.jsx)(w.b,{to:n.toLowerCase(),children:t.capitalize()})})},E=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{style:{textAlign:"left"},children:[Object(x.jsxs)("p",{children:["Welcome to ",Object(x.jsx)("b",{children:"Andor's Trail Directory V2"})," the fan page about amazing, beautiful a great game ",Object(x.jsx)("a",{href:"https://play.google.com/store/apps/details?id=com.gpl.rpg.AndorsTrail",children:"Andor's Trail"}),"."]}),Object(x.jsx)("h2",{children:"About"}),Object(x.jsxs)("p",{children:[Object(x.jsx)("b",{children:"Andor's Trail"})," is quest-driven Roguelike fantasy dungeon crawler RPG with a powerful story on Android, with open source code (GPL)."]}),Object(x.jsxs)("p",{children:["I created this web because ",Object(x.jsx)("a",{href:"http://andorstrail.irkalla.cz/0.7.0/",children:"previous one"})," was abandoned for years."]}),Object(x.jsx)("p",{children:"This pages get data directly from source files, witch are in easy-to-read JSON and XML format, and redner it birectly in your browser. "}),Object(x.jsx)("h2",{children:"Spoiler alert"}),Object(x.jsx)("p",{children:"This whole web \xefs a little bit of spoiler and it contains some informations witch you probably shouldn't know and can reveal some surprises and story twists. It is not such big deal, just be careful a consider yourself warned."}),Object(x.jsxs)("p",{children:["But if you are affraid of spoilers, stay away from ",Object(x.jsx)("b",{children:"quest page"}),"."]}),Object(x.jsx)("h2",{children:"Contact and links"}),Object(x.jsxs)("p",{children:["If you want more information about game, please visit the ",Object(x.jsx)("a",{href:"https://play.google.com/store/apps/details?id=com.gpl.rpg.AndorsTrail",children:"official game page on Google Play"})," or the ",Object(x.jsx)("a",{href:"https://www.andorstrail.com",children:"main game forum"}),". "]})]})}}]),n}(r.a.Component),M=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["name",function(t){return t.name}],["id",function(t){return t.id}],["size",function(t){return t.size}],["inventorySlot",function(t){return t.inventorySlot}],["actionType",function(t){return t.actionType}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){return Object(x.jsxs)("th",{children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(){var t=this,e=this.props.data;if(!e)return"";this.props.filter&&this.props.filter.length>0&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1})));var n=this.getKeys();return e.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(R,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(p.a)(i)),i.getRowsData=i.getRowsData.bind(Object(p.a)(i)),i.getKeys=i.getKeys.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{children:Object(x.jsxs)("table",{border:"1",children:[Object(x.jsx)("thead",{children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData()})]})})}}]),n}(r.a.Component),R=function(t){return t.keys.map((function(e,n){return Object(x.jsxs)("td",{children:[" ",e[1](t.data)," "]},e[0])}))},P=n(7),L=n.n(P),A=(n(19),n(15)),D={monsters_demon1:{x:64,y:64},monsters_demon2:{x:64,y:64},monsters_hydra1:{x:64,y:64},monsters_cyclops:{x:64,y:96},monsters_bosses_2x2:{x:64,y:64},monsters_giantbasilisk:{x:64,y:64}},S=function(t){return D[t]||{x:32,y:32}},I=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){var t,e=this.props,n=e.data,i=e.prefix,r=e.noBackground,a=this.props.zoom||32,o=(n.rootLink||i)+n.id,c="i"+(new Date-0)+"_"+Math.random(),l=null===(t=n.iconID)||void 0===t?void 0:t.split(":"),u=l[0],d=l[1],p=q(u),h=S(u);h.x=h.x*a/32,h.y=h.y*a/32;var f={width:h.x,height:h.y,overflow:"hidden"};return r||(f=Object(s.a)(Object(s.a)({},f),{},{backgroundImage:'url("/drawable/ui_selections.png")',backgroundRepeat:"no-repeat",backgroundPosition:n.iconBg*h.x+"px 0px",backgroundSize:5*h.x+"px "+h.y+"px"})),Object(x.jsx)("div",{style:{display:"flex"},children:Object(x.jsx)(A.a,{style:f,title:n.displaytype,to:o,id:n.id,children:Object(x.jsx)("img",{id:c,src:p,onLoad:H(d,h,c)})})})}}]),n}(r.a.Component),q=function(t){if(t)return"/drawable/"+t+".png"},H=function(t,e,n){return function(){if(t){var i=document.getElementById(n),r=function(t,e,n){var i=-t%e*n.x;return{x:i,y:(-t*n.y-i)/e}}(t,i.width/e.x,e);i.style="margin: ".concat(r.y,"px 0 0 ").concat(r.x,"px; display: 'block'")}}},T={root:{position:"relative",paddingLeft:"10px",paddingTop:"5px",display:"block",width:"100%",height:"100%",alignItems:"center"}},V=function(t){t.tableManager,t.value,t.onChange,t.isEdit;var e=t.data;t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:T.root,children:Object(x.jsx)(I,{data:e})})},N={root:{position:"relative",padding:"5px 20px",display:"flex",width:"100%",height:"100%"},text:{marginLeft:1,whiteSpace:"nowrap"},aimg:{width:32,height:32,overflow:"hidden"}},z=function(t){return"/drawable/"+(null===t||void 0===t?void 0:t.split(":"))[0]+".png"},B=function(t,e,n){return t+"_"+e+"_"+n},F=function(t,e,n){return function(){var i=document.getElementById(B(t,e,n)),r=function(t,e){var n=null===t||void 0===t?void 0:t.split(":")[1],i=-n%e*32;return{x:i,y:(32*-n-i)/e}}(t,i.width/32);i.style="margin: ".concat(r.y,"px 0 0 ").concat(r.x,"px")}},K=function(t,e,n){return null===e||void 0===e?void 0:e.map(function(t,e){return function(n,i){var r=t;n.chance&&(r+=n.chance+"% chance of "),r+=n.link.name,n.magnitude>1&&(r+=" x"+n.magnitude),n.duration&&(r+=" ("+n.duration+" rounds)");var a="/conditions#"+n.link.id,o=B(n.link.iconID,e,i);return Object(x.jsx)(A.a,{style:N.aimg,title:r,to:a,children:Object(x.jsx)("img",{id:o,src:z(n.link.iconID),onLoad:F(n.link.iconID,e,i)})},o)}}(t,n))},U=function(t,e,n,i){return e?Object(x.jsx)("span",{style:N.text,title:t+" "+e.min+"-"+e.max,children:n}):""},_=function(t){t.tableManager,t.value,t.onChange,t.isEdit;var e,n,i,a,o,s,c,l,u,d,p=t.data,h=(t.column,t.rowIndex);t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:N.root,children:Object(x.jsxs)(r.a.Fragment,{children:[K("On equip\n ",null===(e=p.equipEffect)||void 0===e?void 0:e.addedConditions,h),K("On hit\n On target\n  ",null===(n=p.hitEffect)||void 0===n?void 0:n.conditionsTarget,h),K("On hit\n On source\n  ",null===(i=p.hitEffect)||void 0===i?void 0:i.conditionsSource,h),U("On hit\n On source\n  ",null===(a=p.hitEffect)||void 0===a?void 0:a.increaseCurrentHP,"+HP"),K("On kill\n On source\n  ",null===(o=p.killEffect)||void 0===o?void 0:o.conditionsSource,h),U("On kill\n On source\n  ",null===(s=p.killEffect)||void 0===s?void 0:s.increaseCurrentHP,"+HP"),U("On kill\n On source\n  ",null===(c=p.killEffect)||void 0===c?void 0:c.increaseCurrentAP,"+AP"),K("On hit received\n On source\n  ",null===(l=p.hitReceivedEffect)||void 0===l?void 0:l.conditionsSource,h),K("On hit received\n On target\n  ",null===(u=p.hitReceivedEffect)||void 0===u?void 0:u.conditionsTarget,h),K("On use\n ",null===(d=p.useEffect)||void 0===d?void 0:d.conditionsSource,h)]})})},G={root:{position:"relative",padding:"0 20px",display:"flex",width:"100%",height:"100%",alignItems:"center"},text:{marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},J=["increaseAttackDamage","increaseAttackCost","increaseAttackChance","increaseBlockChance","increaseCriticalSkill","setCriticalMultiplier","increaseMaxHP","setNonWeaponDamageModifier","increaseMaxAP","increaseDamageResistance","addedConditions","conditionsTarget","increaseMoveCost","increaseUseItemCost","increaseReequipCost","",""],W=["conditionsTarget","conditionsSource","increaseCurrentHP","",""],Y=["conditionsSource","increaseCurrentHP","increaseCurrentAP",""],Q=["conditionsSource","conditionsTarget","",""],X=["conditionsSource","increaseCurrentHP",""],Z=["increaseAttackChance","increaseBlockChance","increaseDamageResistance","increaseAttackDamage","increaseMaxAP","increaseMoveCost","increaseAttackCost","increaseMaxHP","increaseCriticalSkill","increaseUseItemCost","increaseReequipCost","visualEffectID",""],$=["increaseCurrentHP","visualEffectID","increaseCurrentAP","","",""],tt=function(t,e,n){if(!e)return"";var i=Object.keys(e).filter((function(t){return-1==n.indexOf(t)})).map((function(t){return[t,e[t]]}));return i.length>0?t+JSON.stringify(i):""},et=function(t){t.tableManager,t.value,t.onChange,t.isEdit;var e=t.data;t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:G.root,children:Object(x.jsxs)(r.a.Fragment,{children:[tt("On equip:",e.equipEffect,J),tt("On hit:",e.hitEffect,W),tt("On get hit:",e.hitReceivedEffect,Q),tt("On kill: ",e.killEffect,Y),tt("On use: ",e.useEffect,X),tt("",e.abilityEffect,Z),tt("",e.roundEffect,$)]})})},nt={root:{position:"relative",padding:"10px 20px",display:"block",width:"100%",height:"100%",alignItems:"center"},text:{margin:"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},it=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){t.tableManager;var n=t.value,i=(t.onChange,t.isEdit,t.data),r=(t.column,t.rowIndex,t.searchText,t.isFirstEditableCell,{data:i});return e.forEach((function(t){r.data=r.data[t]||{}})),"0"==n?"":r.data.min==r.data.max?Object(x.jsx)("div",{style:nt.root,children:Object(x.jsx)("span",{style:nt.text,children:n})}):Object(x.jsx)("div",{style:nt.root,children:Object(x.jsxs)("span",{style:nt.text,children:[n,"(",r.data.min,"/",r.data.max,")"]})})}},rt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["",function(t){return Object(x.jsx)(I,{data:t.monster})}],["Name",function(t){return ot(t.monster)},{textAlign:"left"}],["Quantity",function(t){return st(t.quantity)}],["Chance",function(t){return t.monster.maxHP?t.chance+"%":"sell"}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){var n=t.length>=2?t[2]:{};return Object(x.jsxs)("th",{style:n,children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(){var t=this,e=this.props.data;if(!e)return"";this.props.filter&&this.props.filter.length>0&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1})));var n=this.getKeys();return e.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(at,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(p.a)(i)),i.getRowsData=i.getRowsData.bind(Object(p.a)(i)),i.getKeys=i.getKeys.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("table",{style:{width:400},children:[Object(x.jsx)("thead",{style:{display:"none"},children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData()})]})}}]),n}(r.a.Component),at=function(t){return t.keys.map((function(e,n){var i=e.length>=2?e[2]:{};return Object(x.jsx)("td",{style:i,children:e[1](t.data)},e[0])}))},ot=function(t){var e=t.rootLink+t.id;return Object(x.jsx)("a",{href:e,children:t.name})},st=function(t){return t.max==t.min?t.max:t.min+"-"+t.max},ct={text:{marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},table:{paddingTop:10,marginLeft:-10}},lt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={expanded:!1},i.toggleExpand=i.toggleExpand.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var t,e,n=this.props.data,i=this.props.value,a=null===(t=n.droplists)||void 0===t||null===(e=t.flatMap((function(t){return ut(t)})))||void 0===e?void 0:e.filter((function(t){return!!t}));return a&&a.length?Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsxs)("div",{style:{display:"flex"},onClick:this.toggleExpand,children:[Object(x.jsx)("img",{src:"../image/sort_desc.png"}),Object(x.jsx)("span",{style:ct.text,children:i})]}),Object(x.jsx)("div",{style:ct.table,children:this.state.expanded&&Object(x.jsx)(rt,{data:a})})]}):Object(x.jsx)(r.a.Fragment,{children:Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)("div",{style:{width:19}}),Object(x.jsx)("span",{style:ct.text,children:i})]})})}}]),n}(r.a.Component),ut=function(t){var e,n,i=[];return null===(e=t.droplist)||void 0===e||null===(n=e.links)||void 0===n||n.forEach((function(e){i.push(Object(s.a)({monster:e},t))})),i},dt={root:{position:"relative",padding:"10px",display:"block",width:"100%",height:"100%",alignItems:"center"}},pt=function(t){t.tableManager;var e=t.value,n=(t.onChange,t.isEdit,t.data);t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:dt.root,children:Object(x.jsx)(lt,{data:n,value:e})})},ht=function(t){var e=t.a,n=t.b,i=t.isAscending,r=e||"",a=n||"";return r>a?i?1:-1:r<a?i?-1:1:0},ft=function(t){var e=t.a,n=t.b,i=t.isAscending,r=e||0,a=n||0;return r>a?i?1:-1:r<a?i?-1:1:0},mt=function(t){var e=t.a,n=t.b,i=t.isAscending,r=["ordinary","quest","rare","extraordinary","legendary",""],a=r.indexOf(e),o=r.indexOf(n);return a>o?i?1:-1:a<o?i?-1:1:0},vt=function(){var t=window.location.hash;""!==t&&setTimeout((function(){var e=t.replace("#",""),n=document.getElementById(e);n&&n.scrollIntoView()}),100)},bt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRows=function(){var t=this,e=this.props.data;return this.props.filter&&(e=e.filter((function(e){return t.props.filter(e)}))),e},i.isEmptyColumn=function(t){return!!this.rows.find((function(e){return t(e)}))},i.getColumns=function(){var t=1;return[{id:t++,field:"displaytype",label:"",pinned:!0,cellRenderer:V,sort:mt,width:"50px"},{id:t++,field:"name",label:"Name",pinned:!0,cellRenderer:pt,width:"290px"},{id:t++,field:"equipEffect",label:"Atk Cost",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseAttackCost},sort:ft,width:"85px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseAttackCost}))},{id:t++,field:"equipEffect",label:"Dmg",getValue:function(t){var e,n,i=t.value;t.column;return(((null===i||void 0===i||null===(e=i.increaseAttackDamage)||void 0===e?void 0:e.min)||0)+((null===i||void 0===i||null===(n=i.increaseAttackDamage)||void 0===n?void 0:n.max)||0))/2},sort:ft,cellRenderer:it("equipEffect","increaseAttackDamage"),width:"120px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseAttackDamage}))},{id:t++,field:"equipEffect",label:"AC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseAttackChance},sort:ft,width:"50px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseAttackChance}))},{id:t++,field:"equipEffect",label:"BC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseBlockChance},sort:ft,width:"50px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseBlockChance}))},{id:t++,field:"equipEffect",label:"Crit",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseCriticalSkill},sort:ft,width:"60px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseCriticalSkill}))},{id:t++,field:"equipEffect",label:"Crit*",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.setCriticalMultiplier},sort:ft,width:"55px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.setCriticalMultiplier}))},{id:t++,field:"equipEffect",label:"MaxHP",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMaxHP},sort:ft,width:"75px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseMaxHP}))},{id:t++,field:"equipEffect",label:"MaxAP",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMaxAP},sort:ft,width:"75px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseMaxAP}))},{id:t++,field:"equipEffect",label:"MC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMoveCost},sort:ft,width:"80px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseMoveCost}))},{id:t++,field:"equipEffect",label:"UC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseUseItemCost},sort:ft,width:"50px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseUseItemCost}))},{id:t++,field:"equipEffect",label:"EC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseReequipCost},sort:ft,width:"50px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseReequipCost}))},{id:t++,field:"equipEffect",label:"Dmg*%",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.setNonWeaponDamageModifier},sort:ft,width:"75px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.setNonWeaponDamageModifier}))},{id:t++,field:"equipEffect",label:"Res",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseDamageResistance},sort:ft,width:"50px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseDamageResistance}))},{id:t++,field:"conditionsCount",label:"Conditions",sort:ft,width:"140px",cellRenderer:_},{id:t++,field:"baseMarketCost",label:"Price",sort:ft,width:"60px",visible:!0},{id:t++,field:"categoryLink",label:"Category",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.name},width:"180px"},{id:t++,field:"equipEffect",label:"Other",getValue:function(t){var e=t.value;t.column;return e},width:"100px",sort:ht,cellRenderer:et,visible:!1}]},i.getColumns=i.getColumns.bind(Object(p.a)(i)),i.getRows=i.getRows.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return L.a.defaultProps.isPaginated=!1,L.a.defaultProps.minColumnResizeWidth=30,L.a.defaultProps.isVirtualScroll=!1,L.a.defaultProps.showSearch=!1,L.a.defaultProps.showColumnVisibilityManager=!1,this.rows=this.getRows(),Object(x.jsx)(L.a,{columns:this.getColumns(),rows:this.rows,onLoad:vt},this.props.title)}}]),n}(r.a.Component),gt=function(t){var e=t.a,n=t.b,i=t.isAscending,r=e||"",a=n||"";return r>a?i?1:-1:r<a?i?-1:1:0},jt=function(t){var e=t.a,n=t.b,i=t.isAscending,r=e||0,a=n||0;return r>a?i?1:-1:r<a?i?-1:1:0},xt=function(t){var e=t.a,n=t.b,i=t.isAscending,r=["ordinary","quest","rare","extraordinary","legendary",""],a=r.indexOf(e),o=r.indexOf(n);return a>o?i?1:-1:a<o?i?-1:1:0},Ot=function(){var t=window.location.hash;""!==t&&setTimeout((function(){var e=t.replace("#",""),n=document.getElementById(e);n&&n.scrollIntoView()}),100)},yt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRows=function(){var t=this,e=this.props.data;return this.props.filter&&(e=e.filter((function(e){return t.props.filter(e)}))),e},i.getColumns=function(){var t=1;return[{id:t++,field:"displaytype",label:"",pinned:!0,cellRenderer:V,sort:xt,width:"50px"},{id:t++,field:"name",label:"Name",pinned:!0,cellRenderer:pt,width:"290px"},{id:t++,field:"categoryLink",label:"Category",getValue:function(t){var e=t.value;t.column;return e.name},width:"140px"},{id:t++,field:"useEffect",label:"HP",getValue:function(t){var e,n,i=t.value;t.column;return(((null===i||void 0===i||null===(e=i.increaseCurrentHP)||void 0===e?void 0:e.min)||0)+((null===i||void 0===i||null===(n=i.increaseCurrentHP)||void 0===n?void 0:n.max)||0))/2},sort:jt,width:"130px",cellRenderer:it("useEffect","increaseCurrentHP")},{id:t++,field:"conditionsCount",label:"Conditions",sort:jt,width:"250px",cellRenderer:_},{id:t++,field:"baseMarketCost",label:"Price",getValue:function(t){var e=t.value;t.column;return e?e+" gold":""},sort:jt,width:"100px",visible:!0},{id:t++,field:"equipEffect",label:"Other",getValue:function(t){var e=t.value;t.column;return e},width:"100px",sort:gt,cellRenderer:et,visible:!1}]},i.getColumns=i.getColumns.bind(Object(p.a)(i)),i.getRows=i.getRows.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return L.a.defaultProps.isPaginated=!1,L.a.defaultProps.minColumnResizeWidth=30,L.a.defaultProps.isVirtualScroll=!1,L.a.defaultProps.showSearch=!1,L.a.defaultProps.showColumnVisibilityManager=!1,this.rows=this.getRows(),Object(x.jsx)(L.a,{columns:this.getColumns(),rows:this.rows,onLoad:Ot},this.props.title)}}]),n}(r.a.Component);function wt(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,r=t+e,a=n.toUpperCase()==r.toUpperCase()?"selected":"";return Object(x.jsx)("li",{className:a,children:Object(x.jsx)(w.b,{to:r.toLowerCase(),children:i.capitalize()})},e)}var Ct=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return this.props.data?Object(x.jsxs)("div",{children:[Object(x.jsxs)("ul",{className:"hr",children:[wt("/items/","body",this.props.location.pathname,"Armor"),wt("/items/","weapon",this.props.location.pathname),wt("/items/","shield",this.props.location.pathname),wt("/items/","head",this.props.location.pathname,"Helm"),wt("/items/","hand",this.props.location.pathname,"Glove"),wt("/items/","feet",this.props.location.pathname,"Boot"),wt("/items/","leftring",this.props.location.pathname,"ring"),wt("/items/","neck",this.props.location.pathname,"Necklace"),wt("/items/","use",this.props.location.pathname,"Usable"),wt("/items/","other",this.props.location.pathname)]}),Object(x.jsxs)(m.c,{children:[kt("body",this.props.data),kt("weapon",this.props.data),kt("shield",this.props.data),kt("head",this.props.data),kt("hand",this.props.data),kt("feet",this.props.data),kt("neck",this.props.data),kt("leftring",this.props.data),Object(x.jsx)(y,{path:"/items/use",component:yt,data:this.props.data,title:"Usable",filter:function(t){return"use"==t.categoryLink.actionType}}),Object(x.jsx)(y,{path:"/items/other",component:bt,data:this.props.data,title:"Other",filter:function(t){var e;return!(null===(e=t.categoryLink)||void 0===e?void 0:e.actionType)}})]})]}):"Loading..."}}]),n}(r.a.Component),kt=function(t,e){var n="/items/"+t;return Object(x.jsx)(y,{path:n,component:bt,data:e,title:t,filter:function(e){return e.categoryLink.inventorySlot==t}})},Et=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["",function(t){return Object(x.jsx)(I,{data:t})}],["Name",function(t){return Rt(t)},{textAlign:"left"}],["Type",function(t){return t.type}],["Aim",function(t){return t.aim}],["Chance",function(t){return t.chance?t.chance+"%":""}],["Magnitude",function(t){return t.magnitude+"x"}],["Duration",function(t){return t.duration+" rounds"}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){var n=t.length>=2?t[2]:{};return Object(x.jsxs)("th",{style:n,children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(){var t=this,e=this.props.data;if(!e)return"";this.props.filter&&this.props.filter.length>0&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1})));var n=this.getKeys();return e.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(Mt,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(p.a)(i)),i.getRowsData=i.getRowsData.bind(Object(p.a)(i)),i.getKeys=i.getKeys.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("table",{style:{width:700},children:[Object(x.jsx)("thead",{style:{display:"none"},children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData()})]})}}]),n}(r.a.Component),Mt=function(t){return t.keys.map((function(e,n){var i=e.length>=2?e[2]:{};return Object(x.jsx)("td",{style:i,children:e[1](t.data)},e[0])}))},Rt=function(t){var e=t.rootLink+t.id;return Object(x.jsx)("a",{href:e,children:t.name})},Pt={text:{marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},table:{paddingTop:10,marginLeft:-10}},Lt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={expanded:!1},i.toggleExpand=i.toggleExpand.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var t=this.props.data,e=this.props.value,n=t.links;return n&&n.length?Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsxs)("div",{style:{display:"flex"},onClick:this.toggleExpand,children:[Object(x.jsx)("img",{src:"../image/sort_desc.png"}),Object(x.jsx)("span",{style:Pt.text,children:e})]}),Object(x.jsx)("div",{style:Pt.table,children:this.state.expanded&&Object(x.jsx)(Et,{data:n})})]}):Object(x.jsx)(r.a.Fragment,{children:Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)("div",{style:{width:19}}),Object(x.jsx)("span",{style:Pt.text,children:e})]})})}}]),n}(r.a.Component),At={root:{position:"relative",padding:"10px 5px 0px",display:"block",width:"100%",height:"100%",alignItems:"center"}},Dt=function(t){t.tableManager;var e=t.value,n=(t.onChange,t.isEdit,t.data);t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:At.root,children:Object(x.jsx)(Lt,{data:n,value:e})})},St={root:{position:"relative",padding:"0 20px",display:"flex",width:"100%",alignItems:"center"},img:{width:32,height:32}},It=function(t){t.tableManager;var e=t.value;t.onChange,t.isEdit,t.data,t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:St.root,children:e&&Object(x.jsx)("img",{style:St.img,src:"/image/yes.png"})})},qt=function(t){var e=t.a,n=t.b,i=t.isAscending,r=e||0,a=n||0;return r>a?i?1:-1:r<a?i?-1:1:0},Ht=function(){var t=window.location.hash;""!==t&&setTimeout((function(){var e=t.replace("#",""),n=document.getElementById(e);n&&n.scrollIntoView()}),100)},Tt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRows=function(){var t=this,e=this.props.data;return this.props.filter&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1}))),e},i.isEmptyColumn=function(t){return!!this.rows.find((function(e){return t(e)}))},i.getColumns=function(){var t=1;return[{id:t++,field:"displaytype",label:"",pinned:!0,cellRenderer:V,width:"50px"},{id:t++,field:"name",label:"Name",pinned:!0,cellRenderer:Dt,width:"300px"},{id:t++,field:"category",label:"Category",width:"120px"},{id:t++,field:"isStacking",label:"Stack",cellRenderer:It,sort:qt,width:"80px"},{id:t++,field:"abilityEffect",label:"HP",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMaxHP},sort:qt,width:"62px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseMaxHP}))},{id:t++,field:"abilityEffect",label:"AC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseAttackChance},sort:qt,width:"62px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseAttackChance}))},{id:t++,field:"abilityEffect",label:"Dmg",getValue:function(t){var e,n,i=t.value;t.column;return(((null===i||void 0===i||null===(e=i.increaseAttackDamage)||void 0===e?void 0:e.min)||0)+((null===i||void 0===i||null===(n=i.increaseAttackDamage)||void 0===n?void 0:n.max)||0))/2},cellRenderer:it("abilityEffect","increaseAttackDamage"),width:"78px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseAttackDamage}))},{id:t++,field:"abilityEffect",label:"Crit",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseCriticalSkill},sort:qt,width:"70px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseCriticalSkill}))},{id:t++,field:"abilityEffect",label:"BC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseBlockChance},sort:qt,width:"60px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseBlockChance}))},{id:t++,field:"abilityEffect",label:"Resist",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseDamageResistance},sort:qt,width:"82px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseDamageResistance}))},{id:t++,field:"abilityEffect",label:"AP",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMaxAP},sort:qt,width:"60px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseMaxAP}))},{id:t++,field:"abilityEffect",label:"Atk cost",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseAttackCost},sort:qt,width:"100px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseAttackCost}))},{id:t++,field:"abilityEffect",label:"Move cost",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMoveCost},sort:qt,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseMoveCost}))},{id:t++,field:"abilityEffect",label:"Use cost",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseUseItemCost},sort:qt,width:"105px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseUseItemCost}))},{id:t++,field:"abilityEffect",label:"Equip cost",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseReequipCost},sort:qt,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseReequipCost}))},{id:t++,field:"roundEffect",label:"Round HP",getValue:function(t){var e,n,i=t.value;t.column;return(((null===i||void 0===i||null===(e=i.increaseCurrentHP)||void 0===e?void 0:e.min)||0)+((null===i||void 0===i||null===(n=i.increaseCurrentHP)||void 0===n?void 0:n.max)||0))/2},cellRenderer:it("roundEffect","increaseCurrentHP"),sort:qt,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.roundEffect)||void 0===e?void 0:e.increaseCurrentHP}))},{id:t++,field:"roundEffect",label:"Round AP",getValue:function(t){var e,n,i=t.value;t.column;return(((null===i||void 0===i||null===(e=i.increaseCurrentAP)||void 0===e?void 0:e.min)||0)+((null===i||void 0===i||null===(n=i.increaseCurrentAP)||void 0===n?void 0:n.max)||0))/2},cellRenderer:it("roundEffect","increaseCurrentAP"),sort:qt,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.roundEffect)||void 0===e?void 0:e.increaseCurrentAP}))},{id:t++,field:"abilityEffect",label:"abilityEffect",getValue:function(t){var e=t.value;t.column;return JSON.stringify(e)},cellRenderer:et,width:"400px",visible:!1},{id:t++,field:"roundEffect",label:"roundEffect",getValue:function(t){var e=t.value;t.column;return JSON.stringify(e)},cellRenderer:et,width:"400px",visible:!1}]},i.getColumns=i.getColumns.bind(Object(p.a)(i)),i.getRows=i.getRows.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return L.a.defaultProps.isPaginated=!1,L.a.defaultProps.minColumnResizeWidth=30,L.a.defaultProps.isVirtualScroll=!1,L.a.defaultProps.showSearch=!1,L.a.defaultProps.showColumnVisibilityManager=!1,this.rows=this.getRows(),Object(x.jsx)(L.a,{columns:this.getColumns(),rows:this.rows,onLoad:Ht},this.props.title)}}]),n}(r.a.Component),Vt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return this.props.data?Object(x.jsxs)("div",{children:["Positive",Object(x.jsx)(Tt,{data:this.props.data.filter((function(t){return t.isPositive}))}),"Negative",Object(x.jsx)(Tt,{data:this.props.data.filter((function(t){return!t.isPositive}))})]}):"Loading..."}}]),n}(r.a.Component),Nt={root:{width:1e3},img:{width:32,height:32,marginTop:-5,marginRight:5},link:{color:"white",textTransform:"capitalize",float:"left",display:"flex",margin:10}},zt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRowsData=function(t){var e;if(!t)return"";var n=null===t||void 0===t||null===(e=t.flatMap((function(t){return t.maps})))||void 0===e?void 0:e.filter(Bt);return null===n||void 0===n?void 0:n.map((function(e,n){return Object(x.jsxs)(A.a,{to:e.rootLink+e.name+"#"+t[0].key,style:Nt.link,children:[Object(x.jsx)("img",{style:Nt.img,src:"/image/ui_icon_map.png"}),e.name]},n)}))},i.getRowsData=i.getRowsData.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{style:Nt.root,children:this.getRowsData(this.props.data)})}}]),n}(r.a.Component);function Bt(t,e,n){return n.indexOf(t)==e}var Ft=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["",function(t){return Object(x.jsx)(I,{data:t.link})}],["Name",function(t){return Ut(t.link)},{textAlign:"left"}],["Quantity",function(t){return _t(t.quantity)}],["Chance",function(t){return t.chance+"%"}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){var n=t.length>=2?t[2]:{};return Object(x.jsxs)("th",{style:n,children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(){var t=this,e=this.props.data;if(!e)return"";this.props.filter&&this.props.filter.length>0&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1})));var n=this.getKeys();return e.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(Kt,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(p.a)(i)),i.getRowsData=i.getRowsData.bind(Object(p.a)(i)),i.getKeys=i.getKeys.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("table",{style:{width:400},children:[Object(x.jsx)("thead",{style:{display:"none"},children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData()})]})}}]),n}(r.a.Component),Kt=function(t){return t.keys.map((function(e,n){var i=e.length>=2?e[2]:{};return Object(x.jsx)("td",{style:i,children:e[1](t.data)},e[0])}))},Ut=function(t){var e=t.rootLink+t.id;return Object(x.jsx)("a",{href:e,children:t.name})},_t=function(t){return t.max==t.min?t.max:t.min+"-"+t.max},Gt={text:{marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},table:{paddingTop:10,marginLeft:-10}},Jt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={expanded:!1},i.toggleExpand=i.toggleExpand.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var t,e=this.props.data,n=this.props.value,i=null===(t=e.droplistLink)||void 0===t?void 0:t.items,a=e.spawnGroupLinks;return i||a?Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsxs)("div",{style:{display:"flex"},onClick:this.toggleExpand,children:[Object(x.jsx)("img",{src:"../image/sort_desc.png"}),Object(x.jsx)("span",{style:Gt.text,children:n})]}),Object(x.jsxs)("div",{style:Gt.table,children:[this.state.expanded&&Object(x.jsx)(Ft,{data:i}),this.state.expanded&&Object(x.jsx)(zt,{data:a})]})]}):Object(x.jsx)(r.a.Fragment,{children:Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)("div",{style:{width:19}}),Object(x.jsx)("span",{style:Gt.text,children:n})]})})}}]),n}(r.a.Component),Wt={root:{position:"relative",padding:"10px",display:"block",width:"100%",height:"100%",alignItems:"center"}},Yt=function(t){t.tableManager;var e=t.value,n=(t.onChange,t.isEdit,t.data);t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:Wt.root,children:Object(x.jsx)(Jt,{data:n,value:e})})},Qt=function(t){var e=t.a,n=t.b,i=t.isAscending,r=e||0,a=n||0;return r>a?i?1:-1:r<a?i?-1:1:0},Xt=function(){var t=window.location.hash;""!==t&&setTimeout((function(){var e=t.replace("#",""),n=document.getElementById(e);n&&n.scrollIntoView()}),100)},Zt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRows=function(){var t=this,e=this.props.data;return this.props.filter&&(e=e.filter((function(e){return t.props.filter(e)}))),e},i.maxIconWidth=function(){return this.rows.map((function(t){return(e=t.iconID,S(null===e||void 0===e?void 0:e.split(":")[0])).x;var e})).reduce((function(t,e){return Math.max(t,e)}),32)+10+"px"},i.getColumns=function(){var t=1;return[{id:t++,field:"unique",label:"",pinned:!0,cellRenderer:V,sort:Qt,width:this.maxIconWidth()},{id:t++,field:"name",label:"Name",pinned:!0,cellRenderer:Yt,width:"300px"},{id:t++,field:"maxHP",label:"HP",sort:Qt,width:"50px"},{id:t++,field:"attackChance",label:"AC",sort:Qt,width:"50px"},{id:t++,field:"attackDamage",label:"Dmg",getValue:function(t){var e=t.value;t.column;return(((null===e||void 0===e?void 0:e.min)||0)+((null===e||void 0===e?void 0:e.max)||0))/2},sort:Qt,cellRenderer:it("attackDamage"),width:"120px"},{id:t++,field:"criticalSkill",label:"Crit",sort:Qt,width:"60px"},{id:t++,field:"criticalMultiplier",label:"Crit*",sort:Qt,width:"55px"},{id:t++,field:"blockChance",label:"BC",sort:Qt,width:"50px"},{id:t++,field:"damageResistance",label:"Res",sort:Qt,width:"50px"},{id:t++,field:"maxAP",label:"AP",sort:Qt,width:"50px"},{id:t++,field:"attackCost",label:"Atk Cost",sort:Qt,width:"85px"},{id:t++,field:"moveCost",label:"Move Cost",sort:Qt,width:"100px"},{id:t++,field:"exp",label:"XP",sort:Qt,width:"75px"},{id:t++,field:"conditionsCount",label:"Conditions",sort:Qt,width:"130px",cellRenderer:_}]},i.getColumns=i.getColumns.bind(Object(p.a)(i)),i.getRows=i.getRows.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return L.a.defaultProps.isPaginated=!1,L.a.defaultProps.minColumnResizeWidth=30,L.a.defaultProps.isVirtualScroll=!1,L.a.defaultProps.showSearch=!1,L.a.defaultProps.showColumnVisibilityManager=!1,this.rows=this.getRows(),v(this.rows),Object(x.jsx)(L.a,{columns:this.getColumns(),rows:this.rows,onLoad:Xt},this.props.title)}}]),n}(r.a.Component),$t=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return this.props.data?Object(x.jsxs)("div",{children:[Object(x.jsxs)("ul",{className:"hr",children:[wt("/monsters/","animal",this.props.location.pathname),wt("/monsters/","insect",this.props.location.pathname),wt("/monsters/","reptile",this.props.location.pathname),wt("/monsters/","undead",this.props.location.pathname),wt("/monsters/","giant",this.props.location.pathname),wt("/monsters/","ghost",this.props.location.pathname),wt("/monsters/","construct",this.props.location.pathname),wt("/monsters/","humanoid",this.props.location.pathname),wt("/monsters/","demon",this.props.location.pathname),wt("/monsters/","other",this.props.location.pathname)]}),Object(x.jsxs)(m.c,{children:[te("animal",this.props.data),te("humanoid",this.props.data),te("insect",this.props.data),te("undead",this.props.data),te("giant",this.props.data),te("reptile",this.props.data),te("construct",this.props.data),te("demon",this.props.data),te("ghost",this.props.data),Object(x.jsx)(y,{path:"/monsters/other",component:Zt,data:this.props.data,title:"Other",filter:function(t){return!t.monsterClass}})]})]}):"Loading..."}}]),n}(r.a.Component),te=function(t,e){var n="/monsters/"+t;return Object(x.jsx)(y,{path:n,component:Zt,data:e,title:t,filter:function(e){return!(!e.attackChance&&!e.maxHP)&&e.monsterClass==t}})},ee=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["",function(t){return Object(x.jsx)(I,{data:t.link})}],["Name",function(t){return ie(t.link)},{textAlign:"left"}],["Quantity",function(t){return re(t.quantity)}],["Price",function(t){return ae(t.link,.15)+" gold"},{textAlign:"right"}],["Buy",function(t){return ae(t.link,-.15)+" gold"},{textAlign:"right"}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){var n=t.length>=2?t[2]:{};return Object(x.jsxs)("th",{style:n,children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(){var t=this,e=this.props.data;if(!e)return"";this.props.filter&&this.props.filter.length>0&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1})));var n=this.getKeys();return e.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(ne,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(p.a)(i)),i.getRowsData=i.getRowsData.bind(Object(p.a)(i)),i.getKeys=i.getKeys.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("table",{style:{width:500},children:[Object(x.jsx)("thead",{style:{display:"none"},children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData()})]})}}]),n}(r.a.Component),ne=function(t){return t.keys.map((function(e,n){var i=e.length>=2?e[2]:{};return Object(x.jsx)("td",{style:i,children:e[1](t.data)},e[0])}))},ie=function(t){var e=t.rootLink+t.id;return Object(x.jsx)("a",{href:e,children:t.name})},re=function(t){return t.max==t.min?t.max:t.min+"-"+t.max},ae=function(t,e){var n=t.baseMarketCost;return n+Math.trunc(n*e)},oe={text:{marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},table:{paddingTop:10,marginLeft:-10}},se=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={expanded:!1},i.toggleExpand=i.toggleExpand.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var t,e=this.props.data,n=this.props.value,i=null===(t=e.droplistLink)||void 0===t?void 0:t.items;return i?Object(x.jsxs)(r.a.Fragment,{children:[Object(x.jsxs)("div",{style:{display:"flex"},onClick:this.toggleExpand,children:[Object(x.jsx)("img",{src:"../image/sort_desc.png"}),Object(x.jsx)("span",{style:oe.text,children:n})]}),Object(x.jsx)("div",{style:oe.table,children:this.state.expanded&&Object(x.jsx)(ee,{data:i})})]}):Object(x.jsx)(r.a.Fragment,{children:Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)("div",{style:{width:19}}),Object(x.jsx)("span",{style:oe.text,children:n})]})})}}]),n}(r.a.Component),ce={root:{position:"relative",padding:"10px",display:"block",width:"100%",height:"100%",alignItems:"center"}},le=function(t){t.tableManager;var e=t.value,n=(t.onChange,t.isEdit,t.data);t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:ce.root,children:Object(x.jsx)(se,{data:n,value:e})})};function ue(t,e,n){return n.indexOf(t)==e}var de=function(t){var e;if(!t)return"";var n=null===t||void 0===t||null===(e=t.flatMap((function(t){return t.maps})))||void 0===e?void 0:e.filter(ue);return null===n||void 0===n?void 0:n.map((function(e,n){var i=e.rootLink+e.name+"#"+t[0].key;return Object(x.jsx)(A.a,{to:i,className:"nps-location-cell",children:e.name},n)}))},pe=function(t){t.tableManager,t.value,t.onChange,t.isEdit;var e=t.data;t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{children:de(e.spawnGroupLinks)})},he=function(t){var e,n,i,r,a=t.a,o=t.b,s=t.isAscending,c=(null===(e=a[0])||void 0===e?void 0:e.maps)&&(null===(n=a[0].maps[0])||void 0===n?void 0:n.name)||"",l=(null===(i=o[0])||void 0===i?void 0:i.maps)&&(null===(r=o[0].maps[0])||void 0===r?void 0:r.name)||"";return c>l?s?1:-1:c<l?s?-1:1:0},fe=function(t){var e=t.a,n=t.b,i=t.isAscending,r=e||0,a=n||0;return r>a?i?1:-1:r<a?i?-1:1:0},me=function(){var t=window.location.hash;""!==t&&setTimeout((function(){var e=t.replace("#",""),n=document.getElementById(e);n&&n.scrollIntoView()}),100)},ve=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRows=function(){var t=this,e=this.props.data;return this.props.filter&&(e=e.filter((function(e){return t.props.filter(e)}))),e},i.getColumns=function(){var t=1;return[{id:t++,field:"unique",label:"",pinned:!0,cellRenderer:V,sort:fe,width:"50px"},{id:t++,field:"name",label:"Name",pinned:!0,cellRenderer:le,width:"300px"},{id:t++,field:"spawnGroupLinks",label:"Locations",sort:he,cellRenderer:pe,width:"300px"}]},i.getColumns=i.getColumns.bind(Object(p.a)(i)),i.getRows=i.getRows.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return L.a.defaultProps.isPaginated=!1,L.a.defaultProps.minColumnResizeWidth=30,L.a.defaultProps.isVirtualScroll=!1,L.a.defaultProps.showSearch=!1,L.a.defaultProps.showColumnVisibilityManager=!1,Object(x.jsx)(L.a,{columns:this.getColumns(),rows:this.getRows(),onLoad:me})}}]),n}(r.a.Component),be=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return this.props.data?Object(x.jsxs)("div",{children:[Object(x.jsxs)("ul",{className:"hr",children:[wt("/npc/","merchant",this.props.location.pathname),wt("/npc/","A-G",this.props.location.pathname),wt("/npc/","H-R",this.props.location.pathname),wt("/npc/","S-Z",this.props.location.pathname)]}),Object(x.jsxs)(m.c,{children:[Object(x.jsx)(y,{path:"/npc/a-g",component:ve,data:this.props.data,title:"NPC",filter:function(t){return"/npc/a-g#"==t.rootLink}}),Object(x.jsx)(y,{path:"/npc/h-r",component:ve,data:this.props.data,title:"NPC",filter:function(t){return"/npc/h-r#"==t.rootLink}}),Object(x.jsx)(y,{path:"/npc/s-z",component:ve,data:this.props.data,title:"NPC",filter:function(t){return"/npc/s-z#"==t.rootLink}}),Object(x.jsx)(y,{path:"/npc/merchant",component:ve,data:this.props.data,title:"Merchant",filter:function(t){return"/npc/merchant#"==t.rootLink}})]})]}):"Loading..."}}]),n}(r.a.Component),ge=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){var t=this.props,e=t.data,n=t.zoom,i=e.tileset;if(!i)return Object(x.jsx)("div",{style:{position:"absolute",top:this.props.y,left:this.props.x,width:32,height:32,backgroundColor:"red",opacity:.5}});var r=i.name,a=e.localid,o=je(r),s=i.tilewidth*n/32,c=i.tileheight*n/32,l=xe(a,i,s,c,n),u={margin:"".concat(l.y,"px 0 0 ").concat(l.x,"px"),width:"".concat(l.w,"px"),display:"block"};return Object(x.jsx)("div",{style:{width:"".concat(s,"px"),height:"".concat(c,"px"),overflow:"hidden",position:"absolute",left:this.props.x,top:this.props.y},children:Object(x.jsx)("img",{src:o,style:u})})}}]),n}(r.a.Component),je=function(t){if(t)return"/drawable/"+t+".png"},xe=function(t,e,n,i,r){var a=e.width*r/32,o=e.width/e.tilewidth,s=-t%o*n;return{x:s,y:(-t*i-s)/o,w:a}},Oe=function(t,e){return t=t.spawngroup||t.name||"",e=e.spawngroup||e.name||"",t.localeCompare(e)},ye=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRowsData=function(t,e){var n=t.field;if(!n)return"";var i=t.layerList.map((function(t){return t.name})).indexOf("above"),r=t.layerList.filter((function(t,e){return e<i}));return n.map((function(t,n){return Object(x.jsx)(we,{data:t,layers:r,y:n,zoom:e},n)}))},i.getRowsDataAbove=function(t,e){var n=t.field;if(!n)return"";var i=t.layerList.map((function(t){return t.name})).indexOf("above"),r=t.layerList.filter((function(t,e){return e>=i}));return n.map((function(t,n){return Object(x.jsx)(we,{data:t,layers:r,y:n,zoom:e},n)}))},i.renderSpawn=function(t,e){var n=this;if(!t)return"";var i=0;return t.sort(Oe).map((function(t){var r,a=t.link;if(!a)return"";var o="mapspawn",s=null===(r=n.props.location)||void 0===r?void 0:r.hash;s!="#"+t.name&&s!="#"+t.spawngroup||(o+=" active");for(var c=(t.quantity||1)-0,l=[],u=0;u<c;u++){i++;var d={marginLeft:t.x+ke(t.width-32),marginTop:t.y+ke(t.height-32)},p=a.monsters[i%a.monsters.length];l.push(Object(x.jsx)("div",{style:d,className:o,title:p.name,children:Object(x.jsx)(I,{data:p,zoom:e,noBackground:"true"})},i))}return l}))},i.renderMapchange=function(t,e){var n=this;return t?t.map((function(t,e){var i,r={marginLeft:t.x,marginTop:t.y,width:t.width,height:t.height},a="mapchange";(null===(i=n.props.location)||void 0===i?void 0:i.hash)=="#"+t.name&&(a+=" active");var o="/map/"+t.map+"#"+t.place;return Object(x.jsx)(A.a,{style:r,title:t.map,to:o,className:a},e)})):""},i.renderSign=function(t,e){return t?t.map((function(t,e){var n={marginLeft:t.x,marginTop:t.y,width:t.width,height:t.height};return Object(x.jsx)("div",{style:n,title:t.message,className:"sign"},e)})):""},i.renderObjectgroups=function(t,e){return Object(x.jsxs)("div",{className:"objectgroups",children:[this.renderSpawn(null===t||void 0===t?void 0:t.spawn),this.renderMapchange(null===t||void 0===t?void 0:t.mapchange),this.renderSign(null===t||void 0===t?void 0:t.signs)]})},i}return Object(d.a)(n,[{key:"render",value:function(){var t=this.props.data,e=this.props.renderObjectgroupsData,n=this.props.zoom||32;if(!t)return"Wrong URL!";e&&v(this.props.data);var i=n*t.width,r=n*t.height;return Object(x.jsxs)("div",{style:{backgroundColor:"white",width:i,height:r,position:"relative"},children:[this.getRowsData(t,n),this.getRowsDataAbove(t,n),e&&Object(x.jsx)("div",{style:{position:"absolute"},children:this.renderObjectgroups(t.objectgroups,n)})]})}}]),n}(r.a.Component),we=function(t){var e=t.data,n=t.layers,i=t.y,r=t.zoom;return e.map((function(t,e){return Object(x.jsx)(Ce,{data:t,layers:n,x:e*r,y:i*r,zoom:r},e)}))},Ce=function(t){var e=t.data,n=t.layers,i=t.x,r=t.y,a=t.zoom;return n.filter((function(t){return t.visible})).filter((function(t){return!t.name.startsWith("walkable")})).map((function(t){return e[t.name]})).filter((function(t){return t})).map((function(t,e){return Object(x.jsx)(ge,{data:t,x:i,y:r,zoom:a},e)}))};function ke(t){return Math.floor(Math.random()*(t+1))}var Ee=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRowsData=function(t,e){var n=t.maps;return n?n.map((function(n,i){var r={position:"absolute",backgroundColor:"green",left:(n.x-t.x)*e,top:(n.y-t.y)*e,width:n.link.width*e,height:n.link.height*e},a={width:n.link.width*e,height:n.link.height*e},o="/map/"+n.id,s="/backgrounds/"+n.id+".jpg";return Object(x.jsx)(w.b,{style:r,title:n.id,to:o,children:Object(x.jsx)("img",{style:a,src:s})},i)})):""},i}return Object(d.a)(n,[{key:"render",value:function(){var t=this.props,e=t.globalMap,n=t.location.pathname.substring("/map/g/".length);n||(n="world1");var i=e.segmentsMap[n];if(!i)return"Wrong URL!";v(i);var r=i.maps.length>100?2:i.maps.length>18?6:i.maps.length>3?8:10,a={position:"relative",height:i.height*r};return Object(x.jsx)("div",{style:a,children:this.getRowsData(i,r)})}}]),n}(r.a.Component),Me=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getSegmentLinks=function(t,e){var n=t.segments;return n?n.map((function(t,n){return wt("/map/g/",t.id,e,t.id+" ("+t.maps.length+")")})):""},i}return Object(d.a)(n,[{key:"render",value:function(){var t=this.props,e=t.data,n=t.globalMap,i=t.location,r=i.pathname.substring("/map/".length);return e?Object(x.jsxs)("div",{children:[Object(x.jsxs)("ul",{className:"hr",children:[Object(x.jsx)("img",{src:"/image/sort_desc.png",style:{float:"left",marginTop:-10},onClick:this.props.toggleExpand}),this.props.expanded&&this.getSegmentLinks(n,i.pathname)]}),Object(x.jsxs)(m.c,{children:[!r&&Object(x.jsx)(Ee,{data:e,globalMap:n}),Object(x.jsx)(y,{path:"/map/g",component:Ee,data:e,globalMap:n}),Object(x.jsx)(ye,{data:e[r],renderObjectgroupsData:"true"})]})]}):"Loading..."}}]),n}(r.a.Component),Re=function(t,e){if(!t)return 0;var n=t.increaseBlockChance,i=t.increaseAttackChance,r=t.increaseAttackCost,a=t.increaseDamageResistance,o=t.increaseAttackDamage,s=t.increaseCriticalSkill,c=t.setCriticalMultiplier,l=t.increaseMaxHP,u=t.increaseMaxAP,d=t.increaseMoveCost,p=t.increaseUseItemCost,h=t.increaseReequipCost;return[3*Math.pow(Math.max(0,n),2.5)+28*n,.4*Math.pow(Math.max(0,i),2.5)-6*Math.pow(Math.abs(Math.min(0,i)),2.7),e?.2*Math.pow(10/r,8)-25*r:-3125*r,1325*a,e?10*Math.pow(Math.max(0,null===o||void 0===o?void 0:o.min),2.5):10*Math.pow(Math.max(0,null===o||void 0===o?void 0:o.min),3)+80*(null===o||void 0===o?void 0:o.min),e?2*Math.pow(Math.max(0,null===o||void 0===o?void 0:o.max),2.1):2*Math.pow(Math.max(0,null===o||void 0===o?void 0:o.max),3)+20*(null===o||void 0===o?void 0:o.max),2.2*Math.pow(s,3),50*Math.pow(Math.max(0,c),2),30*Math.pow(Math.max(0,l),1.2)+70*l,50*Math.pow(Math.max(0,u),3)+750*u,510*Math.pow(Math.max(0,-d),2.5)-350*d,915*Math.pow(Math.max(0,-p),3)-430*p,450*Math.pow(Math.max(0,-h),2)-250*h].reduce((function(t,e){return Math.trunc(t||0)+Math.trunc(e||0)}),0)},Pe=function(t){if(!t)return 0;var e=Ae(t.increaseCurrentHP);if(0==e)return 0;var n=.1*Le(e)*Math.pow(Math.abs(e),2)+3*e;return Math.trunc(n)},Le=function(t){return t>0?1:t<0?-1:0},Ae=function(t){return(((null===t||void 0===t?void 0:t.max)||0)+((null===t||void 0===t?void 0:t.min)||0))/2},De=function(t,e,n){if(!t)return 0;var i=Ae(t.increaseCurrentHP),r=Ae(t.increaseCurrentAP);if(0==i&&0==r)return 0;var a=e*Math.pow(Math.max(0,i),2.5)+450*i,o=n*Math.pow(Math.max(0,r),2.5)+300*r;return Math.trunc(a)+Math.trunc(o)},Se=function(t){return De(t,2770,3100)},Ie=function(t){return De(t,923,1033)},qe=function(t,e){if(t.hasManualPrice)return t.baseMarketCost;var n=Re(t.equipEffect,e),i=Pe(t.useEffect),r=Se(t.hitEffect),a=Ie(t.killEffect);return Math.max(1,n+i+r+a)};function He(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t/100}var Te=function(t){var e,n=t.attackCost,i=t.attackChance,r=t.attackDamage,a=t.criticalSkill,o=t.criticalMultiplier,s=t.blockChance,c=t.damageResistance,l=t.hitEffect,u=t.maxHP,d=t.maxAP,p=r?(r.min+r.max)/2:0,h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1?arguments[1]:void 0;return Math.floor(t/e)}(d,n)*He(i)*p*(1+He(a)*(o||0)),f=u*(1+He(s))+9*(c||0),m=0;return(null===l||void 0===l||null===(e=l.conditionsTarget)||void 0===e?void 0:e.length)&&(m+=50),Math.ceil(.7*(3*h+f))+m},Ve=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getJsonResources=function(t){var e={progress:0};i.getJsonResource(t.loadresource_itemcategories,"itemcategories",e),i.getJsonResource(t.loadresource_items,"items",e),i.getJsonResource(t.loadresource_actorconditions,"actorconditions",e),i.getJsonResource(t.loadresource_monsters,"monsters",e),i.getJsonResource(t.loadresource_droplists,"droplists",e),i.getJsonResource(t.loadresource_conversationlists,"conversations",e)},i.getJsonResource=function(t,e,n){var r=Object(p.a)(i);n.progress+=t.length,t.forEach((function(t){r.getJsonData(t.replace("@","/"),e,r,n)}))},i.countConditions=function(t,e,n){var i,r,a,o=(null===t||void 0===t||null===(i=t.addedConditions)||void 0===i?void 0:i.length)||0;return o+=(null===t||void 0===t||null===(r=t.conditionsTarget)||void 0===r?void 0:r.length)||0,o+=(null===t||void 0===t||null===(a=t.conditionsSource)||void 0===a?void 0:a.length)||0,o+=(null===t||void 0===t?void 0:t.increaseCurrentAP)?1:0,o+=(null===t||void 0===t?void 0:t.increaseCurrentHP)?.9:0},i.linkConditions=function(t,e,n){var r,a,o;null===t||void 0===t||null===(r=t.addedConditions)||void 0===r||r.forEach((function(t){return i.linkCondition(t,e,n,"On source")})),null===t||void 0===t||null===(a=t.conditionsTarget)||void 0===a||a.forEach((function(t){return i.linkCondition(t,e,n,"On target")})),null===t||void 0===t||null===(o=t.conditionsSource)||void 0===o||o.forEach((function(t){return i.linkCondition(t,e,n,"On source")}))},i.getStub=function(t,e,n,i){var r=t.id,a=t.name,o=t.category,s=t.iconID,c=t.displaytype,l=t.rootLink;return{id:r,name:a,category:o,iconID:s,displaytype:c,chance:e.chance,duration:e.duration,magnitude:e.magnitude,type:n,aim:i,rootLink:l}},i.linkCondition=function(t,e,n,r){t.link=i.temp.maps.conditions[t.condition],t.link.links=t.link.links||[];var a=i.getStub(e,t,n,r);t.link.links.push(a)},i.getItemRootLink=function(t){return"use"==t.actionType?"/items/use#":"equip"==t.actionType?"/items/"+t.inventorySlot+"#":"/items/other#"},i.getMonsterRootLink=function(t){var e=t.monsterClass||"other";return t.attackChance||t.maxHP?"/monsters/"+e+"#":t.droplistID?"/npc/merchant#":t.name.charAt(0).toUpperCase()<="G"?"/npc/a-g#":t.name.charAt(0).toUpperCase()<="R"?"/npc/h-r#":"/npc/s-z#"},i.getItemIconBg=function(t){switch(t.displaytype){case"legendary":return-4;case"extraordinary":return-2;case"rare":return-3;case"quest":return-1;default:return 1}},i.getJsonData=function(t,e,n,i){fetch(t+".json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){return t.json()})).then((function(t){n.temp[e]=n.temp[e]||[],n.temp[e]=n.temp[e].concat(t),i.progress--,0==i.progress&&(n.linkTemp(),n.setState(n.temp))}))},i.state={expandedSubMenu:!1},i.temp={},i.toggleExpandSubMenu=i.toggleExpandSubMenu.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"toggleExpandSubMenu",value:function(){this.setState({expandedSubMenu:!this.state.expandedSubMenu})}},{key:"linkTemp",value:function(){var t=this;this.temp.maps={},this.temp.maps.conditions=this.temp.actorconditions.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.categories=this.temp.itemcategories.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.droplists=this.temp.droplists.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.items=this.temp.items.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.monsters=this.temp.monsters.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.conversations=this.temp.conversations.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.spawngroups={},Object.values(this.props.maps).forEach((function(e){var n,i,r,a;e.rootLink="/map/",null===(n=e.objectgroups)||void 0===n||null===(i=n.spawn)||void 0===i||i.forEach((function(n){var i=(n.spawngroup||n.name).toLowerCase();n.link=t.temp.maps.spawngroups[i]||{maps:[],monsters:[]},n.link.key=i,n.link.maps.push(e),t.temp.maps.spawngroups[i]=n.link})),null===(r=e.objectgroups)||void 0===r||null===(a=r.signs)||void 0===a||a.forEach((function(e){var n;e.message=null===(n=t.temp.maps.conversations[e.name])||void 0===n?void 0:n.message}))})),this.temp.items.forEach((function(e,n){t.temp.maps.items[e.id]!=e?(console.warn("More than one item with id '"+e.id+"'"),console.warn(e),t.temp.items.splice(n,1,!1)):(e.displaytype=e.displaytype||"ordinary",e.iconBg=t.getItemIconBg(e),e.categoryLink=t.temp.maps.categories[e.category],e.rootLink=t.getItemRootLink(e.categoryLink),e.baseMarketCost=qe(e,"weapon"==e.categoryLink.inventorySlot),e.conditionsCount=t.countConditions(e.equipEffect)+t.countConditions(e.hitEffect)+t.countConditions(e.hitReceivedEffect)+t.countConditions(e.killEffect)+t.countConditions(e.useEffect),t.linkConditions(e.equipEffect,e,"equipEffect"),t.linkConditions(e.hitEffect,e,"hitEffect"),t.linkConditions(e.hitReceivedEffect,e,"hitReceivedEffect"),t.linkConditions(e.killEffect,e,"killEffect"),t.linkConditions(e.useEffect,e,"useEffect"))})),this.temp.items=this.temp.items.filter((function(t){return t})),this.temp.monsters.forEach((function(e,n){if(t.temp.maps.monsters[e.id]!=e)b((function(){console.warn("More than one monster with id '"+e.id+"'"),console.warn(e)})),t.temp.monsters.splice(n,1,!1);else{var i;e.iconBg=e.unique?-0:1,e.exp=Te(e),e.droplistLink=t.temp.maps.droplists[e.droplistID],e.droplistLink&&(e.droplistLink.links=e.droplistLink.links||[],e.droplistLink.links.push(e)),e.rootLink=t.getMonsterRootLink(e),e.conditionsCount=t.countConditions(e.hitEffect)+t.countConditions(e.hitReceivedEffect)+t.countConditions(e.killEffect),t.linkConditions(e.hitEffect,e,"hitEffect"),t.linkConditions(e.hitReceivedEffect,e,"hitReceivedEffect"),t.linkConditions(e.killEffect,e,"killEffect"),e.spawnGroupLinks=[];var r,a=t.temp.maps.spawngroups[e.id.toLowerCase()];if(a&&(a.monsters.push(e),e.spawnGroupLinks.push(a)),e.spawnGroup&&(null===(i=e.spawnGroup)||void 0===i?void 0:i.toLowerCase())!=e.id.toLowerCase())(a=t.temp.maps.spawngroups[null===(r=e.spawnGroup)||void 0===r?void 0:r.toLowerCase()])&&(a.monsters.push(e),e.spawnGroupLinks.push(a));b((function(){0==e.spawnGroupLinks.length&&(console.warn("Monster have no spawn"),console.warn(e))}))}})),this.temp.monsters=this.temp.monsters.filter((function(t){return t})),this.temp.droplists.forEach((function(e){e.items.forEach((function(n){n.droplist=e,n.link=t.temp.maps.items[n.itemID],n.link.droplists=n.link.droplists||[],n.link.droplists.push(n)}))})),this.temp.actorconditions.forEach((function(t){t.iconBg=1,t.rootLink="/conditions#"})),this.props.globalMap.segments.forEach((function(e){e.rootLink="/map/g/",e.maxY=-9999,e.minY=9999,e.maps.forEach((function(n){n.link=t.props.maps[n.id],n.link.segmentLink&&n.link.segmentLink.id!=e.id?b((function(){console.warn("Map '".concat(n.id,"' lined with 2 segments: ").concat(n.link.segmentLink.id,", ").concat(e.id))})):(n.link.globalMapLink=n,n.link.segmentLink=e),e.maxY=Math.max(e.maxY,n.y+n.link.height),e.minY=Math.min(e.minY,n.y)})),e.height=e.maxY-e.minY})),this.temp.monsters.sort((function(t,e){return t.id.localeCompare(e.id)})),v(this.temp)}},{key:"componentDidMount",value:function(){v(this.props),this.getJsonResources(this.props.resources)}},{key:"render",value:function(){return this.state.items?Object(x.jsxs)("div",{children:[Object(x.jsx)(m.c,{children:Object(x.jsx)(C,{})}),Object(x.jsxs)(m.c,{children:[Object(x.jsx)(m.a,{exact:!0,path:"/",component:E}),Object(x.jsx)(y,{path:"/items",component:Ct,data:this.state.items}),Object(x.jsx)(y,{path:"/conditions",component:Vt,data:this.state.actorconditions}),Object(x.jsx)(y,{path:"/monsters",component:$t,data:this.state.monsters}),Object(x.jsx)(y,{path:"/categories",component:M,data:this.state.itemcategories}),Object(x.jsx)(y,{path:"/npc",component:be,data:this.state.monsters}),Object(x.jsx)(y,{path:"/map",component:Me,data:this.props.maps,globalMap:this.props.globalMap,expanded:this.state.expandedSubMenu,toggleExpand:this.toggleExpandSubMenu})]}),Object(x.jsxs)("div",{className:"signature",children:[Object(x.jsxs)("div",{style:{float:"left"},children:["2021, Powered by ",Object(x.jsx)("a",{href:"https://github.com/reizy/andors-trail-wiki",children:"Reizy"})]}),Object(x.jsx)("div",{style:{float:"right"},children:"Game version 0.7.13"})]})]}):Object(x.jsx)(E,{})}}]),n}(r.a.Component),Ne=n(20),ze=n.n(Ne),Be=n(28);function Fe(t,e){var n={name:e,properties:[],tilesets:[],layers:{},layerList:[],objectgroups:{spawn:[],rests:[],signs:[],keys:[],scripts:[],containers:[],mapchange:[],replaces:[],other:[]}};return"DOCTYPE"==t.name&&(t=t.children[0]),"map"==t.name&&t.children.forEach((function(t){"objectgroup"==t.name?function(t,e){var n,i,r={name:null===t||void 0===t||null===(n=t.attributes)||void 0===n?void 0:n.name};null===(i=t.children)||void 0===i||i.forEach((function(t){var n;if("properties"==t.name)null===(n=t.children)||void 0===n||n.forEach((function(t){var e,n,i=null===(e=t.attributes)||void 0===e?void 0:e.name,a=null===t||void 0===t||null===(n=t.attributes)||void 0===n?void 0:n.value;r[i]=a}));else switch(t.attributes.type){case"spawn":e.objectgroups.spawn.push(function(t,e,n){var i,r,a;Ke(t);var o=Object(s.a)(Object(s.a)(Object(s.a)({},t.attributes),null===(i=t.children[0])||void 0===i?void 0:i.attributes),{},{objectgroup:n,width:t.attributes.width-0,height:t.attributes.height-0,x:t.attributes.x-0,y:t.attributes.y-0});return null===(r=t.children[0])||void 0===r||null===(a=r.children)||void 0===a||a.forEach((function(t){Ue(t,o,["spawngroup","quantity","ignoreAreas","active"]),o[t.attributes.name]=t.attributes.value})),o}(t,0,r));break;case"key":e.objectgroups.keys.push(t);break;case"rest":e.objectgroups.rests.push(t);break;case"sign":e.objectgroups.signs.push(function(t,e,n){return function(t){b((function(){var e;(null===(e=t.children)||void 0===e?void 0:e.length)>0&&(console.warn("More then zero children!"),console.warn(t))}),!0)}(t),Object(s.a)(Object(s.a)({},t.attributes),{},{objectgroup:n,width:t.attributes.width-0,height:t.attributes.height-0,x:t.attributes.x-0,y:t.attributes.y-0})}(t,0,r));break;case"script":e.objectgroups.scripts.push(t);break;case"container":e.objectgroups.containers.push(t);break;case"mapchange":e.objectgroups.mapchange.push(function(t,e,n){var i,r,a;Ke(t);var o=Object(s.a)(Object(s.a)(Object(s.a)({},t.attributes),null===(i=t.children[0])||void 0===i?void 0:i.attributes),{},{objectgroup:n,width:t.attributes.width-0,height:t.attributes.height-0,x:t.attributes.x-0,y:t.attributes.y-0,xxx:t});return null===(r=t.children[0])||void 0===r||null===(a=r.children)||void 0===a||a.forEach((function(t){Ue(t,o,["place","map"]),o[t.attributes.name]=t.attributes.value})),o}(t,0,r));break;case"replace":e.objectgroups.replaces.push(t);break;default:console.warn(e),console.warn(t),e.objectgroups.other.push(t)}}))}(t,n):"layer"==t.name?function(t,e,n){b((function(){return function(t,e,n){e.width&&e.width!=t.attributes.width&&console.warn(n+" has different layers("+e.width+"!="+t.attributes.width+")");e.height&&e.height!=t.attributes.height&&console.warn(n+" has different layers("+e.height+"!="+t.attributes.height+")");e.layers[t.attributes.name]&&console.warn(n+" has several layers: "+t.attributes.name);1!=t.children.length&&console.warn(n+" has multi layer: "+t.attributes.name)}(t,e,n)})),e.layerList.push({name:t.attributes.name.toLowerCase(),visible:"0"!=t.attributes.visible}),e.width=t.attributes.width-0,e.height=t.attributes.height-0;try{var i=t.children[0].value,r=atob(i).split("").map((function(t){return t.charCodeAt(0)})),a=new Uint8Array(r),o=Be.a.inflate(a);e.layers[t.attributes.name.toLowerCase()]=new Uint32Array(o.buffer)}catch(s){console.log(s)}}(t,n,e):"tileset"==t.name?function(t,e,n){var i={height:t.children[0].attributes.height-0,width:t.children[0].attributes.width-0,name:t.attributes.name,firstgid:t.attributes.firstgid-0,tileheight:t.attributes.tileheight-0,tilewidth:t.attributes.tilewidth-0};i.columns=i.width/i.tilewidth,i.tilecount=i.height/i.tileheight*i.columns,e.tilesets.push(i)}(t,n):("properties"==t.name||(console.warn("Custom map section at '"+e+"':"),console.warn(t)),n[t.name].push(t))})),function(t){t.field=[];for(var e=function(e){t.field[e]=[];for(var n=function(n){t.field[e][n]={},t.layerList.forEach((function(i){return function(t,e,n,i){t.layers[e]&&(t.field[i][n][e]=function(t,e,n){if(0==n)return;var i=t.tilesets.find((function(t){return n>=t.firstgid&&n<t.firstgid+t.tilecount}));i||b((function(){return console.warn("No tileset for '"+t.name+"."+e+"' "+n)}));return{id:n,tileset:i,localid:n-(null===i||void 0===i?void 0:i.firstgid)}}(t,e,t.layers[e][i*t.width+n]))}(t,i.name,n,e)}))},i=0;i<t.width;i++)n(i)},n=0;n<t.height;n++)e(n)}(n),n}function Ke(t){b((function(){var e;(null===(e=t.children)||void 0===e?void 0:e.length)>1&&(console.warn("More then one children!"),console.warn(t))}),!0)}function Ue(t,e,n){b((function(){var i;e[t.attributes.name]&&(console.warn("More then one children '"+t.attributes.name+"':"),console.warn(e[t.attributes.name]),console.warn(t)),"property"!=t.name&&(console.warn("Unknown children!"),console.warn(t)),(null===(i=t.children)||void 0===i?void 0:i.length)&&(console.warn("More then zero children!"),console.warn(t)),-1==n.indexOf(t.attributes.name)&&(console.warn("Unknown children!"),console.warn(t)),Object.keys(t.attributes).filter((function(t){return!["name","value","type"].includes(t)})).length&&(console.warn("Unknown children!"),console.warn(t))}),!0)}function _e(t){var e={segments:[],segmentsMap:{}};return t.children.forEach((function(t){var n=function(t){var e={id:t.attributes.id,x:1*t.attributes.x,y:1*t.attributes.y,areas:Ge(t.children)};return e=Object(s.a)(Object(s.a)({},e),function(t,e){var n={maps:[],mapsMap:{}};return t.filter((function(t){return"map"==t.name})).forEach((function(t){var i=Object(s.a)(Object(s.a)({},t.attributes),{},{x:1*t.attributes.x,y:1*t.attributes.y});i.area&&(i.areaLink=e[i.area],i.areaLink.maps=i.areaLink.maps||[],i.areaLink.maps.push(i)),n.maps.push(i),n.mapsMap[t.attributes.id]=i})),n}(t.children,e.areas))}(t);e.segments.push(n),e.segmentsMap[t.attributes.id]=n})),e}function Ge(t){var e={};return t.filter((function(t){return"namedarea"==t.name})).forEach((function(t){e[t.attributes.id]=t.attributes})),e}var Je=function(){var t=Object(i.useState)([]),e=Object(c.a)(t,2),n=e[0],r=e[1],a={maps:{}};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var o=function(t,e){fetch(""+t,{headers:{"Content-Type":"text/xml",Accept:"text/xml"}}).then((function(t){return t.text()})).then((function(t){return t.replace(/<!--.*-->/g,"")})).then(e)},l=function(t){var e=(new ze.a).parseFromString(t).getElementsByTagName("array").reduce((function(t,e){return t[e.attributes.name]=e.children.map((function(t){return t.value})).filter((function(t){return t})),t}),{});a=Object(s.a)(Object(s.a)({},a),{},{resources:e}),p(a,r)},u=function(t,e,n){o(t,(function(t){var i=(new ze.a).parseFromString(t);a.maps[e]=Fe(i,e),n.progress--,0==n.progress&&n.tryDo()}))},d=function(t){o("/xml/worldmap.xml",(function(e){var n=(new ze.a).parseFromString(e);a.globalMap=_e(n),t.progress--,0==t.progress&&t.tryDo()}))},p=function(t,e){var n=t.resources.loadresource_maps,i={progress:n.length+1,tryDo:function(){return e(t)}};d(i),n.forEach((function(t){u(t.replace("@","/")+".tmx",t.replace("@xml/",""),i)}))};return Object(i.useEffect)((function(){o("/values/loadresources.xml",l)}),[]),Object(x.jsx)("div",{className:"App",children:n.resources&&Object(x.jsx)(Ve,{resources:n.resources,maps:n.maps,globalMap:n.globalMap})})},We=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(e){var n=e.getCLS,i=e.getFID,r=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),i(t),r(t),a(t),o(t)}))};o.a.render(Object(x.jsx)(w.a,{children:Object(x.jsx)(Je,{})}),document.getElementById("root")),We()}},[[45,1,2]]]);
//# sourceMappingURL=main.9f7d140a.chunk.js.map
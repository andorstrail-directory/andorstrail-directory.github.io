(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{19:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){},45:function(t,e,n){"use strict";n.r(e);var i=n(1),a=n.n(i),r=n(23),o=n.n(r),s=(n(35),n(8)),c=n(29),l=(n.p,n(36),n(16)),u=n(2),d=n(3),p=n(6),h=n(5),f=n(4),m=n(9);function v(t){g&&console.warn(t)}function b(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(g||e)&&t()}var g=!1,j=n(30),x=n(0),O=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=Object.assign.apply(Object,[{}].concat(n));return a.a.createElement(t,r)},y=function(t){var e=t.component,n=Object(j.a)(t,["component"]);return Object(x.jsx)(m.a,Object(s.a)(Object(s.a)({},n),{},{render:function(t){return O(e,t,n)}}))},w=n(10),C=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("menu",{children:Object(x.jsxs)("ul",{className:"hr",children:[k("items","/body"),k("monsters","/animal"),k("NPC","/merchant"),k("conditions"),k("quests"),k("categories"),k("map")]})})}}]),n}(a.a.Component),k=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="/"+t+e,i=window.location.pathname.toUpperCase().startsWith("/"+t.toUpperCase())?"selected":"";return Object(x.jsx)("li",{className:i,children:Object(x.jsx)(w.b,{to:n.toLowerCase(),children:t.capitalize()})})},E=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{children:"Hello! "})}}]),n}(a.a.Component),M=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["name",function(t){return t.name}],["id",function(t){return t.id}],["size",function(t){return t.size}],["inventorySlot",function(t){return t.inventorySlot}],["actionType",function(t){return t.actionType}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){return Object(x.jsxs)("th",{children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(){var t=this,e=this.props.data;if(!e)return"";this.props.filter&&this.props.filter.length>0&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1})));var n=this.getKeys();return e.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(R,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(p.a)(i)),i.getRowsData=i.getRowsData.bind(Object(p.a)(i)),i.getKeys=i.getKeys.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{children:Object(x.jsxs)("table",{border:"1",children:[Object(x.jsx)("thead",{children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData()})]})})}}]),n}(a.a.Component),R=function(t){return t.keys.map((function(e,n){return Object(x.jsxs)("td",{children:[" ",e[1](t.data)," "]},e[0])}))},L=n(7),P=n.n(L),A=(n(19),n(15)),D={monsters_demon1:{x:64,y:64},monsters_demon2:{x:64,y:64},monsters_hydra1:{x:64,y:64},monsters_cyclops:{x:64,y:96},monsters_bosses_2x2:{x:64,y:64},monsters_giantbasilisk:{x:64,y:64}},S=function(t){return D[t]||{x:32,y:32}},q=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){var t,e=this.props,n=e.data,i=e.prefix,a=e.noBackground,r=this.props.zoom||32,o=(n.rootLink||i)+n.id,c="i"+(new Date-0)+"_"+Math.random(),l=null===(t=n.iconID)||void 0===t?void 0:t.split(":"),u=l[0],d=l[1],p=I(u),h=S(u);h.x=h.x*r/32,h.y=h.y*r/32;var f={width:h.x,height:h.y,overflow:"hidden"};return a||(f=Object(s.a)(Object(s.a)({},f),{},{backgroundImage:'url("/drawable/ui_selections.png")',backgroundRepeat:"no-repeat",backgroundPosition:n.iconBg*h.x+"px 0px",backgroundSize:5*h.x+"px "+h.y+"px"})),Object(x.jsx)("div",{style:{display:"flex"},children:Object(x.jsx)(A.a,{style:f,title:n.displaytype,to:o,id:n.id,children:Object(x.jsx)("img",{id:c,src:p,onLoad:H(d,h,c)})})})}}]),n}(a.a.Component),I=function(t){if(t)return"/drawable/"+t+".png"},H=function(t,e,n){return function(){if(t){var i=document.getElementById(n),a=function(t,e,n){var i=-t%e*n.x;return{x:i,y:(-t*n.y-i)/e}}(t,i.width/e.x,e);i.style="margin: ".concat(a.y,"px 0 0 ").concat(a.x,"px; display: 'block'")}}},V={root:{position:"relative",paddingLeft:"10px",paddingTop:"5px",display:"block",width:"100%",height:"100%",alignItems:"center"}},T=function(t){t.tableManager,t.value,t.onChange,t.isEdit;var e=t.data;t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:V.root,children:Object(x.jsx)(q,{data:e})})},N={root:{position:"relative",padding:"5px 20px",display:"flex",width:"100%",height:"100%"},text:{marginLeft:1,whiteSpace:"nowrap"},aimg:{width:32,height:32,overflow:"hidden"}},B=function(t){return"/drawable/"+(null===t||void 0===t?void 0:t.split(":"))[0]+".png"},z=function(t,e,n){return t+"_"+e+"_"+n},F=function(t,e,n){return function(){var i=document.getElementById(z(t,e,n)),a=function(t,e){var n=null===t||void 0===t?void 0:t.split(":")[1],i=-n%e*32;return{x:i,y:(32*-n-i)/e}}(t,i.width/32);i.style="margin: ".concat(a.y,"px 0 0 ").concat(a.x,"px")}},_=function(t,e,n){return null===e||void 0===e?void 0:e.map(function(t,e){return function(n,i){var a=t;n.chance&&(a+=" ("+n.chance+"%)"),a+=": "+n.link.name+" "+n.magnitude,n.duration&&(a+="x"+n.duration);var r="/conditions#"+n.link.id,o=z(n.link.iconID,e,i);return Object(x.jsx)(A.a,{style:N.aimg,title:a,to:r,children:Object(x.jsx)("img",{id:o,src:B(n.link.iconID),onLoad:F(n.link.iconID,e,i)})},o)}}(t,n))},K=function(t,e,n,i){return e?Object(x.jsx)("span",{style:N.text,title:t+":"+e.min+"-"+e.max,children:n}):""},U=function(t){t.tableManager,t.value,t.onChange,t.isEdit;var e,n,i,r,o,s,c,l,u,d,p=t.data,h=(t.column,t.rowIndex);t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:N.root,children:Object(x.jsxs)(a.a.Fragment,{children:[_("on equip",null===(e=p.equipEffect)||void 0===e?void 0:e.addedConditions,h),_("on hit",null===(n=p.hitEffect)||void 0===n?void 0:n.conditionsTarget,h),_("on hit get",null===(i=p.hitEffect)||void 0===i?void 0:i.conditionsSource,h),K("on hit get",null===(r=p.hitEffect)||void 0===r?void 0:r.increaseCurrentHP,"+HP"),_("on kill",null===(o=p.killEffect)||void 0===o?void 0:o.conditionsSource,h),K("on kill",null===(s=p.killEffect)||void 0===s?void 0:s.increaseCurrentHP,"+HP"),K("on kill",null===(c=p.killEffect)||void 0===c?void 0:c.increaseCurrentAP,"+AP"),_("when hited",null===(l=p.hitReceivedEffect)||void 0===l?void 0:l.conditionsSource,h),_("attaker get",null===(u=p.hitReceivedEffect)||void 0===u?void 0:u.conditionsTarget,h),_("on use",null===(d=p.useEffect)||void 0===d?void 0:d.conditionsSource,h)]})})},J={root:{position:"relative",padding:"0 20px",display:"flex",width:"100%",height:"100%",alignItems:"center"},text:{marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},W=["increaseAttackDamage","increaseAttackCost","increaseAttackChance","increaseBlockChance","increaseCriticalSkill","setCriticalMultiplier","increaseMaxHP","setNonWeaponDamageModifier","increaseMaxAP","increaseDamageResistance","addedConditions","conditionsTarget","increaseMoveCost","increaseUseItemCost","increaseReequipCost","",""],G=["conditionsTarget","conditionsSource","increaseCurrentHP","",""],Q=["conditionsSource","increaseCurrentHP","increaseCurrentAP",""],X=["conditionsSource","conditionsTarget","",""],Y=["conditionsSource","increaseCurrentHP",""],Z=["increaseAttackChance","increaseBlockChance","increaseDamageResistance","increaseAttackDamage","increaseMaxAP","increaseMoveCost","increaseAttackCost","increaseMaxHP","increaseCriticalSkill","increaseUseItemCost","increaseReequipCost","visualEffectID",""],$=["increaseCurrentHP","visualEffectID","increaseCurrentAP","","",""],tt=function(t,e,n){if(!e)return"";var i=Object.keys(e).filter((function(t){return-1==n.indexOf(t)})).map((function(t){return[t,e[t]]}));return i.length>0?t+JSON.stringify(i):""},et=function(t){t.tableManager,t.value,t.onChange,t.isEdit;var e=t.data;t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:J.root,children:Object(x.jsxs)(a.a.Fragment,{children:[tt("On equip:",e.equipEffect,W),tt("On hit:",e.hitEffect,G),tt("On get hit:",e.hitReceivedEffect,X),tt("On kill: ",e.killEffect,Q),tt("On use: ",e.useEffect,Y),tt("",e.abilityEffect,Z),tt("",e.roundEffect,$)]})})},nt={root:{position:"relative",padding:"10px 20px",display:"block",width:"100%",height:"100%",alignItems:"center"},text:{margin:"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},it=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){t.tableManager;var n=t.value,i=(t.onChange,t.isEdit,t.data),a=(t.column,t.rowIndex,t.searchText,t.isFirstEditableCell,{data:i});return e.forEach((function(t){a.data=a.data[t]||{}})),"0"==n?"":a.data.min==a.data.max?Object(x.jsx)("div",{style:nt.root,children:Object(x.jsx)("span",{style:nt.text,children:n})}):Object(x.jsx)("div",{style:nt.root,children:Object(x.jsxs)("span",{style:nt.text,children:[n,"(",a.data.min,"/",a.data.max,")"]})})}},at=function(t,e){if(!t)return 0;var n=t.increaseBlockChance,i=t.increaseAttackChance,a=t.increaseAttackCost,r=t.increaseDamageResistance,o=t.increaseAttackDamage,s=t.increaseCriticalSkill,c=t.setCriticalMultiplier,l=t.increaseMaxHP,u=t.increaseMaxAP,d=t.increaseMoveCost,p=t.increaseUseItemCost,h=t.increaseReequipCost;return[3*Math.pow(Math.max(0,n),2.5)+28*n,.4*Math.pow(Math.max(0,i),2.5)-6*Math.pow(Math.abs(Math.min(0,i)),2.7),e?.2*Math.pow(10/a,8)-25*a:-3125*a,1325*r,e?10*Math.pow(Math.max(0,null===o||void 0===o?void 0:o.min),2.5):10*Math.pow(Math.max(0,null===o||void 0===o?void 0:o.min),3)+80*(null===o||void 0===o?void 0:o.min),e?2*Math.pow(Math.max(0,null===o||void 0===o?void 0:o.max),2.1):2*Math.pow(Math.max(0,null===o||void 0===o?void 0:o.max),3)+20*(null===o||void 0===o?void 0:o.max),2.2*Math.pow(s,3),50*Math.pow(Math.max(0,c),2),30*Math.pow(Math.max(0,l),1.2)+70*l,50*Math.pow(Math.max(0,u),3)+750*u,510*Math.pow(Math.max(0,-d),2.5)-350*d,915*Math.pow(Math.max(0,-p),3)-430*p,450*Math.pow(Math.max(0,-h),2)-250*h].reduce((function(t,e){return Math.trunc(t||0)+Math.trunc(e||0)}),0)},rt=function(t){if(!t)return 0;var e=st(t.increaseCurrentHP);if(0==e)return 0;var n=.1*ot(e)*Math.pow(Math.abs(e),2)+3*e;return Math.trunc(n)},ot=function(t){return t>0?1:t<0?-1:0},st=function(t){return(((null===t||void 0===t?void 0:t.max)||0)+((null===t||void 0===t?void 0:t.min)||0))/2},ct=function(t,e,n){if(!t)return 0;var i=st(t.increaseCurrentHP),a=st(t.increaseCurrentAP);if(0==i&&0==a)return 0;var r=e*Math.pow(Math.max(0,i),2.5)+450*i,o=n*Math.pow(Math.max(0,a),2.5)+300*a;return Math.trunc(r)+Math.trunc(o)},lt=function(t){return ct(t,2770,3100)},ut=function(t){return ct(t,923,1033)},dt=function(t,e){if(t.hasManualPrice)return t.baseMarketCost;var n=at(t.equipEffect,e),i=rt(t.useEffect),a=lt(t.hitEffect),r=ut(t.killEffect);return Math.max(1,n+i+a+r)},pt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["",function(t){return Object(x.jsx)(q,{data:t.monster})}],["Name",function(t){return ft(t.monster)},{textAlign:"left"}],["Quantity",function(t){return mt(t.quantity)}],["Chance",function(t){return t.monster.maxHP?t.chance+"%":"sell"}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){var n=t.length>=2?t[2]:{};return Object(x.jsxs)("th",{style:n,children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(){var t=this,e=this.props.data;if(!e)return"";this.props.filter&&this.props.filter.length>0&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1})));var n=this.getKeys();return e.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(ht,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(p.a)(i)),i.getRowsData=i.getRowsData.bind(Object(p.a)(i)),i.getKeys=i.getKeys.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("table",{style:{width:400},children:[Object(x.jsx)("thead",{style:{display:"none"},children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData()})]})}}]),n}(a.a.Component),ht=function(t){return t.keys.map((function(e,n){var i=e.length>=2?e[2]:{};return Object(x.jsx)("td",{style:i,children:e[1](t.data)},e[0])}))},ft=function(t){var e=t.rootLink+t.id;return Object(x.jsx)("a",{href:e,children:t.name})},mt=function(t){return t.max==t.min?t.max:t.min+"-"+t.max},vt={text:{marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},table:{paddingTop:10,marginLeft:-10}},bt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={expanded:!1},i.toggleExpand=i.toggleExpand.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var t,e,n=this.props.data,i=this.props.value,r=null===(t=n.droplists)||void 0===t||null===(e=t.flatMap((function(t){return gt(t)})))||void 0===e?void 0:e.filter((function(t){return!!t}));return r&&r.length?Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsxs)("div",{style:{display:"flex"},onClick:this.toggleExpand,children:[Object(x.jsx)("img",{src:"../image/sort_desc.png"}),Object(x.jsx)("span",{style:vt.text,children:i})]}),Object(x.jsx)("div",{style:vt.table,children:this.state.expanded&&Object(x.jsx)(pt,{data:r})})]}):Object(x.jsx)(a.a.Fragment,{children:Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)("div",{style:{width:19}}),Object(x.jsx)("span",{style:vt.text,children:i})]})})}}]),n}(a.a.Component),gt=function(t){var e,n,i=[];return null===(e=t.droplist)||void 0===e||null===(n=e.links)||void 0===n||n.forEach((function(e){i.push(Object(s.a)({monster:e},t))})),i},jt={root:{position:"relative",padding:"10px",display:"block",width:"100%",height:"100%",alignItems:"center"}},xt=function(t){t.tableManager;var e=t.value,n=(t.onChange,t.isEdit,t.data);t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:jt.root,children:Object(x.jsx)(bt,{data:n,value:e})})},Ot=function(t){var e=t.a,n=t.b,i=t.isAscending,a=e||"",r=n||"";return a>r?i?1:-1:a<r?i?-1:1:0},yt=function(t){var e=t.a,n=t.b,i=t.isAscending,a=e||0,r=n||0;return a>r?i?1:-1:a<r?i?-1:1:0},wt=function(t){var e=t.a,n=t.b,i=t.isAscending,a=["ordinary","quest","rare","extraordinary","legendary",""],r=a.indexOf(e),o=a.indexOf(n);return r>o?i?1:-1:r<o?i?-1:1:0},Ct=function(){var t=window.location.hash;""!==t&&setTimeout((function(){var e=t.replace("#",""),n=document.getElementById(e);n&&n.scrollIntoView()}),100)},kt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRows=function(){var t=this,e=this.props.data;return this.props.filter&&(e=e.filter((function(e){return t.props.filter(e)}))),e},i.isEmptyColumn=function(t){return!!this.rows.find((function(e){return t(e)}))},i.getColumns=function(){var t=1;return[{id:t++,field:"displaytype",label:"",pinned:!0,cellRenderer:T,sort:wt,width:"50px"},{id:t++,field:"name",label:"Name",pinned:!0,cellRenderer:xt,width:"290px"},{id:t++,field:"equipEffect",label:"Atk Cost",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseAttackCost},sort:yt,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseAttackCost}))},{id:t++,field:"equipEffect",label:"Dmg",getValue:function(t){var e,n,i=t.value;t.column;return(((null===i||void 0===i||null===(e=i.increaseAttackDamage)||void 0===e?void 0:e.min)||0)+((null===i||void 0===i||null===(n=i.increaseAttackDamage)||void 0===n?void 0:n.max)||0))/2},sort:yt,cellRenderer:it("equipEffect","increaseAttackDamage"),width:"135px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseAttackDamage}))},{id:t++,field:"equipEffect",label:"AC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseAttackChance},sort:yt,width:"80px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseAttackChance}))},{id:t++,field:"equipEffect",label:"BC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseBlockChance},sort:yt,width:"80px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseBlockChance}))},{id:t++,field:"equipEffect",label:"Crit",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseCriticalSkill},sort:yt,width:"106px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseCriticalSkill}))},{id:t++,field:"equipEffect",label:"Crit*",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.setCriticalMultiplier},sort:yt,width:"106px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.setCriticalMultiplier}))},{id:t++,field:"equipEffect",label:"MaxHP",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMaxHP},sort:yt,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseMaxHP}))},{id:t++,field:"equipEffect",label:"MaxAP",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMaxAP},sort:yt,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseMaxAP}))},{id:t++,field:"equipEffect",label:"MC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMoveCost},sort:yt,width:"80px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseMoveCost}))},{id:t++,field:"equipEffect",label:"UC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseUseItemCost},sort:yt,width:"80px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseUseItemCost}))},{id:t++,field:"equipEffect",label:"EC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseReequipCost},sort:yt,width:"80px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseReequipCost}))},{id:t++,field:"equipEffect",label:"Dmg*%",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.setNonWeaponDamageModifier},sort:yt,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.setNonWeaponDamageModifier}))},{id:t++,field:"equipEffect",label:"Dmg_res",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseDamageResistance},sort:yt,width:"120px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.equipEffect)||void 0===e?void 0:e.increaseDamageResistance}))},{id:t++,field:"categoryLink",label:"Category",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.name},width:"140px"},{id:t++,field:"equipEffect",label:"Conditions",getValue:function(t){var e=t.value;t.column;return JSON.stringify(null===e||void 0===e?void 0:e.addedConditions)},sort:Ot,width:"150px",cellRenderer:U},{id:t++,field:"baseMarketCost",label:"Price",sort:yt,width:"100px",visible:!0},{id:t++,field:"equipEffect",label:"Other",getValue:function(t){var e=t.value;t.column;return e},width:"100px",sort:Ot,cellRenderer:et,visible:!1}]},i.getColumns=i.getColumns.bind(Object(p.a)(i)),i.getRows=i.getRows.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return P.a.defaultProps.isPaginated=!1,P.a.defaultProps.minColumnResizeWidth=30,P.a.defaultProps.isVirtualScroll=!1,P.a.defaultProps.showSearch=!1,P.a.defaultProps.showColumnVisibilityManager=!1,this.rows=this.getRows(),Object(x.jsx)(P.a,{columns:this.getColumns(),rows:this.rows,onLoad:Ct},this.props.title)}}]),n}(a.a.Component),Et=function(t){var e=t.a,n=t.b,i=t.isAscending,a=e||"",r=n||"";return a>r?i?1:-1:a<r?i?-1:1:0},Mt=function(t){var e=t.a,n=t.b,i=t.isAscending,a=e||0,r=n||0;return a>r?i?1:-1:a<r?i?-1:1:0},Rt=function(t){var e=t.a,n=t.b,i=t.isAscending,a=["ordinary","quest","rare","extraordinary","legendary",""],r=a.indexOf(e),o=a.indexOf(n);return r>o?i?1:-1:r<o?i?-1:1:0},Lt=function(){var t=window.location.hash;""!==t&&setTimeout((function(){var e=t.replace("#",""),n=document.getElementById(e);n&&n.scrollIntoView()}),100)},Pt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRows=function(){var t=this,e=this.props.data;return this.props.filter&&(e=e.filter((function(e){return t.props.filter(e)}))),e},i.getColumns=function(){var t=1;return[{id:t++,field:"displaytype",label:"",pinned:!0,cellRenderer:T,sort:Rt,width:"50px"},{id:t++,field:"name",label:"Name",pinned:!0,cellRenderer:xt,width:"290px"},{id:t++,field:"categoryLink",label:"Category",getValue:function(t){var e=t.value;t.column;return e.name},width:"140px"},{id:t++,field:"useEffect",label:"HP",getValue:function(t){var e,n,i=t.value;t.column;return(((null===i||void 0===i||null===(e=i.increaseCurrentHP)||void 0===e?void 0:e.min)||0)+((null===i||void 0===i||null===(n=i.increaseCurrentHP)||void 0===n?void 0:n.max)||0))/2},sort:Mt,width:"130px",cellRenderer:it("useEffect","increaseCurrentHP")},{id:t++,field:"equipEffect",label:"Conditions",getValue:function(t){var e=t.value;t.column;return JSON.stringify(null===e||void 0===e?void 0:e.addedConditions)},sort:Et,width:"250px",cellRenderer:U},{id:t++,field:"baseMarketCost",label:"Price",getValue:function(t){var e=t.value;t.column;return e?e+" gold":""},sort:Mt,width:"100px",visible:!0},{id:t++,field:"equipEffect",label:"Other",getValue:function(t){var e=t.value;t.column;return e},width:"100px",sort:Et,cellRenderer:et,visible:!1}]},i.getColumns=i.getColumns.bind(Object(p.a)(i)),i.getRows=i.getRows.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return P.a.defaultProps.isPaginated=!1,P.a.defaultProps.minColumnResizeWidth=30,P.a.defaultProps.isVirtualScroll=!1,P.a.defaultProps.showSearch=!1,P.a.defaultProps.showColumnVisibilityManager=!1,this.rows=this.getRows(),Object(x.jsx)(P.a,{columns:this.getColumns(),rows:this.rows,onLoad:Lt},this.props.title)}}]),n}(a.a.Component);function At(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,a=t+e,r=n.toUpperCase()==a.toUpperCase()?"selected":"";return Object(x.jsx)("li",{className:r,children:Object(x.jsx)(w.b,{to:a.toLowerCase(),children:i.capitalize()})},e)}var Dt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return this.props.data?Object(x.jsxs)("div",{children:[Object(x.jsxs)("ul",{className:"hr",children:[At("/items/","body",this.props.location.pathname),At("/items/","weapon",this.props.location.pathname),At("/items/","shield",this.props.location.pathname),At("/items/","head",this.props.location.pathname),At("/items/","feet",this.props.location.pathname),At("/items/","leftring",this.props.location.pathname),At("/items/","neck",this.props.location.pathname),At("/items/","use",this.props.location.pathname),At("/items/","other",this.props.location.pathname)]}),Object(x.jsxs)(m.c,{children:[St("body",this.props.data),St("weapon",this.props.data),St("shield",this.props.data),St("head",this.props.data),St("hand",this.props.data),St("feet",this.props.data),St("neck",this.props.data),St("leftring",this.props.data),Object(x.jsx)(y,{path:"/items/use",component:Pt,data:this.props.data,title:"Usable",filter:function(t){return"use"==t.categoryLink.actionType}}),Object(x.jsx)(y,{path:"/items/other",component:kt,data:this.props.data,title:"Other",filter:function(t){var e;return!(null===(e=t.categoryLink)||void 0===e?void 0:e.actionType)}})]})]}):"Loading..."}}]),n}(a.a.Component),St=function(t,e){var n="/items/"+t;return Object(x.jsx)(y,{path:n,component:kt,data:e,title:t,filter:function(e){return e.categoryLink.inventorySlot==t}})},qt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["",function(t){return Object(x.jsx)(q,{data:t})}],["Name",function(t){return Ht(t)},{textAlign:"left"}],["Type",function(t){return t.type}],["Aim",function(t){return t.aim}],["Chance",function(t){return t.chance?t.chance+"%":""}],["Magnitude",function(t){return t.magnitude+"x"}],["Duration",function(t){return t.duration+" rounds"}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){var n=t.length>=2?t[2]:{};return Object(x.jsxs)("th",{style:n,children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(){var t=this,e=this.props.data;if(!e)return"";this.props.filter&&this.props.filter.length>0&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1})));var n=this.getKeys();return e.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(It,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(p.a)(i)),i.getRowsData=i.getRowsData.bind(Object(p.a)(i)),i.getKeys=i.getKeys.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("table",{style:{width:700},children:[Object(x.jsx)("thead",{style:{display:"none"},children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData()})]})}}]),n}(a.a.Component),It=function(t){return t.keys.map((function(e,n){var i=e.length>=2?e[2]:{};return Object(x.jsx)("td",{style:i,children:e[1](t.data)},e[0])}))},Ht=function(t){var e=t.rootLink+t.id;return Object(x.jsx)("a",{href:e,children:t.name})},Vt={text:{marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},table:{paddingTop:10,marginLeft:-10}},Tt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={expanded:!1},i.toggleExpand=i.toggleExpand.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var t=this.props.data,e=this.props.value,n=t.links;return n&&n.length?Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsxs)("div",{style:{display:"flex"},onClick:this.toggleExpand,children:[Object(x.jsx)("img",{src:"../image/sort_desc.png"}),Object(x.jsx)("span",{style:Vt.text,children:e})]}),Object(x.jsx)("div",{style:Vt.table,children:this.state.expanded&&Object(x.jsx)(qt,{data:n})})]}):Object(x.jsx)(a.a.Fragment,{children:Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)("div",{style:{width:19}}),Object(x.jsx)("span",{style:Vt.text,children:e})]})})}}]),n}(a.a.Component),Nt={root:{position:"relative",padding:"10px 5px 0px",display:"block",width:"100%",height:"100%",alignItems:"center"}},Bt=function(t){t.tableManager;var e=t.value,n=(t.onChange,t.isEdit,t.data);t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:Nt.root,children:Object(x.jsx)(Tt,{data:n,value:e})})},zt={root:{position:"relative",padding:"0 20px",display:"flex",width:"100%",alignItems:"center"},img:{width:32,height:32}},Ft=function(t){t.tableManager;var e=t.value;t.onChange,t.isEdit,t.data,t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:zt.root,children:e&&Object(x.jsx)("img",{style:zt.img,src:"/image/yes.png"})})},_t=function(t){var e=t.a,n=t.b,i=t.isAscending,a=e||0,r=n||0;return a>r?i?1:-1:a<r?i?-1:1:0},Kt=function(){var t=window.location.hash;""!==t&&setTimeout((function(){var e=t.replace("#",""),n=document.getElementById(e);n&&n.scrollIntoView()}),100)},Ut=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRows=function(){var t=this,e=this.props.data;return this.props.filter&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1}))),e},i.isEmptyColumn=function(t){return!!this.rows.find((function(e){return t(e)}))},i.getColumns=function(){var t=1;return[{id:t++,field:"displaytype",label:"",pinned:!0,cellRenderer:T,width:"50px"},{id:t++,field:"name",label:"Name",pinned:!0,cellRenderer:Bt,width:"300px"},{id:t++,field:"category",label:"Category",width:"120px"},{id:t++,field:"isStacking",label:"Stack",cellRenderer:Ft,sort:_t,width:"80px"},{id:t++,field:"abilityEffect",label:"HP",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMaxHP},sort:_t,width:"62px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseMaxHP}))},{id:t++,field:"abilityEffect",label:"AC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseAttackChance},sort:_t,width:"62px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseAttackChance}))},{id:t++,field:"abilityEffect",label:"Dmg",getValue:function(t){var e,n,i=t.value;t.column;return(((null===i||void 0===i||null===(e=i.increaseAttackDamage)||void 0===e?void 0:e.min)||0)+((null===i||void 0===i||null===(n=i.increaseAttackDamage)||void 0===n?void 0:n.max)||0))/2},cellRenderer:it("abilityEffect","increaseAttackDamage"),width:"78px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseAttackDamage}))},{id:t++,field:"abilityEffect",label:"Crit",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseCriticalSkill},sort:_t,width:"70px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseCriticalSkill}))},{id:t++,field:"abilityEffect",label:"BC",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseBlockChance},sort:_t,width:"60px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseBlockChance}))},{id:t++,field:"abilityEffect",label:"Resist",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseDamageResistance},sort:_t,width:"82px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseDamageResistance}))},{id:t++,field:"abilityEffect",label:"AP",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMaxAP},sort:_t,width:"60px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseMaxAP}))},{id:t++,field:"abilityEffect",label:"Atk cost",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseAttackCost},sort:_t,width:"100px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseAttackCost}))},{id:t++,field:"abilityEffect",label:"Move cost",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseMoveCost},sort:_t,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseMoveCost}))},{id:t++,field:"abilityEffect",label:"Use cost",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseUseItemCost},sort:_t,width:"105px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseUseItemCost}))},{id:t++,field:"abilityEffect",label:"Equip cost",getValue:function(t){var e=t.value;t.column;return null===e||void 0===e?void 0:e.increaseReequipCost},sort:_t,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.abilityEffect)||void 0===e?void 0:e.increaseReequipCost}))},{id:t++,field:"roundEffect",label:"Round HP",getValue:function(t){var e,n,i=t.value;t.column;return(((null===i||void 0===i||null===(e=i.increaseCurrentHP)||void 0===e?void 0:e.min)||0)+((null===i||void 0===i||null===(n=i.increaseCurrentHP)||void 0===n?void 0:n.max)||0))/2},cellRenderer:it("roundEffect","increaseCurrentHP"),sort:_t,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.roundEffect)||void 0===e?void 0:e.increaseCurrentHP}))},{id:t++,field:"roundEffect",label:"Round AP",getValue:function(t){var e,n,i=t.value;t.column;return(((null===i||void 0===i||null===(e=i.increaseCurrentAP)||void 0===e?void 0:e.min)||0)+((null===i||void 0===i||null===(n=i.increaseCurrentAP)||void 0===n?void 0:n.max)||0))/2},cellRenderer:it("roundEffect","increaseCurrentAP"),sort:_t,width:"115px",visible:this.isEmptyColumn((function(t){var e;return null===(e=t.roundEffect)||void 0===e?void 0:e.increaseCurrentAP}))},{id:t++,field:"abilityEffect",label:"abilityEffect",getValue:function(t){var e=t.value;t.column;return JSON.stringify(e)},cellRenderer:et,width:"400px",visible:!1},{id:t++,field:"roundEffect",label:"roundEffect",getValue:function(t){var e=t.value;t.column;return JSON.stringify(e)},cellRenderer:et,width:"400px",visible:!1}]},i.getColumns=i.getColumns.bind(Object(p.a)(i)),i.getRows=i.getRows.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return P.a.defaultProps.isPaginated=!1,P.a.defaultProps.minColumnResizeWidth=30,P.a.defaultProps.isVirtualScroll=!1,P.a.defaultProps.showSearch=!1,P.a.defaultProps.showColumnVisibilityManager=!1,this.rows=this.getRows(),Object(x.jsx)(P.a,{columns:this.getColumns(),rows:this.rows,onLoad:Kt},this.props.title)}}]),n}(a.a.Component),Jt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return this.props.data?Object(x.jsxs)("div",{children:["Positive",Object(x.jsx)(Ut,{data:this.props.data.filter((function(t){return t.isPositive}))}),"Negative",Object(x.jsx)(Ut,{data:this.props.data.filter((function(t){return!t.isPositive}))})]}):"Loading..."}}]),n}(a.a.Component),Wt={root:{width:1e3},img:{width:32,height:32,marginTop:-5,marginRight:5},link:{color:"white",textTransform:"capitalize",float:"left",display:"flex",margin:10}},Gt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRowsData=function(t){var e;if(!t)return"";var n=null===t||void 0===t||null===(e=t.flatMap((function(t){return t.maps})))||void 0===e?void 0:e.filter(Qt);return null===n||void 0===n?void 0:n.map((function(e,n){return Object(x.jsxs)(A.a,{to:e.rootLink+e.name+"#"+t[0].key,style:Wt.link,children:[Object(x.jsx)("img",{style:Wt.img,src:"/image/ui_icon_map.png"}),e.name]},n)}))},i.getRowsData=i.getRowsData.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{style:Wt.root,children:this.getRowsData(this.props.data)})}}]),n}(a.a.Component);function Qt(t,e,n){return n.indexOf(t)==e}var Xt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["",function(t){return Object(x.jsx)(q,{data:t.link})}],["Name",function(t){return Zt(t.link)},{textAlign:"left"}],["Quantity",function(t){return $t(t.quantity)}],["Chance",function(t){return t.chance+"%"}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){var n=t.length>=2?t[2]:{};return Object(x.jsxs)("th",{style:n,children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(){var t=this,e=this.props.data;if(!e)return"";this.props.filter&&this.props.filter.length>0&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1})));var n=this.getKeys();return e.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(Yt,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(p.a)(i)),i.getRowsData=i.getRowsData.bind(Object(p.a)(i)),i.getKeys=i.getKeys.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("table",{style:{width:400},children:[Object(x.jsx)("thead",{style:{display:"none"},children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData()})]})}}]),n}(a.a.Component),Yt=function(t){return t.keys.map((function(e,n){var i=e.length>=2?e[2]:{};return Object(x.jsx)("td",{style:i,children:e[1](t.data)},e[0])}))},Zt=function(t){var e=t.rootLink+t.id;return Object(x.jsx)("a",{href:e,children:t.name})},$t=function(t){return t.max==t.min?t.max:t.min+"-"+t.max},te={text:{marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},table:{paddingTop:10,marginLeft:-10}},ee=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={expanded:!1},i.toggleExpand=i.toggleExpand.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var t,e=this.props.data,n=this.props.value,i=null===(t=e.droplistLink)||void 0===t?void 0:t.items,r=e.spawnGroupLinks;return i||r?Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsxs)("div",{style:{display:"flex"},onClick:this.toggleExpand,children:[Object(x.jsx)("img",{src:"../image/sort_desc.png"}),Object(x.jsx)("span",{style:te.text,children:n})]}),Object(x.jsxs)("div",{style:te.table,children:[this.state.expanded&&Object(x.jsx)(Xt,{data:i}),this.state.expanded&&Object(x.jsx)(Gt,{data:r})]})]}):Object(x.jsx)(a.a.Fragment,{children:Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)("div",{style:{width:19}}),Object(x.jsx)("span",{style:te.text,children:n})]})})}}]),n}(a.a.Component),ne={root:{position:"relative",padding:"10px",display:"block",width:"100%",height:"100%",alignItems:"center"}},ie=function(t){t.tableManager;var e=t.value,n=(t.onChange,t.isEdit,t.data);t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:ne.root,children:Object(x.jsx)(ee,{data:n,value:e})})},ae=function(t){var e=t.a,n=t.b,i=t.isAscending,a=e||"",r=n||"";return a>r?i?1:-1:a<r?i?-1:1:0},re=function(t){var e=t.a,n=t.b,i=t.isAscending,a=e||0,r=n||0;return a>r?i?1:-1:a<r?i?-1:1:0},oe=function(){var t=window.location.hash;""!==t&&setTimeout((function(){var e=t.replace("#",""),n=document.getElementById(e);n&&n.scrollIntoView()}),100)},se=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRows=function(){var t=this,e=this.props.data;return this.props.filter&&(e=e.filter((function(e){return t.props.filter(e)}))),e},i.maxIconWidth=function(){return this.rows.map((function(t){return(e=t.iconID,S(null===e||void 0===e?void 0:e.split(":")[0])).x;var e})).reduce((function(t,e){return Math.max(t,e)}),32)+10+"px"},i.getColumns=function(){var t=1;return[{id:t++,field:"unique",label:"",pinned:!0,cellRenderer:T,sort:re,width:this.maxIconWidth()},{id:t++,field:"name",label:"Name",pinned:!0,cellRenderer:ie,width:"300px"},{id:t++,field:"maxHP",label:"HP",sort:re,width:"75px"},{id:t++,field:"attackChance",label:"AC",sort:re,width:"75px"},{id:t++,field:"attackDamage",label:"Dmg",getValue:function(t){var e=t.value;t.column;return(((null===e||void 0===e?void 0:e.min)||0)+((null===e||void 0===e?void 0:e.max)||0))/2},sort:re,cellRenderer:it("attackDamage"),width:"135px"},{id:t++,field:"criticalSkill",label:"Crit",sort:re,width:"85px"},{id:t++,field:"criticalMultiplier",label:"Crit*",sort:re,width:"85px"},{id:t++,field:"blockChance",label:"BC",sort:re,width:"75px"},{id:t++,field:"damageResistance",label:"Dmg res",sort:re,width:"115px"},{id:t++,field:"maxAP",label:"AP",sort:re,width:"75px"},{id:t++,field:"attackCost",label:"Attack Cost",sort:re,width:"135px"},{id:t++,field:"moveCost",label:"Move Cost",sort:re,width:"130px"},{id:t++,field:"moveCost",label:"XP",sort:re,width:"75px"},{id:t++,field:"equipEffect",label:"Conditions",getValue:function(t){var e=t.value;t.column;return JSON.stringify(null===e||void 0===e?void 0:e.addedConditions)},sort:ae,width:"130px",cellRenderer:U}]},i.getColumns=i.getColumns.bind(Object(p.a)(i)),i.getRows=i.getRows.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return P.a.defaultProps.isPaginated=!1,P.a.defaultProps.minColumnResizeWidth=30,P.a.defaultProps.isVirtualScroll=!1,P.a.defaultProps.showSearch=!1,P.a.defaultProps.showColumnVisibilityManager=!1,this.rows=this.getRows(),Object(x.jsx)(P.a,{columns:this.getColumns(),rows:this.rows,onLoad:oe},this.props.title)}}]),n}(a.a.Component),ce=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return this.props.data?Object(x.jsxs)("div",{children:[Object(x.jsxs)("ul",{className:"hr",children:[At("/monsters/","animal",this.props.location.pathname),At("/monsters/","insect",this.props.location.pathname),At("/monsters/","reptile",this.props.location.pathname),At("/monsters/","undead",this.props.location.pathname),At("/monsters/","giant",this.props.location.pathname),At("/monsters/","ghost",this.props.location.pathname),At("/monsters/","construct",this.props.location.pathname),At("/monsters/","humanoid",this.props.location.pathname),At("/monsters/","demon",this.props.location.pathname),At("/monsters/","other",this.props.location.pathname)]}),Object(x.jsxs)(m.c,{children:[le("animal",this.props.data),le("humanoid",this.props.data),le("insect",this.props.data),le("undead",this.props.data),le("giant",this.props.data),le("reptile",this.props.data),le("construct",this.props.data),le("demon",this.props.data),le("ghost",this.props.data),Object(x.jsx)(y,{path:"/monsters/other",component:se,data:this.props.data,title:"Other",filter:function(t){return!t.monsterClass}})]})]}):"Loading..."}}]),n}(a.a.Component),le=function(t,e){var n="/monsters/"+t;return Object(x.jsx)(y,{path:n,component:se,data:e,title:t,filter:function(e){return!(!e.attackChance&&!e.maxHP)&&e.monsterClass==t}})},ue=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getKeys=function(){return[["",function(t){return Object(x.jsx)(q,{data:t.link})}],["Name",function(t){return pe(t.link)},{textAlign:"left"}],["Quantity",function(t){return he(t.quantity)}],["Price",function(t){return fe(t.link,.15)+" gold"},{textAlign:"right"}],["Buy",function(t){return fe(t.link,-.15)+" gold"},{textAlign:"right"}]]},i.getHeader=function(){return this.getKeys().map((function(t,e){var n=t.length>=2?t[2]:{};return Object(x.jsxs)("th",{style:n,children:[" ",t[0]," "]},t[0])}))},i.getRowsData=function(){var t=this,e=this.props.data;if(!e)return"";this.props.filter&&this.props.filter.length>0&&(e=e.filter((function(e){return t.props.filter.indexOf(e.category)>-1})));var n=this.getKeys();return e.map((function(t,e){return Object(x.jsx)("tr",{children:Object(x.jsx)(de,{data:t,keys:n},e)},e)}))},i.getHeader=i.getHeader.bind(Object(p.a)(i)),i.getRowsData=i.getRowsData.bind(Object(p.a)(i)),i.getKeys=i.getKeys.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("table",{style:{width:500},children:[Object(x.jsx)("thead",{style:{display:"none"},children:Object(x.jsx)("tr",{children:this.getHeader()})}),Object(x.jsx)("tbody",{children:this.getRowsData()})]})}}]),n}(a.a.Component),de=function(t){return t.keys.map((function(e,n){var i=e.length>=2?e[2]:{};return Object(x.jsx)("td",{style:i,children:e[1](t.data)},e[0])}))},pe=function(t){var e=t.rootLink+t.id;return Object(x.jsx)("a",{href:e,children:t.name})},he=function(t){return t.max==t.min?t.max:t.min+"-"+t.max},fe=function(t,e){var n=t.baseMarketCost;return n+Math.trunc(n*e)},me={text:{marginLeft:10,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},table:{paddingTop:10,marginLeft:-10}},ve=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).state={expanded:!1},i.toggleExpand=i.toggleExpand.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var t,e=this.props.data,n=this.props.value,i=null===(t=e.droplistLink)||void 0===t?void 0:t.items;return i?Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsxs)("div",{style:{display:"flex"},onClick:this.toggleExpand,children:[Object(x.jsx)("img",{src:"../image/sort_desc.png"}),Object(x.jsx)("span",{style:me.text,children:n})]}),Object(x.jsx)("div",{style:me.table,children:this.state.expanded&&Object(x.jsx)(ue,{data:i})})]}):Object(x.jsx)(a.a.Fragment,{children:Object(x.jsxs)("div",{style:{display:"flex"},children:[Object(x.jsx)("div",{style:{width:19}}),Object(x.jsx)("span",{style:me.text,children:n})]})})}}]),n}(a.a.Component),be={root:{position:"relative",padding:"10px",display:"block",width:"100%",height:"100%",alignItems:"center"}},ge=function(t){t.tableManager;var e=t.value,n=(t.onChange,t.isEdit,t.data);t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{style:be.root,children:Object(x.jsx)(ve,{data:n,value:e})})};function je(t,e,n){return n.indexOf(t)==e}var xe=function(t){var e;if(!t)return"";var n=null===t||void 0===t||null===(e=t.flatMap((function(t){return t.maps})))||void 0===e?void 0:e.filter(je);return null===n||void 0===n?void 0:n.map((function(e,n){var i=e.rootLink+e.name+"#"+t[0].key;return Object(x.jsx)(A.a,{to:i,className:"nps-location-cell",children:e.name},n)}))},Oe=function(t){t.tableManager,t.value,t.onChange,t.isEdit;var e=t.data;t.column,t.rowIndex,t.searchText,t.isFirstEditableCell;return Object(x.jsx)("div",{children:xe(e.spawnGroupLinks)})},ye=function(t){var e,n,i,a,r=t.a,o=t.b,s=t.isAscending,c=(null===(e=r[0])||void 0===e?void 0:e.maps)&&(null===(n=r[0].maps[0])||void 0===n?void 0:n.name)||"",l=(null===(i=o[0])||void 0===i?void 0:i.maps)&&(null===(a=o[0].maps[0])||void 0===a?void 0:a.name)||"";return c>l?s?1:-1:c<l?s?-1:1:0},we=function(t){var e=t.a,n=t.b,i=t.isAscending,a=e||0,r=n||0;return a>r?i?1:-1:a<r?i?-1:1:0},Ce=function(){var t=window.location.hash;""!==t&&setTimeout((function(){var e=t.replace("#",""),n=document.getElementById(e);n&&n.scrollIntoView()}),100)},ke=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRows=function(){var t=this,e=this.props.data;return this.props.filter&&(e=e.filter((function(e){return t.props.filter(e)}))),e},i.getColumns=function(){var t=1;return[{id:t++,field:"unique",label:"",pinned:!0,cellRenderer:T,sort:we,width:"50px"},{id:t++,field:"name",label:"Name",pinned:!0,cellRenderer:ge,width:"300px"},{id:t++,field:"spawnGroupLinks",label:"Locations",sort:ye,cellRenderer:Oe,width:"300px"}]},i.getColumns=i.getColumns.bind(Object(p.a)(i)),i.getRows=i.getRows.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"render",value:function(){return P.a.defaultProps.isPaginated=!1,P.a.defaultProps.minColumnResizeWidth=30,P.a.defaultProps.isVirtualScroll=!1,P.a.defaultProps.showSearch=!1,P.a.defaultProps.showColumnVisibilityManager=!1,Object(x.jsx)(P.a,{columns:this.getColumns(),rows:this.getRows(),onLoad:Ce})}}]),n}(a.a.Component),Ee=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){return this.props.data?Object(x.jsxs)("div",{children:[Object(x.jsxs)("ul",{className:"hr",children:[At("/npc/","merchant",this.props.location.pathname),At("/npc/","A-G",this.props.location.pathname),At("/npc/","H-R",this.props.location.pathname),At("/npc/","S-Z",this.props.location.pathname)]}),Object(x.jsxs)(m.c,{children:[Object(x.jsx)(y,{path:"/npc/a-g",component:ke,data:this.props.data,title:"NPC",filter:function(t){return"/npc/a-g#"==t.rootLink}}),Object(x.jsx)(y,{path:"/npc/h-r",component:ke,data:this.props.data,title:"NPC",filter:function(t){return"/npc/h-r#"==t.rootLink}}),Object(x.jsx)(y,{path:"/npc/s-z",component:ke,data:this.props.data,title:"NPC",filter:function(t){return"/npc/s-z#"==t.rootLink}}),Object(x.jsx)(y,{path:"/npc/merchant",component:ke,data:this.props.data,title:"Merchant",filter:function(t){return"/npc/merchant#"==t.rootLink}})]})]}):"Loading..."}}]),n}(a.a.Component),Me=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){return Object(u.a)(this,n),e.call(this,t)}return Object(d.a)(n,[{key:"render",value:function(){var t=this.props,e=t.data,n=t.zoom,i=e.tileset;if(!i)return Object(x.jsx)("div",{style:{position:"absolute",top:this.props.y,left:this.props.x,width:32,height:32,backgroundColor:"red",opacity:.5}});var a=i.name,r=e.localid,o=Re(a),s=i.tilewidth*n/32,c=i.tileheight*n/32,l=Le(r,i,s,c,n),u={margin:"".concat(l.y,"px 0 0 ").concat(l.x,"px"),width:"".concat(l.w,"px"),display:"block"};return Object(x.jsx)("div",{style:{width:"".concat(s,"px"),height:"".concat(c,"px"),overflow:"hidden",position:"absolute",left:this.props.x,top:this.props.y},children:Object(x.jsx)("img",{src:o,style:u})})}}]),n}(a.a.Component),Re=function(t){if(t)return"/drawable/"+t+".png"},Le=function(t,e,n,i,a){var r=e.width*a/32,o=e.width/e.tilewidth,s=-t%o*n;return{x:s,y:(-t*i-s)/o,w:r}},Pe=function(t,e){return t=t.spawngroup||t.name||"",e=e.spawngroup||e.name||"",t.localeCompare(e)},Ae=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRowsData=function(t,e){var n=t.field;if(!n)return"";var i=t.layerList.map((function(t){return t.name})).indexOf("above"),a=t.layerList.filter((function(t,e){return e<i}));return n.map((function(t,n){return Object(x.jsx)(De,{data:t,layers:a,y:n,zoom:e},n)}))},i.getRowsDataAbove=function(t,e){var n=t.field;if(!n)return"";var i=t.layerList.map((function(t){return t.name})).indexOf("above"),a=t.layerList.filter((function(t,e){return e>=i}));return n.map((function(t,n){return Object(x.jsx)(De,{data:t,layers:a,y:n,zoom:e},n)}))},i.renderSpawn=function(t,e){var n=this;if(!t)return"";var i=0;return t.sort(Pe).map((function(t){var a,r=t.link;if(!r)return"";var o="mapspawn",s=null===(a=n.props.location)||void 0===a?void 0:a.hash;s!="#"+t.name&&s!="#"+t.spawngroup||(o+=" active");for(var c=(t.quantity||1)-0,l=[],u=0;u<c;u++){i++;var d={marginLeft:t.x+qe(t.width-32),marginTop:t.y+qe(t.height-32)},p=r.monsters[i%r.monsters.length];l.push(Object(x.jsx)("div",{style:d,className:o,title:p.name,children:Object(x.jsx)(q,{data:p,zoom:e,noBackground:"true"})},i))}return l}))},i.renderMapchange=function(t,e){var n=this;return t?t.map((function(t,e){var i,a={marginLeft:t.x,marginTop:t.y,width:t.width,height:t.height},r="mapchange";(null===(i=n.props.location)||void 0===i?void 0:i.hash)=="#"+t.name&&(r+=" active");var o="/map/"+t.map+"#"+t.place;return Object(x.jsx)(A.a,{style:a,title:t.map,to:o,className:r},e)})):""},i.renderSign=function(t,e){return t?t.map((function(t,e){var n={marginLeft:t.x,marginTop:t.y,width:t.width,height:t.height};return Object(x.jsx)("div",{style:n,title:t.message,className:"sign"},e)})):""},i.renderObjectgroups=function(t,e){return Object(x.jsxs)("div",{className:"objectgroups",children:[this.renderSpawn(null===t||void 0===t?void 0:t.spawn),this.renderMapchange(null===t||void 0===t?void 0:t.mapchange),this.renderSign(null===t||void 0===t?void 0:t.signs)]})},i}return Object(d.a)(n,[{key:"render",value:function(){var t=this.props.data,e=this.props.renderObjectgroupsData,n=this.props.zoom||32;if(!t)return"Wrong URL!";e&&v(this.props.data);var i=n*t.width,a=n*t.height;return Object(x.jsxs)("div",{style:{backgroundColor:"white",width:i,height:a,position:"relative"},children:[this.getRowsData(t,n),this.getRowsDataAbove(t,n),e&&Object(x.jsx)("div",{style:{position:"absolute"},children:this.renderObjectgroups(t.objectgroups,n)})]})}}]),n}(a.a.Component),De=function(t){var e=t.data,n=t.layers,i=t.y,a=t.zoom;return e.map((function(t,e){return Object(x.jsx)(Se,{data:t,layers:n,x:e*a,y:i*a,zoom:a},e)}))},Se=function(t){var e=t.data,n=t.layers,i=t.x,a=t.y,r=t.zoom;return n.filter((function(t){return t.visible})).filter((function(t){return!t.name.startsWith("walkable")})).map((function(t){return e[t.name]})).filter((function(t){return t})).map((function(t,e){return Object(x.jsx)(Me,{data:t,x:i,y:a,zoom:r},e)}))};function qe(t){return Math.floor(Math.random()*(t+1))}var Ie=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getRowsData=function(t,e){var n=t.maps;return n?n.map((function(n,i){var a={position:"absolute",backgroundColor:"green",left:(n.x-t.x)*e,top:(n.y-t.y)*e,width:n.link.width*e,height:n.link.height*e},r={width:n.link.width*e,height:n.link.height*e},o="/map/"+n.id,s="/backgrounds/"+n.id+".jpg";return Object(x.jsx)(w.b,{style:a,title:n.id,to:o,children:Object(x.jsx)("img",{style:r,src:s})},i)})):""},i}return Object(d.a)(n,[{key:"render",value:function(){var t=this.props,e=t.globalMap,n=t.location.pathname.substring("/map/g/".length);n||(n="world1");var i=e.segmentsMap[n];if(!i)return"Wrong URL!";v(i);var a=i.maps.length>100?2:i.maps.length>18?6:i.maps.length>3?8:10;return Object(x.jsx)("div",{style:{position:"relative"},children:this.getRowsData(i,a)})}}]),n}(a.a.Component),He=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getSegmentLinks=function(t,e){var n=t.segments;return n?n.map((function(t,n){return At("/map/g/",t.id,e,t.id+" ("+t.maps.length+")")})):""},i.state={expanded:!1},i.toggleExpand=i.toggleExpand.bind(Object(p.a)(i)),i}return Object(d.a)(n,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var t=this.props,e=t.data,n=t.globalMap,i=t.location,a=i.pathname.substring("/map/".length);return e?Object(x.jsxs)("div",{children:[Object(x.jsxs)("ul",{className:"hr",onClick:this.toggleExpand,children:[Object(x.jsx)("img",{src:"../image/sort_desc.png",style:{float:"left",marginTop:-10}}),this.state.expanded&&this.getSegmentLinks(n,i.pathname)]}),Object(x.jsxs)(m.c,{children:[!a&&Object(x.jsx)(Ie,{data:e,globalMap:n}),Object(x.jsx)(y,{path:"/map/g",component:Ie,data:e,globalMap:n}),Object(x.jsx)(Ae,{data:e[a],renderObjectgroupsData:"true"})]})]}):"Loading..."}}]),n}(a.a.Component),Ve=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(u.a)(this,n),(i=e.call(this,t)).getJsonResources=function(t){var e={progress:0};i.getJsonResource(t.loadresource_itemcategories,"itemcategories",e),i.getJsonResource(t.loadresource_items,"items",e),i.getJsonResource(t.loadresource_actorconditions,"actorconditions",e),i.getJsonResource(t.loadresource_monsters,"monsters",e),i.getJsonResource(t.loadresource_droplists,"droplists",e),i.getJsonResource(t.loadresource_conversationlists,"conversations",e)},i.getJsonResource=function(t,e,n){var a=Object(p.a)(i);n.progress+=t.length,t.forEach((function(t){a.getJsonData(t.replace("@","/"),e,a,n)}))},i.linkConditions=function(t,e,n){var a,r,o;null===t||void 0===t||null===(a=t.addedConditions)||void 0===a||a.forEach((function(t){return i.linkCondition(t,e,n,"On source")})),null===t||void 0===t||null===(r=t.conditionsTarget)||void 0===r||r.forEach((function(t){return i.linkCondition(t,e,n,"On target")})),null===t||void 0===t||null===(o=t.conditionsSource)||void 0===o||o.forEach((function(t){return i.linkCondition(t,e,n,"On source")}))},i.getStub=function(t,e,n,i){var a=t.id,r=t.name,o=t.category,s=t.iconID,c=t.displaytype,l=t.rootLink;return{id:a,name:r,category:o,iconID:s,displaytype:c,chance:e.chance,duration:e.duration,magnitude:e.magnitude,type:n,aim:i,rootLink:l}},i.linkCondition=function(t,e,n,a){t.link=i.temp.maps.conditions[t.condition],t.link.links=t.link.links||[];var r=i.getStub(e,t,n,a);t.link.links.push(r)},i.getItemRootLink=function(t){return"use"==t.actionType?"/items/use#":"equip"==t.actionType?"/items/"+t.inventorySlot+"#":"/items/other#"},i.getMonsterRootLink=function(t){return t.attackChance||t.maxHP?"/monsters/"+t.monsterClass+"#":t.droplistID?"/npc/merchant#":t.name.charAt(0).toUpperCase()<="G"?"/npc/a-g#":t.name.charAt(0).toUpperCase()<="R"?"/npc/h-r#":"/npc/s-z#"},i.getItemIconBg=function(t){switch(t.displaytype){case"legendary":return-4;case"extraordinary":return-2;case"rare":return-3;case"quest":return-1;default:return 1}},i.getJsonData=function(t,e,n,i){fetch(t+".json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){return t.json()})).then((function(t){n.temp[e]=n.temp[e]||[],n.temp[e]=n.temp[e].concat(t),i.progress--,0==i.progress&&(n.linkTemp(),n.setState(n.temp))}))},i.state={},i.temp={},i}return Object(d.a)(n,[{key:"linkTemp",value:function(){var t=this;this.temp.maps={},this.temp.maps.conditions=this.temp.actorconditions.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.categories=this.temp.itemcategories.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.droplists=this.temp.droplists.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.items=this.temp.items.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.monsters=this.temp.monsters.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.conversations=this.temp.conversations.reduce((function(t,e){return Object.assign(t,Object(l.a)({},e.id,e))}),{}),this.temp.maps.spawngroups={},Object.values(this.props.maps).forEach((function(e){var n,i,a,r;e.rootLink="/map/",null===(n=e.objectgroups)||void 0===n||null===(i=n.spawn)||void 0===i||i.forEach((function(n){var i=(n.spawngroup||n.name).toLowerCase();n.link=t.temp.maps.spawngroups[i]||{maps:[],monsters:[]},n.link.key=i,n.link.maps.push(e),t.temp.maps.spawngroups[i]=n.link})),null===(a=e.objectgroups)||void 0===a||null===(r=a.signs)||void 0===r||r.forEach((function(e){var n;e.message=null===(n=t.temp.maps.conversations[e.name])||void 0===n?void 0:n.message}))})),this.temp.items.forEach((function(e,n){t.temp.maps.items[e.id]!=e?(console.warn("More than one item with id '"+e.id+"'"),console.warn(e),t.temp.items.splice(n,1,!1)):(e.displaytype=e.displaytype||"ordinary",e.iconBg=t.getItemIconBg(e),e.categoryLink=t.temp.maps.categories[e.category],e.rootLink=t.getItemRootLink(e.categoryLink),e.baseMarketCost=dt(e,"weapon"==e.categoryLink.inventorySlot),t.linkConditions(e.equipEffect,e,"equipEffect"),t.linkConditions(e.hitEffect,e,"hitEffect"),t.linkConditions(e.hitReceivedEffect,e,"hitReceivedEffect"),t.linkConditions(e.killEffect,e,"killEffect"),t.linkConditions(e.useEffect,e,"useEffect"))})),this.temp.items=this.temp.items.filter((function(t){return t})),this.temp.monsters.forEach((function(e,n){if(t.temp.maps.monsters[e.id]!=e)b((function(){console.warn("More than one monster with id '"+e.id+"'"),console.warn(e)})),t.temp.monsters.splice(n,1,!1);else{var i;e.iconBg=e.unique?-0:1,e.droplistLink=t.temp.maps.droplists[e.droplistID],e.droplistLink&&(e.droplistLink.links=e.droplistLink.links||[],e.droplistLink.links.push(e)),e.rootLink=t.getMonsterRootLink(e),t.linkConditions(e.hitEffect,e,"hitEffect"),t.linkConditions(e.hitReceivedEffect,e,"hitReceivedEffect"),t.linkConditions(e.killEffect,e,"killEffect"),e.spawnGroupLinks=[];var a,r=t.temp.maps.spawngroups[e.id.toLowerCase()];if(r&&(r.monsters.push(e),e.spawnGroupLinks.push(r)),e.spawnGroup&&(null===(i=e.spawnGroup)||void 0===i?void 0:i.toLowerCase())!=e.id.toLowerCase())(r=t.temp.maps.spawngroups[null===(a=e.spawnGroup)||void 0===a?void 0:a.toLowerCase()])&&(r.monsters.push(e),e.spawnGroupLinks.push(r));b((function(){0==e.spawnGroupLinks.length&&(console.warn("Monster have no spawn"),console.warn(e))}))}})),this.temp.monsters=this.temp.monsters.filter((function(t){return t})),this.temp.droplists.forEach((function(e){e.items.forEach((function(n){n.droplist=e,n.link=t.temp.maps.items[n.itemID],n.link.droplists=n.link.droplists||[],n.link.droplists.push(n)}))})),this.temp.actorconditions.forEach((function(t){t.iconBg=1,t.rootLink="/conditions#"})),this.props.globalMap.segments.forEach((function(e){e.rootLink="/map/g/",e.maps.forEach((function(n){n.link=t.props.maps[n.id],n.link.segmentLink&&n.link.segmentLink.id!=e.id?b((function(){console.warn("Map '".concat(n.id,"' lined with 2 segments: ").concat(n.link.segmentLink.id,", ").concat(e.id))})):(n.link.globalMapLink=n,n.link.segmentLink=e)}))})),this.temp.monsters.sort((function(t,e){return t.name.localeCompare(e.name)})),v(this.temp)}},{key:"componentDidMount",value:function(){v(this.props),this.getJsonResources(this.props.resources)}},{key:"render",value:function(){return this.state.items?Object(x.jsxs)("div",{children:[Object(x.jsx)(m.c,{children:Object(x.jsx)(C,{})}),Object(x.jsxs)(m.c,{children:[Object(x.jsx)(m.a,{exact:!0,path:"/",component:E}),Object(x.jsx)(y,{path:"/items",component:Dt,data:this.state.items}),Object(x.jsx)(y,{path:"/conditions",component:Jt,data:this.state.actorconditions}),Object(x.jsx)(y,{path:"/monsters",component:ce,data:this.state.monsters}),Object(x.jsx)(y,{path:"/categories",component:M,data:this.state.itemcategories}),Object(x.jsx)(y,{path:"/npc",component:Ee,data:this.state.monsters}),Object(x.jsx)(y,{path:"/map",component:He,data:this.props.maps,globalMap:this.props.globalMap})]})]}):Object(x.jsx)(E,{})}}]),n}(a.a.Component),Te=n(20),Ne=n.n(Te),Be=n(28);function ze(t,e){var n={name:e,properties:[],tilesets:[],layers:{},layerList:[],objectgroups:{spawn:[],rests:[],signs:[],keys:[],scripts:[],containers:[],mapchange:[],replaces:[],other:[]}};return"DOCTYPE"==t.name&&(t=t.children[0]),"map"==t.name&&t.children.forEach((function(t){"objectgroup"==t.name?function(t,e){var n,i,a={name:null===t||void 0===t||null===(n=t.attributes)||void 0===n?void 0:n.name};null===(i=t.children)||void 0===i||i.forEach((function(t){var n;if("properties"==t.name)null===(n=t.children)||void 0===n||n.forEach((function(t){var e,n,i=null===(e=t.attributes)||void 0===e?void 0:e.name,r=null===t||void 0===t||null===(n=t.attributes)||void 0===n?void 0:n.value;a[i]=r}));else switch(t.attributes.type){case"spawn":e.objectgroups.spawn.push(function(t,e,n){var i,a,r;Fe(t);var o=Object(s.a)(Object(s.a)(Object(s.a)({},t.attributes),null===(i=t.children[0])||void 0===i?void 0:i.attributes),{},{objectgroup:n,width:t.attributes.width-0,height:t.attributes.height-0,x:t.attributes.x-0,y:t.attributes.y-0});return null===(a=t.children[0])||void 0===a||null===(r=a.children)||void 0===r||r.forEach((function(t){_e(t,o,["spawngroup","quantity","ignoreAreas","active"]),o[t.attributes.name]=t.attributes.value})),o}(t,0,a));break;case"key":e.objectgroups.keys.push(t);break;case"rest":e.objectgroups.rests.push(t);break;case"sign":e.objectgroups.signs.push(function(t,e,n){return function(t){b((function(){var e;(null===(e=t.children)||void 0===e?void 0:e.length)>0&&(console.warn("More then zero children!"),console.warn(t))}),!0)}(t),Object(s.a)(Object(s.a)({},t.attributes),{},{objectgroup:n,width:t.attributes.width-0,height:t.attributes.height-0,x:t.attributes.x-0,y:t.attributes.y-0})}(t,0,a));break;case"script":e.objectgroups.scripts.push(t);break;case"container":e.objectgroups.containers.push(t);break;case"mapchange":e.objectgroups.mapchange.push(function(t,e,n){var i,a,r;Fe(t);var o=Object(s.a)(Object(s.a)(Object(s.a)({},t.attributes),null===(i=t.children[0])||void 0===i?void 0:i.attributes),{},{objectgroup:n,width:t.attributes.width-0,height:t.attributes.height-0,x:t.attributes.x-0,y:t.attributes.y-0,xxx:t});return null===(a=t.children[0])||void 0===a||null===(r=a.children)||void 0===r||r.forEach((function(t){_e(t,o,["place","map"]),o[t.attributes.name]=t.attributes.value})),o}(t,0,a));break;case"replace":e.objectgroups.replaces.push(t);break;default:console.warn(e),console.warn(t),e.objectgroups.other.push(t)}}))}(t,n):"layer"==t.name?function(t,e,n){b((function(){return function(t,e,n){e.width&&e.width!=t.attributes.width&&console.warn(n+" has different layers("+e.width+"!="+t.attributes.width+")");e.height&&e.height!=t.attributes.height&&console.warn(n+" has different layers("+e.height+"!="+t.attributes.height+")");e.layers[t.attributes.name]&&console.warn(n+" has several layers: "+t.attributes.name);1!=t.children.length&&console.warn(n+" has multi layer: "+t.attributes.name)}(t,e,n)})),e.layerList.push({name:t.attributes.name.toLowerCase(),visible:"0"!=t.attributes.visible}),e.width=t.attributes.width-0,e.height=t.attributes.height-0;try{var i=t.children[0].value,a=atob(i).split("").map((function(t){return t.charCodeAt(0)})),r=new Uint8Array(a),o=Be.a.inflate(r);e.layers[t.attributes.name.toLowerCase()]=new Uint32Array(o.buffer)}catch(s){console.log(s)}}(t,n,e):"tileset"==t.name?function(t,e,n){var i={height:t.children[0].attributes.height-0,width:t.children[0].attributes.width-0,name:t.attributes.name,firstgid:t.attributes.firstgid-0,tileheight:t.attributes.tileheight-0,tilewidth:t.attributes.tilewidth-0};i.columns=i.width/i.tilewidth,i.tilecount=i.height/i.tileheight*i.columns,e.tilesets.push(i)}(t,n):("properties"==t.name||(console.warn("Custom map section at '"+e+"':"),console.warn(t)),n[t.name].push(t))})),function(t){t.field=[];for(var e=function(e){t.field[e]=[];for(var n=function(n){t.field[e][n]={},t.layerList.forEach((function(i){return function(t,e,n,i){t.layers[e]&&(t.field[i][n][e]=function(t,e,n){if(0==n)return;var i=t.tilesets.find((function(t){return n>=t.firstgid&&n<t.firstgid+t.tilecount}));i||b((function(){return console.warn("No tileset for '"+t.name+"."+e+"' "+n)}));return{id:n,tileset:i,localid:n-(null===i||void 0===i?void 0:i.firstgid)}}(t,e,t.layers[e][i*t.width+n]))}(t,i.name,n,e)}))},i=0;i<t.width;i++)n(i)},n=0;n<t.height;n++)e(n)}(n),n}function Fe(t){b((function(){var e;(null===(e=t.children)||void 0===e?void 0:e.length)>1&&(console.warn("More then one children!"),console.warn(t))}),!0)}function _e(t,e,n){b((function(){var i;e[t.attributes.name]&&(console.warn("More then one children '"+t.attributes.name+"':"),console.warn(e[t.attributes.name]),console.warn(t)),"property"!=t.name&&(console.warn("Unknown children!"),console.warn(t)),(null===(i=t.children)||void 0===i?void 0:i.length)&&(console.warn("More then zero children!"),console.warn(t)),-1==n.indexOf(t.attributes.name)&&(console.warn("Unknown children!"),console.warn(t)),Object.keys(t.attributes).filter((function(t){return!["name","value","type"].includes(t)})).length&&(console.warn("Unknown children!"),console.warn(t))}),!0)}function Ke(t){var e={segments:[],segmentsMap:{}};return t.children.forEach((function(t){var n=function(t){var e={id:t.attributes.id,x:1*t.attributes.x,y:1*t.attributes.y,areas:Ue(t.children)};return e=Object(s.a)(Object(s.a)({},e),function(t,e){var n={maps:[],mapsMap:{}};return t.filter((function(t){return"map"==t.name})).forEach((function(t){var i=Object(s.a)(Object(s.a)({},t.attributes),{},{x:1*t.attributes.x,y:1*t.attributes.y});i.area&&(i.areaLink=e[i.area],i.areaLink.maps=i.areaLink.maps||[],i.areaLink.maps.push(i)),n.maps.push(i),n.mapsMap[t.attributes.id]=i})),n}(t.children,e.areas))}(t);e.segments.push(n),e.segmentsMap[t.attributes.id]=n})),e}function Ue(t){var e={};return t.filter((function(t){return"namedarea"==t.name})).forEach((function(t){e[t.attributes.id]=t.attributes})),e}var Je=function(){var t=Object(i.useState)([]),e=Object(c.a)(t,2),n=e[0],a=e[1],r={maps:{}};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var o=function(t,e){fetch(""+t,{headers:{"Content-Type":"text/xml",Accept:"text/xml"}}).then((function(t){return t.text()})).then((function(t){return t.replace(/<!--.*-->/g,"")})).then(e)},l=function(t){var e=(new Ne.a).parseFromString(t).getElementsByTagName("array").reduce((function(t,e){return t[e.attributes.name]=e.children.map((function(t){return t.value})).filter((function(t){return t})),t}),{});r=Object(s.a)(Object(s.a)({},r),{},{resources:e}),p(r,a)},u=function(t,e,n){o(t,(function(t){var i=(new Ne.a).parseFromString(t);r.maps[e]=ze(i,e),n.progress--,0==n.progress&&n.tryDo()}))},d=function(t){o("/xml/worldmap.xml",(function(e){var n=(new Ne.a).parseFromString(e);r.globalMap=Ke(n),t.progress--,0==t.progress&&t.tryDo()}))},p=function(t,e){var n=t.resources.loadresource_maps,i={progress:n.length+1,tryDo:function(){return e(t)}};d(i),n.forEach((function(t){u(t.replace("@","/")+".tmx",t.replace("@xml/",""),i)}))};return Object(i.useEffect)((function(){o("/values/loadresources.xml",l)}),[]),Object(x.jsx)("div",{className:"App",children:n.resources&&Object(x.jsx)(Ve,{resources:n.resources,maps:n.maps,globalMap:n.globalMap})})},We=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),i(t),a(t),r(t),o(t)}))};o.a.render(Object(x.jsx)(w.a,{children:Object(x.jsx)(Je,{})}),document.getElementById("root")),We()}},[[45,1,2]]]);
//# sourceMappingURL=main.ab4a8251.chunk.js.map